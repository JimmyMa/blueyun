(function(t,e){function n(t){var e=fe[t]={};return Z.each(t.split(ee),function(t,n){e[n]=!0}),e}function i(t,n,i){if(i===e&&1===t.nodeType){var r="data-"+n.replace(ge,"-$1").toLowerCase();if(i=t.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:me.test(i)?Z.parseJSON(i):i}catch(s){}Z.data(t,n,i)}else i=e}return i}function r(t){var e;for(e in t)if(("data"!==e||!Z.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function s(){return!1}function a(){return!0}function o(t){return!t||!t.parentNode||11===t.parentNode.nodeType}function l(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function u(t,e,n){if(e=e||0,Z.isFunction(e))return Z.grep(t,function(t,i){var r=!!e.call(t,i,t);return r===n});if(e.nodeType)return Z.grep(t,function(t){return t===e===n});if("string"==typeof e){var i=Z.grep(t,function(t){return 1===t.nodeType});if(Oe.test(e))return Z.filter(e,i,!n);e=Z.filter(e,i)}return Z.grep(t,function(t){return Z.inArray(t,e)>=0===n})}function c(t){var e=Ue.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function d(t,e){return t.getElementsByTagName(e)[0]||t.appendChild(t.ownerDocument.createElement(e))}function h(t,e){if(1===e.nodeType&&Z.hasData(t)){var n,i,r,s=Z._data(t),a=Z._data(e,s),o=s.events;if(o){delete a.handle,a.events={};for(n in o)for(i=0,r=o[n].length;r>i;i++)Z.event.add(e,n,o[n][i])}a.data&&(a.data=Z.extend({},a.data))}}function p(t,e){var n;1===e.nodeType&&(e.clearAttributes&&e.clearAttributes(),e.mergeAttributes&&e.mergeAttributes(t),n=e.nodeName.toLowerCase(),"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),Z.support.html5Clone&&t.innerHTML&&!Z.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Qe.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.selected=t.defaultSelected:"input"===n||"textarea"===n?e.defaultValue=t.defaultValue:"script"===n&&e.text!==t.text&&(e.text=t.text),e.removeAttribute(Z.expando))}function f(t){return t.getElementsByTagName!==void 0?t.getElementsByTagName("*"):t.querySelectorAll!==void 0?t.querySelectorAll("*"):[]}function m(t){Qe.test(t.type)&&(t.defaultChecked=t.checked)}function g(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=yn.length;r--;)if(e=yn[r]+n,e in t)return e;return i}function v(t,e){return t=e||t,"none"===Z.css(t,"display")||!Z.contains(t.ownerDocument,t)}function y(t,e){for(var n,i,r=[],s=0,a=t.length;a>s;s++)n=t[s],n.style&&(r[s]=Z._data(n,"olddisplay"),e?(!r[s]&&"none"===n.style.display&&(n.style.display=""),""===n.style.display&&v(n)&&(r[s]=Z._data(n,"olddisplay",C(n.nodeName)))):(i=nn(n,"display"),!r[s]&&"none"!==i&&Z._data(n,"olddisplay",i)));for(s=0;a>s;s++)n=t[s],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?r[s]||"":"none"));return t}function b(t,e,n){var i=dn.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function w(t,e,n,i){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=Z.css(t,n+vn[r],!0)),i?("content"===n&&(s-=parseFloat(nn(t,"padding"+vn[r]))||0),"margin"!==n&&(s-=parseFloat(nn(t,"border"+vn[r]+"Width"))||0)):(s+=parseFloat(nn(t,"padding"+vn[r]))||0,"padding"!==n&&(s+=parseFloat(nn(t,"border"+vn[r]+"Width"))||0));return s}function x(t,e,n){var i="width"===e?t.offsetWidth:t.offsetHeight,r=!0,s=Z.support.boxSizing&&"border-box"===Z.css(t,"boxSizing");if(0>=i||null==i){if(i=nn(t,e),(0>i||null==i)&&(i=t.style[e]),hn.test(i))return i;r=s&&(Z.support.boxSizingReliable||i===t.style[e]),i=parseFloat(i)||0}return i+w(t,e,n||(s?"border":"content"),r)+"px"}function C(t){if(fn[t])return fn[t];var e=Z("<"+t+">").appendTo(L.body),n=e.css("display");return e.remove(),("none"===n||""===n)&&(rn=L.body.appendChild(rn||Z.extend(L.createElement("iframe"),{frameBorder:0,width:0,height:0})),sn&&rn.createElement||(sn=(rn.contentWindow||rn.contentDocument).document,sn.write("<!doctype html><html><body>"),sn.close()),e=sn.body.appendChild(sn.createElement(t)),n=nn(e,"display"),L.body.removeChild(rn)),fn[t]=n,n}function _(t,e,n,i){var r;if(Z.isArray(e))Z.each(e,function(e,r){n||xn.test(t)?i(t,r):_(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==Z.type(e))i(t,e);else for(r in e)_(t+"["+r+"]",e[r],n,i)}function k(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r,s,a=e.toLowerCase().split(ee),o=0,l=a.length;if(Z.isFunction(n))for(;l>o;o++)i=a[o],s=/^\+/.test(i),s&&(i=i.substr(1)||"*"),r=t[i]=t[i]||[],r[s?"unshift":"push"](n)}}function T(t,n,i,r,s,a){s=s||n.dataTypes[0],a=a||{},a[s]=!0;for(var o,l=t[s],u=0,c=l?l.length:0,d=t===Hn;c>u&&(d||!o);u++)o=l[u](n,i,r),"string"==typeof o&&(!d||a[o]?o=e:(n.dataTypes.unshift(o),o=T(t,n,i,r,o,a)));return(d||!o)&&!a["*"]&&(o=T(t,n,i,r,"*",a)),o}function D(t,n){var i,r,s=Z.ajaxSettings.flatOptions||{};for(i in n)n[i]!==e&&((s[i]?t:r||(r={}))[i]=n[i]);r&&Z.extend(!0,t,r)}function $(t,n,i){var r,s,a,o,l=t.contents,u=t.dataTypes,c=t.responseFields;for(s in c)s in i&&(n[c[s]]=i[s]);for(;"*"===u[0];)u.shift(),r===e&&(r=t.mimeType||n.getResponseHeader("content-type"));if(r)for(s in l)if(l[s]&&l[s].test(r)){u.unshift(s);break}if(u[0]in i)a=u[0];else{for(s in i){if(!u[0]||t.converters[s+" "+u[0]]){a=s;break}o||(o=s)}a=a||o}return a?(a!==u[0]&&u.unshift(a),i[a]):void 0}function j(t,e){var n,i,r,s,a=t.dataTypes.slice(),o=a[0],l={},u=0;if(t.dataFilter&&(e=t.dataFilter(e,t.dataType)),a[1])for(n in t.converters)l[n.toLowerCase()]=t.converters[n];for(;r=a[++u];)if("*"!==r){if("*"!==o&&o!==r){if(n=l[o+" "+r]||l["* "+r],!n)for(i in l)if(s=i.split(" "),s[1]===r&&(n=l[o+" "+s[0]]||l["* "+s[0]])){n===!0?n=l[i]:l[i]!==!0&&(r=s[0],a.splice(u--,0,r));break}if(n!==!0)if(n&&t["throws"])e=n(e);else try{e=n(e)}catch(c){return{state:"parsererror",error:n?c:"No conversion from "+o+" to "+r}}}o=r}return{state:"success",data:e}}function S(){try{return new t.XMLHttpRequest}catch(e){}}function E(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function F(){return setTimeout(function(){Xn=e},0),Xn=Z.now()}function N(t,e){Z.each(e,function(e,n){for(var i=(ti[e]||[]).concat(ti["*"]),r=0,s=i.length;s>r;r++)if(i[r].call(t,e,n))return})}function A(t,e,n){var i,r=0,s=Kn.length,a=Z.Deferred().always(function(){delete o.elem}),o=function(){for(var e=Xn||F(),n=Math.max(0,l.startTime+l.duration-e),i=1-(n/l.duration||0),r=0,s=l.tweens.length;s>r;r++)l.tweens[r].run(i);return a.notifyWith(t,[l,i,n]),1>i&&s?n:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:Z.extend({},e),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Xn||F(),duration:n.duration,tweens:[],createTween:function(e,n){var i=Z.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){for(var n=0,i=e?l.tweens.length:0;i>n;n++)l.tweens[n].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),u=l.props;for(M(u,l.opts.specialEasing);s>r;r++)if(i=Kn[r].call(l,t,u,l.opts))return i;return N(l,u),Z.isFunction(l.opts.start)&&l.opts.start.call(t,l),Z.fx.timer(Z.extend(o,{anim:l,queue:l.opts.queue,elem:t})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function M(t,e){var n,i,r,s,a;for(n in t)if(i=Z.camelCase(n),r=e[i],s=t[n],Z.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),a=Z.cssHooks[i],a&&"expand"in a){s=a.expand(s),delete t[i];for(n in s)n in t||(t[n]=s[n],e[n]=r)}else e[i]=r}function I(t,e,n){var i,r,s,a,o,l,u,c,d=this,h=t.style,p={},f=[],m=t.nodeType&&v(t);n.queue||(u=Z._queueHooks(t,"fx"),null==u.unqueued&&(u.unqueued=0,c=u.empty.fire,u.empty.fire=function(){u.unqueued||c()}),u.unqueued++,d.always(function(){d.always(function(){u.unqueued--,Z.queue(t,"fx").length||u.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===Z.css(t,"display")&&"none"===Z.css(t,"float")&&(Z.support.inlineBlockNeedsLayout&&"inline"!==C(t.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",Z.support.shrinkWrapBlocks||d.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in e)if(s=e[i],Jn.exec(s)){if(delete e[i],s===(m?"hide":"show"))continue;f.push(i)}if(a=f.length)for(o=Z._data(t,"fxshow")||Z._data(t,"fxshow",{}),m?Z(t).show():d.done(function(){Z(t).hide()}),d.done(function(){var e;Z.removeData(t,"fxshow",!0);for(e in p)Z.style(t,e,p[e])}),i=0;a>i;i++)r=f[i],l=d.createTween(r,m?o[r]:0),p[r]=o[r]||Z.style(t,r),r in o||(o[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}function O(t,e,n,i,r){return new O.prototype.init(t,e,n,i,r)}function H(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=vn[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function P(t){return Z.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var U,R,L=t.document,B=t.location,q=t.navigator,z=t.jQuery,W=t.$,V=Array.prototype.push,Y=Array.prototype.slice,X=Array.prototype.indexOf,Q=Object.prototype.toString,J=Object.prototype.hasOwnProperty,G=String.prototype.trim,Z=function(t,e){return new Z.fn.init(t,e,U)},K=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,te=/\S/,ee=/\s+/,ne=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ie=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,re=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^[\],:{}\s]*$/,ae=/(?:^|:|,)(?:\s*\[)+/g,oe=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,le=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ue=/^-ms-/,ce=/-([\da-z])/gi,de=function(t,e){return(e+"").toUpperCase()},he=function(){L.addEventListener?(L.removeEventListener("DOMContentLoaded",he,!1),Z.ready()):"complete"===L.readyState&&(L.detachEvent("onreadystatechange",he),Z.ready())},pe={};Z.fn=Z.prototype={constructor:Z,init:function(t,n,i){var r,s,a;if(!t)return this;if(t.nodeType)return this.context=this[0]=t,this.length=1,this;if("string"==typeof t){if(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ie.exec(t),r&&(r[1]||!n)){if(r[1])return n=n instanceof Z?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:L,t=Z.parseHTML(r[1],a,!0),re.test(r[1])&&Z.isPlainObject(n)&&this.attr.call(t,n,!0),Z.merge(this,t);if(s=L.getElementById(r[2]),s&&s.parentNode){if(s.id!==r[2])return i.find(t);this.length=1,this[0]=s}return this.context=L,this.selector=t,this}return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t)}return Z.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),Z.makeArray(t,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return Y.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t,e,n){var i=Z.merge(this.constructor(),t);return i.prevObject=this,i.context=this.context,"find"===e?i.selector=this.selector+(this.selector?" ":"")+n:e&&(i.selector=this.selector+"."+e+"("+n+")"),i},each:function(t,e){return Z.each(this,t,e)},ready:function(t){return Z.ready.promise().done(t),this},eq:function(t){return t=+t,-1===t?this.slice(t):this.slice(t,t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Y.apply(this,arguments),"slice",Y.call(arguments).join(","))},map:function(t){return this.pushStack(Z.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:[].sort,splice:[].splice},Z.fn.init.prototype=Z.fn,Z.extend=Z.fn.extend=function(){var t,n,i,r,s,a,o=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},l=2),"object"!=typeof o&&!Z.isFunction(o)&&(o={}),u===l&&(o=this,--l);u>l;l++)if(null!=(t=arguments[l]))for(n in t)i=o[n],r=t[n],o!==r&&(c&&r&&(Z.isPlainObject(r)||(s=Z.isArray(r)))?(s?(s=!1,a=i&&Z.isArray(i)?i:[]):a=i&&Z.isPlainObject(i)?i:{},o[n]=Z.extend(c,a,r)):r!==e&&(o[n]=r));return o},Z.extend({noConflict:function(e){return t.$===Z&&(t.$=W),e&&t.jQuery===Z&&(t.jQuery=z),Z},isReady:!1,readyWait:1,holdReady:function(t){t?Z.readyWait++:Z.ready(!0)},ready:function(t){if(t===!0?!--Z.readyWait:!Z.isReady){if(!L.body)return setTimeout(Z.ready,1);Z.isReady=!0,t!==!0&&--Z.readyWait>0||(R.resolveWith(L,[Z]),Z.fn.trigger&&Z(L).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===Z.type(t)},isArray:Array.isArray||function(t){return"array"===Z.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":pe[Q.call(t)]||"object"},isPlainObject:function(t){if(!t||"object"!==Z.type(t)||t.nodeType||Z.isWindow(t))return!1;try{if(t.constructor&&!J.call(t,"constructor")&&!J.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in t);return i===e||J.call(t,i)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){var i;return t&&"string"==typeof t?("boolean"==typeof e&&(n=e,e=0),e=e||L,(i=re.exec(t))?[e.createElement(i[1])]:(i=Z.buildFragment([t],e,n?null:[]),Z.merge([],(i.cacheable?Z.clone(i.fragment):i.fragment).childNodes))):null},parseJSON:function(e){return e&&"string"==typeof e?(e=Z.trim(e),t.JSON&&t.JSON.parse?t.JSON.parse(e):se.test(e.replace(oe,"@").replace(le,"]").replace(ae,""))?Function("return "+e)():(Z.error("Invalid JSON: "+e),void 0)):null},parseXML:function(n){var i,r;if(!n||"string"!=typeof n)return null;try{t.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(s){i=e}return(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(e){e&&te.test(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ue,"ms-").replace(ce,de)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,n,i){var r,s=0,a=t.length,o=a===e||Z.isFunction(t);if(i)if(o){for(r in t)if(n.apply(t[r],i)===!1)break}else for(;a>s&&n.apply(t[s++],i)!==!1;);else if(o){for(r in t)if(n.call(t[r],r,t[r])===!1)break}else for(;a>s&&n.call(t[s],s,t[s++])!==!1;);return t},trim:G&&!G.call("ï»¿Â ")?function(t){return null==t?"":G.call(t)}:function(t){return null==t?"":(t+"").replace(ne,"")},makeArray:function(t,e){var n,i=e||[];return null!=t&&(n=Z.type(t),null==t.length||"string"===n||"function"===n||"regexp"===n||Z.isWindow(t)?V.call(i,t):Z.merge(i,t)),i},inArray:function(t,e,n){var i;if(e){if(X)return X.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,n){var i=n.length,r=t.length,s=0;if("number"==typeof i)for(;i>s;s++)t[r++]=n[s];else for(;n[s]!==e;)t[r++]=n[s++];return t.length=r,t},grep:function(t,e,n){var i,r=[],s=0,a=t.length;for(n=!!n;a>s;s++)i=!!e(t[s],s),n!==i&&r.push(t[s]);return r},map:function(t,n,i){var r,s,a=[],o=0,l=t.length,u=t instanceof Z||l!==e&&"number"==typeof l&&(l>0&&t[0]&&t[l-1]||0===l||Z.isArray(t));if(u)for(;l>o;o++)r=n(t[o],o,i),null!=r&&(a[a.length]=r);else for(s in t)r=n(t[s],s,i),null!=r&&(a[a.length]=r);return a.concat.apply([],a)},guid:1,proxy:function(t,n){var i,r,s;return"string"==typeof n&&(i=t[n],n=t,t=i),Z.isFunction(t)?(r=Y.call(arguments,2),s=function(){return t.apply(n,r.concat(Y.call(arguments)))},s.guid=t.guid=t.guid||Z.guid++,s):e},access:function(t,n,i,r,s,a,o){var l,u=null==i,c=0,d=t.length;if(i&&"object"==typeof i){for(c in i)Z.access(t,n,c,i[c],1,a,r);s=1}else if(r!==e){if(l=o===e&&Z.isFunction(r),u&&(l?(l=n,n=function(t,e,n){return l.call(Z(t),n)}):(n.call(t,r),n=null)),n)for(;d>c;c++)n(t[c],i,l?r.call(t[c],c,n(t[c],i)):r,o);s=1}return s?t:u?n.call(t):d?n(t[0],i):a},now:function(){return(new Date).getTime()}}),Z.ready.promise=function(e){if(!R)if(R=Z.Deferred(),"complete"===L.readyState)setTimeout(Z.ready,1);else if(L.addEventListener)L.addEventListener("DOMContentLoaded",he,!1),t.addEventListener("load",Z.ready,!1);else{L.attachEvent("onreadystatechange",he),t.attachEvent("onload",Z.ready);var n=!1;try{n=null==t.frameElement&&L.documentElement}catch(i){}n&&n.doScroll&&function r(){if(!Z.isReady){try{n.doScroll("left")}catch(t){return setTimeout(r,50)}Z.ready()}}()}return R.promise(e)},Z.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,e){pe["[object "+e+"]"]=e.toLowerCase()}),U=Z(L);var fe={};Z.Callbacks=function(t){t="string"==typeof t?fe[t]||n(t):Z.extend({},t);var i,r,s,a,o,l,u=[],c=!t.once&&[],d=function(e){for(i=t.memory&&e,r=!0,l=a||0,a=0,o=u.length,s=!0;u&&o>l;l++)if(u[l].apply(e[0],e[1])===!1&&t.stopOnFalse){i=!1;break}s=!1,u&&(c?c.length&&d(c.shift()):i?u=[]:h.disable())},h={add:function(){if(u){var e=u.length;(function n(e){Z.each(e,function(e,i){var r=Z.type(i);"function"!==r||t.unique&&h.has(i)?i&&i.length&&"string"!==r&&n(i):u.push(i)})})(arguments),s?o=u.length:i&&(a=e,d(i))}return this},remove:function(){return u&&Z.each(arguments,function(t,e){for(var n;(n=Z.inArray(e,u,n))>-1;)u.splice(n,1),s&&(o>=n&&o--,l>=n&&l--)}),this},has:function(t){return Z.inArray(t,u)>-1},empty:function(){return u=[],this},disable:function(){return u=c=i=e,this},disabled:function(){return!u},lock:function(){return c=e,i||h.disable(),this},locked:function(){return!c},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],u&&(!r||c)&&(s?c.push(e):d(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!r}};return h},Z.extend({Deferred:function(t){var e=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Z.Deferred(function(n){Z.each(e,function(e,i){var s=i[0],a=t[e];r[i[1]](Z.isFunction(a)?function(){var t=a.apply(this,arguments);t&&Z.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===r?n:this,[t])}:n[s])}),t=null}).promise()},promise:function(t){return null!=t?Z.extend(t,i):i}},r={};return i.pipe=i.then,Z.each(e,function(t,s){var a=s[2],o=s[3];i[s[1]]=a.add,o&&a.add(function(){n=o},e[1^t][2].disable,e[2][2].lock),r[s[0]]=a.fire,r[s[0]+"With"]=a.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,s=Y.call(arguments),a=s.length,o=1!==a||t&&Z.isFunction(t.promise)?a:0,l=1===o?t:Z.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?Y.call(arguments):r,i===e?l.notifyWith(n,i):--o||l.resolveWith(n,i)}};if(a>1)for(e=Array(a),n=Array(a),i=Array(a);a>r;r++)s[r]&&Z.isFunction(s[r].promise)?s[r].promise().done(u(r,i,s)).fail(l.reject).progress(u(r,n,e)):--o;return o||l.resolveWith(i,s),l.promise()}}),Z.support=function(){var e,n,i,r,s,a,o,l,u,c,d,h=L.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),i=h.getElementsByTagName("a")[0],i.style.cssText="top:1px;float:left;opacity:.5",!n||!n.length)return{};r=L.createElement("select"),s=r.appendChild(L.createElement("option")),a=h.getElementsByTagName("input")[0],e={leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:"on"===a.value,optSelected:s.selected,getSetAttribute:"t"!==h.className,enctype:!!L.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==L.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===L.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,e.noCloneChecked=a.cloneNode(!0).checked,r.disabled=!0,e.optDisabled=!s.disabled;try{delete h.test}catch(p){e.deleteExpando=!1}if(!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",d=function(){e.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick"),h.detachEvent("onclick",d)),a=L.createElement("input"),a.value="t",a.setAttribute("type","radio"),e.radioValue="t"===a.value,a.setAttribute("checked","checked"),a.setAttribute("name","t"),h.appendChild(a),o=L.createDocumentFragment(),o.appendChild(h.lastChild),e.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,e.appendChecked=a.checked,o.removeChild(a),o.appendChild(h),h.attachEvent)for(u in{submit:!0,change:!0,focusin:!0})l="on"+u,c=l in h,c||(h.setAttribute(l,"return;"),c="function"==typeof h[l]),e[u+"Bubbles"]=c;return Z(function(){var n,i,r,s,a="padding:0;margin:0;border:0;display:block;overflow:hidden;",o=L.getElementsByTagName("body")[0];o&&(n=L.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",o.insertBefore(n,o.firstChild),i=L.createElement("div"),n.appendChild(i),i.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=i.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",e.reliableHiddenOffsets=c&&0===r[0].offsetHeight,i.innerHTML="",i.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",e.boxSizing=4===i.offsetWidth,e.doesNotIncludeMarginInBodyOffset=1!==o.offsetTop,t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(i,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(i,null)||{width:"4px"}).width,s=L.createElement("div"),s.style.cssText=i.style.cssText=a,s.style.marginRight=s.style.width="0",i.style.width="1px",i.appendChild(s),e.reliableMarginRight=!parseFloat((t.getComputedStyle(s,null)||{}).marginRight)),i.style.zoom!==void 0&&(i.innerHTML="",i.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===i.offsetWidth,i.style.display="block",i.style.overflow="visible",i.innerHTML="<div></div>",i.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==i.offsetWidth,n.style.zoom=1),o.removeChild(n),n=i=r=s=null)}),o.removeChild(h),n=i=r=s=a=o=h=null,e}();var me=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ge=/([A-Z])/g;Z.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Z.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?Z.cache[t[Z.expando]]:t[Z.expando],!!t&&!r(t)},data:function(t,n,i,r){if(Z.acceptData(t)){var s,a,o=Z.expando,l="string"==typeof n,u=t.nodeType,c=u?Z.cache:t,d=u?t[o]:t[o]&&o;if(d&&c[d]&&(r||c[d].data)||!l||i!==e)return d||(u?t[o]=d=Z.deletedIds.pop()||Z.guid++:d=o),c[d]||(c[d]={},u||(c[d].toJSON=Z.noop)),("object"==typeof n||"function"==typeof n)&&(r?c[d]=Z.extend(c[d],n):c[d].data=Z.extend(c[d].data,n)),s=c[d],r||(s.data||(s.data={}),s=s.data),i!==e&&(s[Z.camelCase(n)]=i),l?(a=s[n],null==a&&(a=s[Z.camelCase(n)])):a=s,a}},removeData:function(t,e,n){if(Z.acceptData(t)){var i,s,a,o=t.nodeType,l=o?Z.cache:t,u=o?t[Z.expando]:Z.expando;if(l[u]){if(e&&(i=n?l[u]:l[u].data)){Z.isArray(e)||(e in i?e=[e]:(e=Z.camelCase(e),e=e in i?[e]:e.split(" ")));for(s=0,a=e.length;a>s;s++)delete i[e[s]];if(!(n?r:Z.isEmptyObject)(i))return}(n||(delete l[u].data,r(l[u])))&&(o?Z.cleanData([t],!0):Z.support.deleteExpando||l!=l.window?delete l[u]:l[u]=null)}}},_data:function(t,e,n){return Z.data(t,e,n,!0)},acceptData:function(t){var e=t.nodeName&&Z.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),Z.fn.extend({data:function(t,n){var r,s,a,o,l,u=this[0],c=0,d=null;if(t===e){if(this.length&&(d=Z.data(u),1===u.nodeType&&!Z._data(u,"parsedAttrs"))){for(a=u.attributes,l=a.length;l>c;c++)o=a[c].name,o.indexOf("data-")||(o=Z.camelCase(o.substring(5)),i(u,o,d[o]));Z._data(u,"parsedAttrs",!0)}return d}return"object"==typeof t?this.each(function(){Z.data(this,t)}):(r=t.split(".",2),r[1]=r[1]?"."+r[1]:"",s=r[1]+"!",Z.access(this,function(n){return n===e?(d=this.triggerHandler("getData"+s,[r[0]]),d===e&&u&&(d=Z.data(u,t),d=i(u,t,d)),d===e&&r[1]?this.data(r[0]):d):(r[1]=n,this.each(function(){var e=Z(this);e.triggerHandler("setData"+s,r),Z.data(this,t,n),e.triggerHandler("changeData"+s,r)}),void 0)},null,n,arguments.length>1,null,!1))},removeData:function(t){return this.each(function(){Z.removeData(this,t)})}}),Z.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=Z._data(t,e),n&&(!i||Z.isArray(n)?i=Z._data(t,e,Z.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=Z.queue(t,e),i=n.length,r=n.shift(),s=Z._queueHooks(t,e),a=function(){Z.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,a,s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Z._data(t,n)||Z._data(t,n,{empty:Z.Callbacks("once memory").add(function(){Z.removeData(t,e+"queue",!0),Z.removeData(t,n,!0)})})}}),Z.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),i>arguments.length?Z.queue(this[0],t):n===e?this:this.each(function(){var e=Z.queue(this,t,n);Z._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&Z.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Z.dequeue(this,t)})},delay:function(t,e){return t=Z.fx?Z.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,s=Z.Deferred(),a=this,o=this.length,l=function(){--r||s.resolveWith(a,[a])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";o--;)i=Z._data(a[o],t+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),s.promise(n)}});var ve,ye,be,we=/[\t\r\n]/g,xe=/\r/g,Ce=/^(?:button|input)$/i,_e=/^(?:button|input|object|select|textarea)$/i,ke=/^a(?:rea|)$/i,Te=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,De=Z.support.getSetAttribute;Z.fn.extend({attr:function(t,e){return Z.access(this,Z.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Z.removeAttr(this,t)})},prop:function(t,e){return Z.access(this,Z.prop,t,e,arguments.length>1)},removeProp:function(t){return t=Z.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(n){}})},addClass:function(t){var e,n,i,r,s,a,o;if(Z.isFunction(t))return this.each(function(e){Z(this).addClass(t.call(this,e,this.className))});if(t&&"string"==typeof t)for(e=t.split(ee),n=0,i=this.length;i>n;n++)if(r=this[n],1===r.nodeType)if(r.className||1!==e.length){for(s=" "+r.className+" ",a=0,o=e.length;o>a;a++)0>s.indexOf(" "+e[a]+" ")&&(s+=e[a]+" ");r.className=Z.trim(s)}else r.className=t;return this},removeClass:function(t){var n,i,r,s,a,o,l;if(Z.isFunction(t))return this.each(function(e){Z(this).removeClass(t.call(this,e,this.className))});if(t&&"string"==typeof t||t===e)for(n=(t||"").split(ee),o=0,l=this.length;l>o;o++)if(r=this[o],1===r.nodeType&&r.className){for(i=(" "+r.className+" ").replace(we," "),s=0,a=n.length;a>s;s++)for(;i.indexOf(" "+n[s]+" ")>=0;)i=i.replace(" "+n[s]+" "," ");r.className=t?Z.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t,i="boolean"==typeof e;return Z.isFunction(t)?this.each(function(n){Z(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var r,s=0,a=Z(this),o=e,l=t.split(ee);r=l[s++];)o=i?o:!a.hasClass(r),a[o?"addClass":"removeClass"](r);else("undefined"===n||"boolean"===n)&&(this.className&&Z._data(this,"__className__",this.className),this.className=this.className||t===!1?"":Z._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(we," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,r,s=this[0];{if(arguments.length)return r=Z.isFunction(t),this.each(function(i){var s,a=Z(this);1===this.nodeType&&(s=r?t.call(this,i,a.val()):t,null==s?s="":"number"==typeof s?s+="":Z.isArray(s)&&(s=Z.map(s,function(t){return null==t?"":t+""})),n=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,s,"value")!==e||(this.value=s))});if(s)return n=Z.valHooks[s.type]||Z.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(s,"value"))!==e?i:(i=s.value,"string"==typeof i?i.replace(xe,""):null==i?"":i)}}}),Z.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){var e,n,i,r,s=t.selectedIndex,a=[],o=t.options,l="select-one"===t.type;if(0>s)return null;for(n=l?s:0,i=l?s+1:o.length;i>n;n++)if(r=o[n],!(!r.selected||(Z.support.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&Z.nodeName(r.parentNode,"optgroup"))){if(e=Z(r).val(),l)return e;a.push(e)}return l&&!a.length&&o.length?Z(o[s]).val():a},set:function(t,e){var n=Z.makeArray(e);return Z(t).find("option").each(function(){this.selected=Z.inArray(Z(this).val(),n)>=0}),n.length||(t.selectedIndex=-1),n}}},attrFn:{},attr:function(t,n,i,r){var s,a,o,l=t.nodeType;if(t&&3!==l&&8!==l&&2!==l)return r&&Z.isFunction(Z.fn[n])?Z(t)[n](i):t.getAttribute===void 0?Z.prop(t,n,i):(o=1!==l||!Z.isXMLDoc(t),o&&(n=n.toLowerCase(),a=Z.attrHooks[n]||(Te.test(n)?ye:ve)),i!==e?null===i?(Z.removeAttr(t,n),void 0):a&&"set"in a&&o&&(s=a.set(t,i,n))!==e?s:(t.setAttribute(n,i+""),i):a&&"get"in a&&o&&null!==(s=a.get(t,n))?s:(s=t.getAttribute(n),null===s?e:s))},removeAttr:function(t,e){var n,i,r,s,a=0;if(e&&1===t.nodeType)for(i=e.split(ee);i.length>a;a++)r=i[a],r&&(n=Z.propFix[r]||r,s=Te.test(r),s||Z.attr(t,r,""),t.removeAttribute(De?r:n),s&&n in t&&(t[n]=!1))},attrHooks:{type:{set:function(t,e){if(Ce.test(t.nodeName)&&t.parentNode)Z.error("type property can't be changed");else if(!Z.support.radioValue&&"radio"===e&&Z.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}},value:{get:function(t,e){return ve&&Z.nodeName(t,"button")?ve.get(t,e):e in t?t.value:null},set:function(t,e,n){return ve&&Z.nodeName(t,"button")?ve.set(t,e,n):(t.value=e,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,n,i){var r,s,a,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return a=1!==o||!Z.isXMLDoc(t),a&&(n=Z.propFix[n]||n,s=Z.propHooks[n]),i!==e?s&&"set"in s&&(r=s.set(t,i,n))!==e?r:t[n]=i:s&&"get"in s&&null!==(r=s.get(t,n))?r:t[n]},propHooks:{tabIndex:{get:function(t){var n=t.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):_e.test(t.nodeName)||ke.test(t.nodeName)&&t.href?0:e}}}}),ye={get:function(t,n){var i,r=Z.prop(t,n);return r===!0||"boolean"!=typeof r&&(i=t.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():e},set:function(t,e,n){var i;return e===!1?Z.removeAttr(t,n):(i=Z.propFix[n]||n,i in t&&(t[i]=!0),t.setAttribute(n,n.toLowerCase())),n}},De||(be={name:!0,id:!0,coords:!0},ve=Z.valHooks.button={get:function(t,n){var i;return i=t.getAttributeNode(n),i&&(be[n]?""!==i.value:i.specified)?i.value:e},set:function(t,e,n){var i=t.getAttributeNode(n);return i||(i=L.createAttribute(n),t.setAttributeNode(i)),i.value=e+""}},Z.each(["width","height"],function(t,e){Z.attrHooks[e]=Z.extend(Z.attrHooks[e],{set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}})}),Z.attrHooks.contenteditable={get:ve.get,set:function(t,e,n){""===e&&(e="false"),ve.set(t,e,n)
}}),Z.support.hrefNormalized||Z.each(["href","src","width","height"],function(t,n){Z.attrHooks[n]=Z.extend(Z.attrHooks[n],{get:function(t){var i=t.getAttribute(n,2);return null===i?e:i}})}),Z.support.style||(Z.attrHooks.style={get:function(t){return t.style.cssText.toLowerCase()||e},set:function(t,e){return t.style.cssText=e+""}}),Z.support.optSelected||(Z.propHooks.selected=Z.extend(Z.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),Z.support.enctype||(Z.propFix.enctype="encoding"),Z.support.checkOn||Z.each(["radio","checkbox"],function(){Z.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]=Z.extend(Z.valHooks[this],{set:function(t,e){return Z.isArray(e)?t.checked=Z.inArray(Z(t).val(),e)>=0:void 0}})});var $e=/^(?:textarea|input|select)$/i,je=/^([^\.]*|)(?:\.(.+)|)$/,Se=/(?:^|\s)hover(\.\S+|)\b/,Ee=/^key/,Fe=/^(?:mouse|contextmenu)|click/,Ne=/^(?:focusinfocus|focusoutblur)$/,Ae=function(t){return Z.event.special.hover?t:t.replace(Se,"mouseenter$1 mouseleave$1")};Z.event={add:function(t,n,i,r,s){var a,o,l,u,c,d,h,p,f,m,g;if(3!==t.nodeType&&8!==t.nodeType&&n&&i&&(a=Z._data(t))){for(i.handler&&(f=i,i=f.handler,s=f.selector),i.guid||(i.guid=Z.guid++),l=a.events,l||(a.events=l={}),o=a.handle,o||(a.handle=o=function(t){return void 0===Z||t&&Z.event.triggered===t.type?e:Z.event.dispatch.apply(o.elem,arguments)},o.elem=t),n=Z.trim(Ae(n)).split(" "),u=0;n.length>u;u++)c=je.exec(n[u])||[],d=c[1],h=(c[2]||"").split(".").sort(),g=Z.event.special[d]||{},d=(s?g.delegateType:g.bindType)||d,g=Z.event.special[d]||{},p=Z.extend({type:d,origType:c[1],data:r,handler:i,guid:i.guid,selector:s,needsContext:s&&Z.expr.match.needsContext.test(s),namespace:h.join(".")},f),m=l[d],m||(m=l[d]=[],m.delegateCount=0,g.setup&&g.setup.call(t,r,h,o)!==!1||(t.addEventListener?t.addEventListener(d,o,!1):t.attachEvent&&t.attachEvent("on"+d,o))),g.add&&(g.add.call(t,p),p.handler.guid||(p.handler.guid=i.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),Z.event.global[d]=!0;t=null}},global:{},remove:function(t,e,n,i,r){var s,a,o,l,u,c,d,h,p,f,m,g=Z.hasData(t)&&Z._data(t);if(g&&(h=g.events)){for(e=Z.trim(Ae(e||"")).split(" "),s=0;e.length>s;s++)if(a=je.exec(e[s])||[],o=l=a[1],u=a[2],o){for(p=Z.event.special[o]||{},o=(i?p.delegateType:p.bindType)||o,f=h[o]||[],c=f.length,u=u?RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=0;f.length>d;d++)m=f[d],!(!r&&l!==m.origType||n&&n.guid!==m.guid||u&&!u.test(m.namespace)||i&&i!==m.selector&&("**"!==i||!m.selector)||(f.splice(d--,1),m.selector&&f.delegateCount--,!p.remove||!p.remove.call(t,m)));0===f.length&&c!==f.length&&((!p.teardown||p.teardown.call(t,u,g.handle)===!1)&&Z.removeEvent(t,o,g.handle),delete h[o])}else for(o in h)Z.event.remove(t,o+e[s],n,i,!0);Z.isEmptyObject(h)&&(delete g.handle,Z.removeData(t,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,r,s){if(!r||3!==r.nodeType&&8!==r.nodeType){var a,o,l,u,c,d,h,p,f,m,g=n.type||n,v=[];if(Ne.test(g+Z.event.triggered))return;if(g.indexOf("!")>=0&&(g=g.slice(0,-1),o=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),(!r||Z.event.customEvent[g])&&!Z.event.global[g])return;if(n="object"==typeof n?n[Z.expando]?n:new Z.Event(g,n):new Z.Event(g),n.type=g,n.isTrigger=!0,n.exclusive=o,n.namespace=v.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=0>g.indexOf(":")?"on"+g:"",!r){a=Z.cache;for(l in a)a[l].events&&a[l].events[g]&&Z.event.trigger(n,i,a[l].handle.elem,!0);return}if(n.result=e,n.target||(n.target=r),i=null!=i?Z.makeArray(i):[],i.unshift(n),h=Z.event.special[g]||{},h.trigger&&h.trigger.apply(r,i)===!1)return;if(f=[[r,h.bindType||g]],!s&&!h.noBubble&&!Z.isWindow(r)){for(m=h.delegateType||g,u=Ne.test(m+g)?r:r.parentNode,c=r;u;u=u.parentNode)f.push([u,m]),c=u;c===(r.ownerDocument||L)&&f.push([c.defaultView||c.parentWindow||t,m])}for(l=0;f.length>l&&!n.isPropagationStopped();l++)u=f[l][0],n.type=f[l][1],p=(Z._data(u,"events")||{})[n.type]&&Z._data(u,"handle"),p&&p.apply(u,i),p=d&&u[d],p&&Z.acceptData(u)&&p.apply&&p.apply(u,i)===!1&&n.preventDefault();return n.type=g,!(s||n.isDefaultPrevented()||h._default&&h._default.apply(r.ownerDocument,i)!==!1||"click"===g&&Z.nodeName(r,"a")||!Z.acceptData(r)||!d||!r[g]||("focus"===g||"blur"===g)&&0===n.target.offsetWidth||Z.isWindow(r)||(c=r[d],c&&(r[d]=null),Z.event.triggered=g,r[g](),Z.event.triggered=e,!c||!(r[d]=c))),n.result}},dispatch:function(n){n=Z.event.fix(n||t.event);var i,r,s,a,o,l,u,c,d,h=(Z._data(this,"events")||{})[n.type]||[],p=h.delegateCount,f=Y.call(arguments),m=!n.exclusive&&!n.namespace,g=Z.event.special[n.type]||{},v=[];if(f[0]=n,n.delegateTarget=this,!g.preDispatch||g.preDispatch.call(this,n)!==!1){if(p&&(!n.button||"click"!==n.type))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||"click"!==n.type){for(o={},u=[],i=0;p>i;i++)c=h[i],d=c.selector,o[d]===e&&(o[d]=c.needsContext?Z(d,this).index(s)>=0:Z.find(d,this,null,[s]).length),o[d]&&u.push(c);u.length&&v.push({elem:s,matches:u})}for(h.length>p&&v.push({elem:this,matches:h.slice(p)}),i=0;v.length>i&&!n.isPropagationStopped();i++)for(l=v[i],n.currentTarget=l.elem,r=0;l.matches.length>r&&!n.isImmediatePropagationStopped();r++)c=l.matches[r],(m||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))&&(n.data=c.data,n.handleObj=c,a=((Z.event.special[c.origType]||{}).handle||c.handler).apply(l.elem,f),a!==e&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())));return g.postDispatch&&g.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,r,s,a=n.button,o=n.fromElement;return null==t.pageX&&null!=n.clientX&&(i=t.target.ownerDocument||L,r=i.documentElement,s=i.body,t.pageX=n.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),t.pageY=n.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)),!t.relatedTarget&&o&&(t.relatedTarget=o===t.target?n.toElement:o),!t.which&&a!==e&&(t.which=1&a?1:2&a?3:4&a?2:0),t}},fix:function(t){if(t[Z.expando])return t;var e,n,i=t,r=Z.event.fixHooks[t.type]||{},s=r.props?this.props.concat(r.props):this.props;for(t=Z.Event(i),e=s.length;e;)n=s[--e],t[n]=i[n];return t.target||(t.target=i.srcElement||L),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,i):t},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(t,e,n){Z.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(t,e){this.onbeforeunload===e&&(this.onbeforeunload=null)}}},simulate:function(t,e,n,i){var r=Z.extend(new Z.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?Z.event.trigger(r,null,e):Z.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},Z.event.handle=Z.event.dispatch,Z.removeEvent=L.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(t[i]===void 0&&(t[i]=null),t.detachEvent(i,n))},Z.Event=function(t,e){return this instanceof Z.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?a:s):this.type=t,e&&Z.extend(this,e),this.timeStamp=t&&t.timeStamp||Z.now(),this[Z.expando]=!0,void 0):new Z.Event(t,e)},Z.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var t=this.originalEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var t=this.originalEvent;t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},Z.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){Z.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,s=t.handleObj;return s.selector,(!r||r!==i&&!Z.contains(i,r))&&(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}}),Z.support.submitBubbles||(Z.event.special.submit={setup:function(){return Z.nodeName(this,"form")?!1:(Z.event.add(this,"click._submit keypress._submit",function(t){var n=t.target,i=Z.nodeName(n,"input")||Z.nodeName(n,"button")?n.form:e;i&&!Z._data(i,"_submit_attached")&&(Z.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),Z._data(i,"_submit_attached",!0))}),void 0)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&Z.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return Z.nodeName(this,"form")?!1:(Z.event.remove(this,"._submit"),void 0)}}),Z.support.changeBubbles||(Z.event.special.change={setup:function(){return $e.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(Z.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),Z.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),Z.event.simulate("change",this,t,!0)})),!1):(Z.event.add(this,"beforeactivate._change",function(t){var e=t.target;$e.test(e.nodeName)&&!Z._data(e,"_change_attached")&&(Z.event.add(e,"change._change",function(t){this.parentNode&&!t.isSimulated&&!t.isTrigger&&Z.event.simulate("change",this.parentNode,t,!0)}),Z._data(e,"_change_attached",!0))}),void 0)},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return Z.event.remove(this,"._change"),!$e.test(this.nodeName)}}),Z.support.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){Z.event.simulate(e,t.target,Z.event.fix(t),!0)};Z.event.special[e]={setup:function(){0===n++&&L.addEventListener(t,i,!0)},teardown:function(){0===--n&&L.removeEventListener(t,i,!0)}}}),Z.fn.extend({on:function(t,n,i,r,a){var o,l;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(l in t)this.on(l,n,i,t[l],a);return this}if(null==i&&null==r?(r=n,i=n=e):null==r&&("string"==typeof n?(r=i,i=e):(r=i,i=n,n=e)),r===!1)r=s;else if(!r)return this;return 1===a&&(o=r,r=function(t){return Z().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,t,r,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var r,a;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,Z(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(a in t)this.off(a,n,t[a]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=s),this.each(function(){Z.event.remove(this,t,i,n)})},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},live:function(t,e,n){return Z(this.context).on(t,this.selector,e,n),this},die:function(t,e){return Z(this.context).off(t,this.selector||"**",e),this},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},trigger:function(t,e){return this.each(function(){Z.event.trigger(t,e,this)})},triggerHandler:function(t,e){return this[0]?Z.event.trigger(t,e,this[0],!0):void 0},toggle:function(t){var e=arguments,n=t.guid||Z.guid++,i=0,r=function(n){var r=(Z._data(this,"lastToggle"+t.guid)||0)%i;return Z._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),e[r].apply(this,arguments)||!1};for(r.guid=n;e.length>i;)e[i++].guid=n;return this.click(r)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Z.fn[e]=function(t,n){return null==n&&(n=t,t=null),arguments.length>0?this.on(e,null,t,n):this.trigger(e)},Ee.test(e)&&(Z.event.fixHooks[e]=Z.event.keyHooks),Fe.test(e)&&(Z.event.fixHooks[e]=Z.event.mouseHooks)}),function(t,e){function n(t,e,n,i){n=n||[],e=e||F;var r,s,a,o,l=e.nodeType;if(!t||"string"!=typeof t)return n;if(1!==l&&9!==l)return[];if(a=x(e),!a&&!i&&(r=ne.exec(t)))if(o=r[1]){if(9===l){if(s=e.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(o))&&C(e,s)&&s.id===o)return n.push(s),n}else{if(r[2])return O.apply(n,H.call(e.getElementsByTagName(t),0)),n;if((o=r[3])&&he&&e.getElementsByClassName)return O.apply(n,H.call(e.getElementsByClassName(o),0)),n}return m(t.replace(G,"$1"),e,n,i,a)}function i(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function r(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function s(t){return U(function(e){return e=+e,U(function(n,i){for(var r,s=t([],n.length,e),a=s.length;a--;)n[r=s[a]]&&(n[r]=!(i[r]=n[r]))})})}function a(t,e,n){if(t===e)return n;for(var i=t.nextSibling;i;){if(i===e)return-1;i=i.nextSibling}return 1}function o(t,e){var i,r,s,a,o,l,u,c=B[S][t];if(c)return e?0:c.slice(0);for(o=t,l=[],u=b.preFilter;o;){(!i||(r=K.exec(o)))&&(r&&(o=o.slice(r[0].length)),l.push(s=[])),i=!1,(r=te.exec(o))&&(s.push(i=new E(r.shift())),o=o.slice(i.length),i.type=r[0].replace(G," "));for(a in b.filter)(r=oe[a].exec(o))&&(!u[a]||(r=u[a](r,F,!0)))&&(s.push(i=new E(r.shift())),o=o.slice(i.length),i.type=a,i.matches=r);if(!i)break}return e?o.length:o?n.error(t):B(t,l).slice(0)}function l(t,e,n){var i=e.dir,r=n&&"parentNode"===e.dir,s=M++;return e.first?function(e,n,s){for(;e=e[i];)if(r||1===e.nodeType)return t(e,n,s)}:function(e,n,a){if(a){for(;e=e[i];)if((r||1===e.nodeType)&&t(e,n,a))return e}else for(var o,l=A+" "+s+" ",u=l+v;e=e[i];)if(r||1===e.nodeType){if((o=e[S])===u)return e.sizset;if("string"==typeof o&&0===o.indexOf(l)){if(e.sizset)return e}else{if(e[S]=u,t(e,n,a))return e.sizset=!0,e;e.sizset=!1}}}}function u(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function c(t,e,n,i,r){for(var s,a=[],o=0,l=t.length,u=null!=e;l>o;o++)(s=t[o])&&(!n||n(s,i,r))&&(a.push(s),u&&e.push(o));return a}function d(t,e,n,i,r,s){return i&&!i[S]&&(i=d(i)),r&&!r[S]&&(r=d(r,s)),U(function(s,a,o,l){if(!s||!r){var u,d,h,p=[],m=[],g=a.length,v=s||f(e||"*",o.nodeType?[o]:o,[],s),y=!t||!s&&e?v:c(v,p,t,o,l),b=n?r||(s?t:g||i)?[]:a:y;if(n&&n(y,b,o,l),i)for(h=c(b,m),i(h,[],o,l),u=h.length;u--;)(d=h[u])&&(b[m[u]]=!(y[m[u]]=d));if(s)for(u=t&&b.length;u--;)(d=b[u])&&(s[p[u]]=!(a[p[u]]=d));else b=c(b===a?b.splice(g,b.length):b),r?r(null,a,b,l):O.apply(a,b)}})}function h(t){for(var e,n,i,r=t.length,s=b.relative[t[0].type],a=s||b.relative[" "],o=s?1:0,c=l(function(t){return t===e},a,!0),p=l(function(t){return P.call(e,t)>-1},a,!0),f=[function(t,n,i){return!s&&(i||n!==D)||((e=n).nodeType?c(t,n,i):p(t,n,i))}];r>o;o++)if(n=b.relative[t[o].type])f=[l(u(f),n)];else{if(n=b.filter[t[o].type].apply(null,t[o].matches),n[S]){for(i=++o;r>i&&!b.relative[t[i].type];i++);return d(o>1&&u(f),o>1&&t.slice(0,o-1).join("").replace(G,"$1"),n,i>o&&h(t.slice(o,i)),r>i&&h(t=t.slice(i)),r>i&&t.join(""))}f.push(n)}return u(f)}function p(t,e){var i=e.length>0,r=t.length>0,s=function(a,o,l,u,d){var h,p,f,m=[],g=0,y="0",w=a&&[],x=null!=d,C=D,_=a||r&&b.find.TAG("*",d&&o.parentNode||o),k=A+=null==C?1:Math.E;for(x&&(D=o!==F&&o,v=s.el);null!=(h=_[y]);y++){if(r&&h){for(p=0;f=t[p];p++)if(f(h,o,l)){u.push(h);break}x&&(A=k,v=++s.el)}i&&((h=!f&&h)&&g--,a&&w.push(h))}if(g+=y,i&&y!==g){for(p=0;f=e[p];p++)f(w,m,o,l);if(a){if(g>0)for(;y--;)!w[y]&&!m[y]&&(m[y]=I.call(u));m=c(m)}O.apply(u,m),x&&!a&&m.length>0&&g+e.length>1&&n.uniqueSort(u)}return x&&(A=k,D=C),w};return s.el=0,i?U(s):s}function f(t,e,i,r){for(var s=0,a=e.length;a>s;s++)n(t,e[s],i,r);return i}function m(t,e,n,i,r){var s,a,l,u,c,d=o(t);if(d.length,!i&&1===d.length){if(a=d[0]=d[0].slice(0),a.length>2&&"ID"===(l=a[0]).type&&9===e.nodeType&&!r&&b.relative[a[1].type]){if(e=b.find.ID(l.matches[0].replace(ae,""),e,r)[0],!e)return n;t=t.slice(a.shift().length)}for(s=oe.POS.test(t)?-1:a.length-1;s>=0&&(l=a[s],!b.relative[u=l.type]);s--)if((c=b.find[u])&&(i=c(l.matches[0].replace(ae,""),ie.test(a[0].type)&&e.parentNode||e,r))){if(a.splice(s,1),t=i.length&&a.join(""),!t)return O.apply(n,H.call(i,0)),n;break}}return _(t,d)(i,e,r,n,ie.test(t)),n}function g(){}var v,y,b,w,x,C,_,k,T,D,$=!0,j="undefined",S=("sizcache"+Math.random()).replace(".",""),E=String,F=t.document,N=F.documentElement,A=0,M=0,I=[].pop,O=[].push,H=[].slice,P=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},U=function(t,e){return t[S]=null==e||e,t},R=function(){var t={},e=[];return U(function(n,i){return e.push(n)>b.cacheLength&&delete t[e.shift()],t[n]=i},t)},L=R(),B=R(),q=R(),z="[\\x20\\t\\r\\n\\f]",W="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",V=W.replace("w","w#"),Y="([*^$|!~]?=)",X="\\["+z+"*("+W+")"+z+"*(?:"+Y+z+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+V+")|)|)"+z+"*\\]",Q=":("+W+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+X+")|[^:]|\\\\.)*|.*))\\)|)",J=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+z+"*((?:-\\d)?\\d*)"+z+"*\\)|)(?=[^-]|$)",G=RegExp("^"+z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+z+"+$","g"),K=RegExp("^"+z+"*,"+z+"*"),te=RegExp("^"+z+"*([\\x20\\t\\r\\n\\f>+~])"+z+"*"),ee=RegExp(Q),ne=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,ie=/[\x20\t\r\n\f]*[+~]/,re=/h\d/i,se=/input|select|textarea|button/i,ae=/\\(?!\\)/g,oe={ID:RegExp("^#("+W+")"),CLASS:RegExp("^\\.("+W+")"),NAME:RegExp("^\\[name=['\"]?("+W+")['\"]?\\]"),TAG:RegExp("^("+W.replace("w","w*")+")"),ATTR:RegExp("^"+X),PSEUDO:RegExp("^"+Q),POS:RegExp(J,"i"),CHILD:RegExp("^:(only|nth|first|last)-child(?:\\("+z+"*(even|odd|(([+-]|)(\\d*)n|)"+z+"*(?:([+-]|)"+z+"*(\\d+)|))"+z+"*\\)|)","i"),needsContext:RegExp("^"+z+"*[>+~]|"+J,"i")},le=function(t){var e=F.createElement("div");try{return t(e)}catch(n){return!1}finally{e=null}},ue=le(function(t){return t.appendChild(F.createComment("")),!t.getElementsByTagName("*").length}),ce=le(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==j&&"#"===t.firstChild.getAttribute("href")}),de=le(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),he=le(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),pe=le(function(t){t.id=S+0,t.innerHTML="<a name='"+S+"'></a><div name='"+S+"'></div>",N.insertBefore(t,N.firstChild);var e=F.getElementsByName&&F.getElementsByName(S).length===2+F.getElementsByName(S+0).length;return y=!F.getElementById(S),N.removeChild(t),e});try{H.call(N.childNodes,0)[0].nodeType}catch(fe){H=function(t){for(var e,n=[];e=this[t];t++)n.push(e);return n}}n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){return n(e,null,null,[t]).length>0},w=n.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=w(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=w(e);return n},x=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},C=n.contains=N.contains?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!!(i&&1===i.nodeType&&n.contains&&n.contains(i))}:N.compareDocumentPosition?function(t,e){return e&&!!(16&t.compareDocumentPosition(e))}:function(t,e){for(;e=e.parentNode;)if(e===t)return!0;return!1},n.attr=function(t,e){var n,i=x(t);return i||(e=e.toLowerCase()),(n=b.attrHandle[e])?n(t):i||de?t.getAttribute(e):(n=t.getAttributeNode(e),n?"boolean"==typeof t[e]?t[e]?e:null:n.specified?n.value:null:null)},b=n.selectors={cacheLength:50,createPseudo:U,match:oe,attrHandle:ce?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},find:{ID:y?function(t,e,n){if(typeof e.getElementById!==j&&!n){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}}:function(t,n,i){if(typeof n.getElementById!==j&&!i){var r=n.getElementById(t);return r?r.id===t||typeof r.getAttributeNode!==j&&r.getAttributeNode("id").value===t?[r]:e:[]}},TAG:ue?function(t,e){return typeof e.getElementsByTagName!==j?e.getElementsByTagName(t):void 0}:function(t,e){var n=e.getElementsByTagName(t);if("*"===t){for(var i,r=[],s=0;i=n[s];s++)1===i.nodeType&&r.push(i);return r}return n},NAME:pe&&function(t,e){return typeof e.getElementsByName!==j?e.getElementsByName(name):void 0},CLASS:he&&function(t,e,n){return typeof e.getElementsByClassName===j||n?void 0:e.getElementsByClassName(t)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(ae,""),t[3]=(t[4]||t[5]||"").replace(ae,""),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1]?(t[2]||n.error(t[0]),t[3]=+(t[3]?t[4]+(t[5]||1):2*("even"===t[2]||"odd"===t[2])),t[4]=+(t[6]+t[7]||"odd"===t[2])):t[2]&&n.error(t[0]),t},PSEUDO:function(t){var e,n;return oe.CHILD.test(t[0])?null:(t[3]?t[2]=t[3]:(e=t[4])&&(ee.test(e)&&(n=o(e,!0))&&(n=e.indexOf(")",e.length-n)-e.length)&&(e=e.slice(0,n),t[0]=t[0].slice(0,n)),t[2]=e),t.slice(0,3))}},filter:{ID:y?function(t){return t=t.replace(ae,""),function(e){return e.getAttribute("id")===t}}:function(t){return t=t.replace(ae,""),function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}},TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(ae,"").toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=L[S][t];return e||(e=L(t,RegExp("(^|"+z+")"+t+"("+z+"|$)"))),function(t){return e.test(t.className||typeof t.getAttribute!==j&&t.getAttribute("class")||"")}},ATTR:function(t,e,i){return function(r){var s=n.attr(r,t);return null==s?"!="===e:e?(s+="","="===e?s===i:"!="===e?s!==i:"^="===e?i&&0===s.indexOf(i):"*="===e?i&&s.indexOf(i)>-1:"$="===e?i&&s.substr(s.length-i.length)===i:"~="===e?(" "+s+" ").indexOf(i)>-1:"|="===e?s===i||s.substr(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i){return"nth"===t?function(t){var e,r,s=t.parentNode;if(1===n&&0===i)return!0;if(s)for(r=0,e=s.firstChild;e&&(1!==e.nodeType||(r++,t!==e));e=e.nextSibling);return r-=i,r===n||0===r%n&&r/n>=0}:function(e){var n=e;switch(t){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===t)return!0;n=e;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(t,e){var i,r=b.pseudos[t]||b.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return r[S]?r(e):r.length>1?(i=[t,t,"",e],b.setFilters.hasOwnProperty(t.toLowerCase())?U(function(t,n){for(var i,s=r(t,e),a=s.length;a--;)i=P.call(t,s[a]),t[i]=!(n[i]=s[a])}):function(t){return r(t,0,i)}):r}},pseudos:{not:U(function(t){var e=[],n=[],i=_(t.replace(G,"$1"));return i[S]?U(function(t,e,n,r){for(var s,a=i(t,null,r,[]),o=t.length;o--;)(s=a[o])&&(t[o]=!(e[o]=s))}):function(t,r,s){return e[0]=t,i(e,null,s,n),!n.pop()}}),has:U(function(t){return function(e){return n(t,e).length>0}}),contains:U(function(t){return function(e){return(e.textContent||e.innerText||w(e)).indexOf(t)>-1}}),enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},parent:function(t){return!b.pseudos.empty(t)},empty:function(t){var e;for(t=t.firstChild;t;){if(t.nodeName>"@"||3===(e=t.nodeType)||4===e)return!1;t=t.nextSibling}return!0},header:function(t){return re.test(t.nodeName)},text:function(t){var e,n;return"input"===t.nodeName.toLowerCase()&&"text"===(e=t.type)&&(null==(n=t.getAttribute("type"))||n.toLowerCase()===e)},radio:i("radio"),checkbox:i("checkbox"),file:i("file"),password:i("password"),image:i("image"),submit:r("submit"),reset:r("reset"),button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},input:function(t){return se.test(t.nodeName)},focus:function(t){var e=t.ownerDocument;return!(t!==e.activeElement||e.hasFocus&&!e.hasFocus()||!t.type&&!t.href)},active:function(t){return t===t.ownerDocument.activeElement},first:s(function(){return[0]}),last:s(function(t,e){return[e-1]}),eq:s(function(t,e,n){return[0>n?n+e:n]}),even:s(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:s(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:s(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:s(function(t,e,n){for(var i=0>n?n+e:n;e>++i;)t.push(i);return t})}},k=N.compareDocumentPosition?function(t,e){return t===e?(T=!0,0):(t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e):t.compareDocumentPosition)?-1:1}:function(t,e){if(t===e)return T=!0,0;if(t.sourceIndex&&e.sourceIndex)return t.sourceIndex-e.sourceIndex;var n,i,r=[],s=[],o=t.parentNode,l=e.parentNode,u=o;if(o===l)return a(t,e);if(!o)return-1;if(!l)return 1;for(;u;)r.unshift(u),u=u.parentNode;for(u=l;u;)s.unshift(u),u=u.parentNode;n=r.length,i=s.length;for(var c=0;n>c&&i>c;c++)if(r[c]!==s[c])return a(r[c],s[c]);return c===n?a(t,s[c],-1):a(r[c],e,1)},[0,0].sort(k),$=!T,n.uniqueSort=function(t){var e,n=1;if(T=$,t.sort(k),T)for(;e=t[n];n++)e===t[n-1]&&t.splice(n--,1);return t},n.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},_=n.compile=function(t,e){var n,i=[],r=[],s=q[S][t];if(!s){for(e||(e=o(t)),n=e.length;n--;)s=h(e[n]),s[S]?i.push(s):r.push(s);s=q(t,p(r,i))}return s},F.querySelectorAll&&function(){var t,e=m,i=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,s=[":focus"],a=[":active",":focus"],l=N.matchesSelector||N.mozMatchesSelector||N.webkitMatchesSelector||N.oMatchesSelector||N.msMatchesSelector;le(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||s.push("\\["+z+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||s.push(":checked")}),le(function(t){t.innerHTML="<p test=''></p>",t.querySelectorAll("[test^='']").length&&s.push("[*^$]="+z+"*(?:\"\"|'')"),t.innerHTML="<input type='hidden'/>",t.querySelectorAll(":enabled").length||s.push(":enabled",":disabled")}),s=RegExp(s.join("|")),m=function(t,n,r,a,l){if(!(a||l||s&&s.test(t))){var u,c,d=!0,h=S,p=n,f=9===n.nodeType&&t;if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){for(u=o(t),(d=n.getAttribute("id"))?h=d.replace(i,"\\$&"):n.setAttribute("id",h),h="[id='"+h+"'] ",c=u.length;c--;)u[c]=h+u[c].join("");p=ie.test(t)&&n.parentNode||n,f=u.join(",")}if(f)try{return O.apply(r,H.call(p.querySelectorAll(f),0)),r}catch(m){}finally{d||n.removeAttribute("id")}}return e(t,n,r,a,l)},l&&(le(function(e){t=l.call(e,"div");try{l.call(e,"[test!='']:sizzle"),a.push("!=",Q)}catch(n){}}),a=RegExp(a.join("|")),n.matchesSelector=function(e,i){if(i=i.replace(r,"='$1']"),!(x(e)||a.test(i)||s&&s.test(i)))try{var o=l.call(e,i);if(o||t||e.document&&11!==e.document.nodeType)return o}catch(u){}return n(i,null,null,[e]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=g.prototype=b.pseudos,b.setFilters=new g,n.attr=Z.attr,Z.find=n,Z.expr=n.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=n.uniqueSort,Z.text=n.getText,Z.isXMLDoc=n.isXML,Z.contains=n.contains}(t);var Me=/Until$/,Ie=/^(?:parents|prev(?:Until|All))/,Oe=/^.[^:#\[\.,]*$/,He=Z.expr.match.needsContext,Pe={children:!0,contents:!0,next:!0,prev:!0};Z.fn.extend({find:function(t){var e,n,i,r,s,a,o=this;if("string"!=typeof t)return Z(t).filter(function(){for(e=0,n=o.length;n>e;e++)if(Z.contains(o[e],this))return!0});for(a=this.pushStack("","find",t),e=0,n=this.length;n>e;e++)if(i=a.length,Z.find(t,this[e],a),e>0)for(r=i;a.length>r;r++)for(s=0;i>s;s++)if(a[s]===a[r]){a.splice(r--,1);break}return a},has:function(t){var e,n=Z(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(Z.contains(this,n[e]))return!0})},not:function(t){return this.pushStack(u(this,t,!1),"not",t)},filter:function(t){return this.pushStack(u(this,t,!0),"filter",t)},is:function(t){return!!t&&("string"==typeof t?He.test(t)?Z(t,this.context).index(this[0])>=0:Z.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var n,i=0,r=this.length,s=[],a=He.test(t)||"string"!=typeof t?Z(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==e&&11!==n.nodeType;){if(a?a.index(n)>-1:Z.find.matchesSelector(n,t)){s.push(n);break}n=n.parentNode}return s=s.length>1?Z.unique(s):s,this.pushStack(s,"closest",t)},index:function(t){return t?"string"==typeof t?Z.inArray(this[0],Z(t)):Z.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(t,e){var n="string"==typeof t?Z(t,e):Z.makeArray(t&&t.nodeType?[t]:t),i=Z.merge(this.get(),n);return this.pushStack(o(n[0])||o(i[0])?i:Z.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Z.fn.andSelf=Z.fn.addBack,Z.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Z.dir(t,"parentNode")},parentsUntil:function(t,e,n){return Z.dir(t,"parentNode",n)},next:function(t){return l(t,"nextSibling")},prev:function(t){return l(t,"previousSibling")},nextAll:function(t){return Z.dir(t,"nextSibling")},prevAll:function(t){return Z.dir(t,"previousSibling")},nextUntil:function(t,e,n){return Z.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return Z.dir(t,"previousSibling",n)},siblings:function(t){return Z.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Z.sibling(t.firstChild)},contents:function(t){return Z.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:Z.merge([],t.childNodes)}},function(t,e){Z.fn[t]=function(n,i){var r=Z.map(this,e,n);return Me.test(t)||(i=n),i&&"string"==typeof i&&(r=Z.filter(i,r)),r=this.length>1&&!Pe[t]?Z.unique(r):r,this.length>1&&Ie.test(t)&&(r=r.reverse()),this.pushStack(r,t,Y.call(arguments).join(","))}}),Z.extend({filter:function(t,e,n){return n&&(t=":not("+t+")"),1===e.length?Z.find.matchesSelector(e[0],t)?[e[0]]:[]:Z.find.matches(t,e)},dir:function(t,n,i){for(var r=[],s=t[n];s&&9!==s.nodeType&&(i===e||1!==s.nodeType||!Z(s).is(i));)1===s.nodeType&&r.push(s),s=s[n];return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Ue="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Re=/ jQuery\d+="(?:null|\d+)"/g,Le=/^\s+/,Be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qe=/<([\w:]+)/,ze=/<tbody/i,We=/<|&#?\w+;/,Ve=/<(?:script|style|link)/i,Ye=/<(?:script|object|embed|option|style)/i,Xe=RegExp("<(?:"+Ue+")[\\s/>]","i"),Qe=/^(?:checkbox|radio)$/,Je=/checked\s*(?:[^=]|=\s*.checked.)/i,Ge=/\/(java|ecma)script/i,Ze=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Ke={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},tn=c(L),en=tn.appendChild(L.createElement("div"));
Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td,Z.support.htmlSerialize||(Ke._default=[1,"X<div>","</div>"]),Z.fn.extend({text:function(t){return Z.access(this,function(t){return t===e?Z.text(this):this.empty().append((this[0]&&this[0].ownerDocument||L).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if(Z.isFunction(t))return this.each(function(e){Z(this).wrapAll(t.call(this,e))});if(this[0]){var e=Z(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return Z.isFunction(t)?this.each(function(e){Z(this).wrapInner(t.call(this,e))}):this.each(function(){var e=Z(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=Z.isFunction(t);return this.each(function(n){Z(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType)&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(t,this.firstChild)})},before:function(){if(!o(this[0]))return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this)});if(arguments.length){var t=Z.clean(arguments);return this.pushStack(Z.merge(t,this),"before",this.selector)}},after:function(){if(!o(this[0]))return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this.nextSibling)});if(arguments.length){var t=Z.clean(arguments);return this.pushStack(Z.merge(this,t),"after",this.selector)}},remove:function(t,e){for(var n,i=0;null!=(n=this[i]);i++)(!t||Z.filter(t,[n]).length)&&(!e&&1===n.nodeType&&(Z.cleanData(n.getElementsByTagName("*")),Z.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)for(1===t.nodeType&&Z.cleanData(t.getElementsByTagName("*"));t.firstChild;)t.removeChild(t.firstChild);return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Z.clone(this,t,e)})},html:function(t){return Z.access(this,function(t){var n=this[0]||{},i=0,r=this.length;if(t===e)return 1===n.nodeType?n.innerHTML.replace(Re,""):e;if(!("string"!=typeof t||Ve.test(t)||!Z.support.htmlSerialize&&Xe.test(t)||!Z.support.leadingWhitespace&&Le.test(t)||Ke[(qe.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Be,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(Z.cleanData(n.getElementsByTagName("*")),n.innerHTML=t);n=0}catch(s){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){return o(this[0])?this.length?this.pushStack(Z(Z.isFunction(t)?t():t),"replaceWith",t):this:Z.isFunction(t)?this.each(function(e){var n=Z(this),i=n.html();n.replaceWith(t.call(this,e,i))}):("string"!=typeof t&&(t=Z(t).detach()),this.each(function(){var e=this.nextSibling,n=this.parentNode;Z(this).remove(),e?Z(e).before(t):Z(n).append(t)}))},detach:function(t){return this.remove(t,!0)},domManip:function(t,n,i){t=[].concat.apply([],t);var r,s,a,o,l=0,u=t[0],c=[],h=this.length;if(!Z.support.checkClone&&h>1&&"string"==typeof u&&Je.test(u))return this.each(function(){Z(this).domManip(t,n,i)});if(Z.isFunction(u))return this.each(function(r){var s=Z(this);t[0]=u.call(this,r,n?s.html():e),s.domManip(t,n,i)});if(this[0]){if(r=Z.buildFragment(t,this,c),a=r.fragment,s=a.firstChild,1===a.childNodes.length&&(a=s),s)for(n=n&&Z.nodeName(s,"tr"),o=r.cacheable||h-1;h>l;l++)i.call(n&&Z.nodeName(this[l],"table")?d(this[l],"tbody"):this[l],l===o?a:Z.clone(a,!0,!0));a=s=null,c.length&&Z.each(c,function(t,e){e.src?Z.ajax?Z.ajax({url:e.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):Z.error("no ajax"):Z.globalEval((e.text||e.textContent||e.innerHTML||"").replace(Ze,"")),e.parentNode&&e.parentNode.removeChild(e)})}return this}}),Z.buildFragment=function(t,n,i){var r,s,a,o=t[0];return n=n||L,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,1===t.length&&"string"==typeof o&&512>o.length&&n===L&&"<"===o.charAt(0)&&!Ye.test(o)&&(Z.support.checkClone||!Je.test(o))&&(Z.support.html5Clone||!Xe.test(o))&&(s=!0,r=Z.fragments[o],a=r!==e),r||(r=n.createDocumentFragment(),Z.clean(t,n,r,i),s&&(Z.fragments[o]=a&&r)),{fragment:r,cacheable:s}},Z.fragments={},Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Z.fn[t]=function(n){var i,r=0,s=[],a=Z(n),o=a.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===o)return a[e](this[0]),this;for(;o>r;r++)i=(r>0?this.clone(!0):this).get(),Z(a[r])[e](i),s=s.concat(i);return this.pushStack(s,t,a.selector)}}),Z.extend({clone:function(t,e,n){var i,r,s,a;if(Z.support.html5Clone||Z.isXMLDoc(t)||!Xe.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(en.innerHTML=t.outerHTML,en.removeChild(a=en.firstChild)),!(Z.support.noCloneEvent&&Z.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Z.isXMLDoc(t)))for(p(t,a),i=f(t),r=f(a),s=0;i[s];++s)r[s]&&p(i[s],r[s]);if(e&&(h(t,a),n))for(i=f(t),r=f(a),s=0;i[s];++s)h(i[s],r[s]);return i=r=null,a},clean:function(t,e,n,i){var r,s,a,o,l,u,d,h,p,f,g,v=e===L&&tn,y=[];for(e&&void 0!==e.createDocumentFragment||(e=L),r=0;null!=(a=t[r]);r++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(We.test(a)){for(v=v||c(e),d=e.createElement("div"),v.appendChild(d),a=a.replace(Be,"<$1></$2>"),o=(qe.exec(a)||["",""])[1].toLowerCase(),l=Ke[o]||Ke._default,u=l[0],d.innerHTML=l[1]+a+l[2];u--;)d=d.lastChild;if(!Z.support.tbody)for(h=ze.test(a),p="table"!==o||h?"<table>"!==l[1]||h?[]:d.childNodes:d.firstChild&&d.firstChild.childNodes,s=p.length-1;s>=0;--s)Z.nodeName(p[s],"tbody")&&!p[s].childNodes.length&&p[s].parentNode.removeChild(p[s]);!Z.support.leadingWhitespace&&Le.test(a)&&d.insertBefore(e.createTextNode(Le.exec(a)[0]),d.firstChild),a=d.childNodes,d.parentNode.removeChild(d)}else a=e.createTextNode(a);a.nodeType?y.push(a):Z.merge(y,a)}if(d&&(a=d=v=null),!Z.support.appendChecked)for(r=0;null!=(a=y[r]);r++)Z.nodeName(a,"input")?m(a):a.getElementsByTagName!==void 0&&Z.grep(a.getElementsByTagName("input"),m);if(n)for(f=function(t){return!t.type||Ge.test(t.type)?i?i.push(t.parentNode?t.parentNode.removeChild(t):t):n.appendChild(t):void 0},r=0;null!=(a=y[r]);r++)Z.nodeName(a,"script")&&f(a)||(n.appendChild(a),a.getElementsByTagName!==void 0&&(g=Z.grep(Z.merge([],a.getElementsByTagName("script")),f),y.splice.apply(y,[r+1,0].concat(g)),r+=g.length));return y},cleanData:function(t,e){for(var n,i,r,s,a=0,o=Z.expando,l=Z.cache,u=Z.support.deleteExpando,c=Z.event.special;null!=(r=t[a]);a++)if((e||Z.acceptData(r))&&(i=r[o],n=i&&l[i])){if(n.events)for(s in n.events)c[s]?Z.event.remove(r,s):Z.removeEvent(r,s,n.handle);l[i]&&(delete l[i],u?delete r[o]:r.removeAttribute?r.removeAttribute(o):r[o]=null,Z.deletedIds.push(i))}}}),function(){var t,e;Z.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||0>t.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},t=Z.uaMatch(q.userAgent),e={},t.browser&&(e[t.browser]=!0,e.version=t.version),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0),Z.browser=e,Z.sub=function(){function t(e,n){return new t.fn.init(e,n)}Z.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(n,i){return i&&i instanceof Z&&!(i instanceof t)&&(i=t(i)),Z.fn.init.call(this,n,i,e)},t.fn.init.prototype=t.fn;var e=t(L);return t}}();var nn,rn,sn,an=/alpha\([^)]*\)/i,on=/opacity=([^)]*)/,ln=/^(top|right|bottom|left)$/,un=/^(none|table(?!-c[ea]).+)/,cn=/^margin/,dn=RegExp("^("+K+")(.*)$","i"),hn=RegExp("^("+K+")(?!px)[a-z%]+$","i"),pn=RegExp("^([-+])=("+K+")","i"),fn={},mn={position:"absolute",visibility:"hidden",display:"block"},gn={letterSpacing:0,fontWeight:400},vn=["Top","Right","Bottom","Left"],yn=["Webkit","O","Moz","ms"],bn=Z.fn.toggle;Z.fn.extend({css:function(t,n){return Z.access(this,function(t,n,i){return i!==e?Z.style(t,n,i):Z.css(t,n)},t,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(t,e){var n="boolean"==typeof t;return Z.isFunction(t)&&Z.isFunction(e)?bn.apply(this,arguments):this.each(function(){(n?t:v(this))?Z(this).show():Z(this).hide()})}}),Z.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=nn(t,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Z.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,n,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,a,o,l=Z.camelCase(n),u=t.style;if(n=Z.cssProps[l]||(Z.cssProps[l]=g(u,l)),o=Z.cssHooks[n]||Z.cssHooks[l],i===e)return o&&"get"in o&&(s=o.get(t,!1,r))!==e?s:u[n];if(a=typeof i,"string"===a&&(s=pn.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(Z.css(t,n)),a="number"),!(null==i||"number"===a&&isNaN(i)||("number"===a&&!Z.cssNumber[l]&&(i+="px"),o&&"set"in o&&(i=o.set(t,i,r))===e)))try{u[n]=i}catch(c){}}},css:function(t,n,i,r){var s,a,o,l=Z.camelCase(n);return n=Z.cssProps[l]||(Z.cssProps[l]=g(t.style,l)),o=Z.cssHooks[n]||Z.cssHooks[l],o&&"get"in o&&(s=o.get(t,!0,r)),s===e&&(s=nn(t,n)),"normal"===s&&n in gn&&(s=gn[n]),i||r!==e?(a=parseFloat(s),i||Z.isNumeric(a)?a||0:s):s},swap:function(t,e,n){var i,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];i=n.call(t);for(r in e)t.style[r]=s[r];return i}}),t.getComputedStyle?nn=function(e,n){var i,r,s,a,o=t.getComputedStyle(e,null),l=e.style;return o&&(i=o[n],""===i&&!Z.contains(e.ownerDocument,e)&&(i=Z.style(e,n)),hn.test(i)&&cn.test(n)&&(r=l.width,s=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=i,i=o.width,l.width=r,l.minWidth=s,l.maxWidth=a)),i}:L.documentElement.currentStyle&&(nn=function(t,e){var n,i,r=t.currentStyle&&t.currentStyle[e],s=t.style;return null==r&&s&&s[e]&&(r=s[e]),hn.test(r)&&!ln.test(e)&&(n=s.left,i=t.runtimeStyle&&t.runtimeStyle.left,i&&(t.runtimeStyle.left=t.currentStyle.left),s.left="fontSize"===e?"1em":r,r=s.pixelLeft+"px",s.left=n,i&&(t.runtimeStyle.left=i)),""===r?"auto":r}),Z.each(["height","width"],function(t,e){Z.cssHooks[e]={get:function(t,n,i){return n?0===t.offsetWidth&&un.test(nn(t,"display"))?Z.swap(t,mn,function(){return x(t,e,i)}):x(t,e,i):void 0},set:function(t,n,i){return b(t,n,i?w(t,e,i,Z.support.boxSizing&&"border-box"===Z.css(t,"boxSizing")):0)}}}),Z.support.opacity||(Z.cssHooks.opacity={get:function(t,e){return on.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=Z.isNumeric(e)?"alpha(opacity="+100*e+")":"",s=i&&i.filter||n.filter||"";n.zoom=1,e>=1&&""===Z.trim(s.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=an.test(s)?s.replace(an,r):s+" "+r)}}),Z(function(){Z.support.reliableMarginRight||(Z.cssHooks.marginRight={get:function(t,e){return Z.swap(t,{display:"inline-block"},function(){return e?nn(t,"marginRight"):void 0})}}),!Z.support.pixelPosition&&Z.fn.position&&Z.each(["top","left"],function(t,e){Z.cssHooks[e]={get:function(t,n){if(n){var i=nn(t,e);return hn.test(i)?Z(t).position()[e]+"px":i}}}})}),Z.expr&&Z.expr.filters&&(Z.expr.filters.hidden=function(t){return 0===t.offsetWidth&&0===t.offsetHeight||!Z.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||nn(t,"display"))},Z.expr.filters.visible=function(t){return!Z.expr.filters.hidden(t)}),Z.each({margin:"",padding:"",border:"Width"},function(t,e){Z.cssHooks[t+e]={expand:function(n){var i,r="string"==typeof n?n.split(" "):[n],s={};for(i=0;4>i;i++)s[t+vn[i]+e]=r[i]||r[i-2]||r[0];return s}},cn.test(t)||(Z.cssHooks[t+e].set=b)});var wn=/%20/g,xn=/\[\]$/,Cn=/\r?\n/g,_n=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,kn=/^(?:select|textarea)/i;Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Z.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||kn.test(this.nodeName)||_n.test(this.type))}).map(function(t,e){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(t){return{name:e.name,value:t.replace(Cn,"\r\n")}}):{name:e.name,value:n.replace(Cn,"\r\n")}}).get()}}),Z.param=function(t,n){var i,r=[],s=function(t,e){e=Z.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(t)||t.jquery&&!Z.isPlainObject(t))Z.each(t,function(){s(this.name,this.value)});else for(i in t)_(i,t[i],n,s);return r.join("&").replace(wn,"+")};var Tn,Dn,$n=/#.*$/,jn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Sn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,En=/^(?:GET|HEAD)$/,Fn=/^\/\//,Nn=/\?/,An=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Mn=/([?&])_=[^&]*/,In=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,On=Z.fn.load,Hn={},Pn={},Un=["*/"]+["*"];try{Dn=B.href}catch(Rn){Dn=L.createElement("a"),Dn.href="",Dn=Dn.href}Tn=In.exec(Dn.toLowerCase())||[],Z.fn.load=function(t,n,i){if("string"!=typeof t&&On)return On.apply(this,arguments);if(!this.length)return this;var r,s,a,o=this,l=t.indexOf(" ");return l>=0&&(r=t.slice(l,t.length),t=t.slice(0,l)),Z.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(s="POST"),Z.ajax({url:t,type:s,dataType:"html",data:n,complete:function(t,e){i&&o.each(i,a||[t.responseText,e,t])}}).done(function(t){a=arguments,o.html(r?Z("<div>").append(t.replace(An,"")).find(r):t)}),this},Z.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,e){Z.fn[e]=function(t){return this.on(e,t)}}),Z.each(["get","post"],function(t,n){Z[n]=function(t,i,r,s){return Z.isFunction(i)&&(s=s||r,r=i,i=e),Z.ajax({type:n,url:t,data:i,success:r,dataType:s})}}),Z.extend({getScript:function(t,n){return Z.get(t,e,n,"script")},getJSON:function(t,e,n){return Z.get(t,e,n,"json")},ajaxSetup:function(t,e){return e?D(t,Z.ajaxSettings):(e=t,t=Z.ajaxSettings),D(t,e),t},ajaxSettings:{url:Dn,isLocal:Sn.test(Tn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Un},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:k(Hn),ajaxTransport:k(Pn),ajax:function(t,n){function i(t,n,i,a){var u,d,y,b,x,_=n;2!==w&&(w=2,l&&clearTimeout(l),o=e,s=a||"",C.readyState=t>0?4:0,i&&(b=$(h,C,i)),t>=200&&300>t||304===t?(h.ifModified&&(x=C.getResponseHeader("Last-Modified"),x&&(Z.lastModified[r]=x),x=C.getResponseHeader("Etag"),x&&(Z.etag[r]=x)),304===t?(_="notmodified",u=!0):(u=j(h,b),_=u.state,d=u.data,y=u.error,u=!y)):(y=_,(!_||t)&&(_="error",0>t&&(t=0))),C.status=t,C.statusText=(n||_)+"",u?m.resolveWith(p,[d,_,C]):m.rejectWith(p,[C,_,y]),C.statusCode(v),v=e,c&&f.trigger("ajax"+(u?"Success":"Error"),[C,h,u?d:y]),g.fireWith(p,[C,_]),c&&(f.trigger("ajaxComplete",[C,h]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var r,s,a,o,l,u,c,d,h=Z.ajaxSetup({},n),p=h.context||h,f=p!==h&&(p.nodeType||p instanceof Z)?Z(p):Z.event,m=Z.Deferred(),g=Z.Callbacks("once memory"),v=h.statusCode||{},y={},b={},w=0,x="canceled",C={readyState:0,setRequestHeader:function(t,e){if(!w){var n=t.toLowerCase();t=b[n]=b[n]||t,y[t]=e}return this},getAllResponseHeaders:function(){return 2===w?s:null},getResponseHeader:function(t){var n;if(2===w){if(!a)for(a={};n=jn.exec(s);)a[n[1].toLowerCase()]=n[2];n=a[t.toLowerCase()]}return n===e?null:n},overrideMimeType:function(t){return w||(h.mimeType=t),this},abort:function(t){return t=t||x,o&&o.abort(t),i(0,t),this}};if(m.promise(C),C.success=C.done,C.error=C.fail,C.complete=g.add,C.statusCode=function(t){if(t){var e;if(2>w)for(e in t)v[e]=[v[e],t[e]];else e=t[C.status],C.always(e)}return this},h.url=((t||h.url)+"").replace($n,"").replace(Fn,Tn[1]+"//"),h.dataTypes=Z.trim(h.dataType||"*").toLowerCase().split(ee),null==h.crossDomain&&(u=In.exec(h.url.toLowerCase())||!1,h.crossDomain=u&&u.join(":")+(u[3]?"":"http:"===u[1]?80:443)!==Tn.join(":")+(Tn[3]?"":"http:"===Tn[1]?80:443)),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Z.param(h.data,h.traditional)),T(Hn,h,n,C),2===w)return C;if(c=h.global,h.type=h.type.toUpperCase(),h.hasContent=!En.test(h.type),c&&0===Z.active++&&Z.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(Nn.test(h.url)?"&":"?")+h.data,delete h.data),r=h.url,h.cache===!1)){var _=Z.now(),k=h.url.replace(Mn,"$1_="+_);h.url=k+(k===h.url?(Nn.test(h.url)?"&":"?")+"_="+_:"")}(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(r=r||h.url,Z.lastModified[r]&&C.setRequestHeader("If-Modified-Since",Z.lastModified[r]),Z.etag[r]&&C.setRequestHeader("If-None-Match",Z.etag[r])),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Un+"; q=0.01":""):h.accepts["*"]);for(d in h.headers)C.setRequestHeader(d,h.headers[d]);if(!h.beforeSend||h.beforeSend.call(p,C,h)!==!1&&2!==w){x="abort";for(d in{success:1,error:1,complete:1})C[d](h[d]);if(o=T(Pn,h,n,C)){C.readyState=1,c&&f.trigger("ajaxSend",[C,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){C.abort("timeout")},h.timeout));try{w=1,o.send(y,i)}catch(D){if(!(2>w))throw D;i(-1,D)}}else i(-1,"No Transport");return C}return C.abort()},active:0,lastModified:{},etag:{}});var Ln=[],Bn=/\?/,qn=/(=)\?(?=&|$)|\?\?/,zn=Z.now();Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ln.pop()||Z.expando+"_"+zn++;return this[t]=!0,t}}),Z.ajaxPrefilter("json jsonp",function(n,i,r){var s,a,o,l=n.data,u=n.url,c=n.jsonp!==!1,d=c&&qn.test(u),h=c&&!d&&"string"==typeof l&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&qn.test(l);return"jsonp"===n.dataTypes[0]||d||h?(s=n.jsonpCallback=Z.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a=t[s],d?n.url=u.replace(qn,"$1"+s):h?n.data=l.replace(qn,"$1"+s):c&&(n.url+=(Bn.test(u)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return o||Z.error(s+" was not called"),o[0]},n.dataTypes[0]="json",t[s]=function(){o=arguments},r.always(function(){t[s]=a,n[s]&&(n.jsonpCallback=i.jsonpCallback,Ln.push(s)),o&&Z.isFunction(a)&&a(o[0]),o=a=e}),"script"):void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(t){return Z.globalEval(t),t}}}),Z.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),Z.ajaxTransport("script",function(t){if(t.crossDomain){var n,i=L.head||L.getElementsByTagName("head")[0]||L.documentElement;return{send:function(r,s){n=L.createElement("script"),n.async="async",t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(t,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=e,r||s(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Wn,Vn=t.ActiveXObject?function(){for(var t in Wn)Wn[t](0,1)}:!1,Yn=0;Z.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&S()||E()}:S,function(t){Z.extend(Z.support,{ajax:!!t,cors:!!t&&"withCredentials"in t})}(Z.ajaxSettings.xhr()),Z.support.ajax&&Z.ajaxTransport(function(n){if(!n.crossDomain||Z.support.cors){var i;return{send:function(r,s){var a,o,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(o in n.xhrFields)l[o]=n.xhrFields[o];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),!n.crossDomain&&!r["X-Requested-With"]&&(r["X-Requested-With"]="XMLHttpRequest");try{for(o in r)l.setRequestHeader(o,r[o])}catch(u){}l.send(n.hasContent&&n.data||null),i=function(t,r){var o,u,c,d,h;try{if(i&&(r||4===l.readyState))if(i=e,a&&(l.onreadystatechange=Z.noop,Vn&&delete Wn[a]),r)4!==l.readyState&&l.abort();else{o=l.status,c=l.getAllResponseHeaders(),d={},h=l.responseXML,h&&h.documentElement&&(d.xml=h);try{d.text=l.responseText}catch(t){}try{u=l.statusText}catch(p){u=""}o||!n.isLocal||n.crossDomain?1223===o&&(o=204):o=d.text?200:404}}catch(f){r||s(-1,f)}d&&s(o,u,d,c)},n.async?4===l.readyState?setTimeout(i,0):(a=++Yn,Vn&&(Wn||(Wn={},Z(t).unload(Vn)),Wn[a]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var Xn,Qn,Jn=/^(?:toggle|show|hide)$/,Gn=RegExp("^(?:([-+])=|)("+K+")([a-z%]*)$","i"),Zn=/queueHooks$/,Kn=[I],ti={"*":[function(t,e){var n,i,r=this.createTween(t,e),s=Gn.exec(e),a=r.cur(),o=+a||0,l=1,u=20;if(s){if(n=+s[2],i=s[3]||(Z.cssNumber[t]?"":"px"),"px"!==i&&o){o=Z.css(r.elem,t,!0)||n||1;do l=l||".5",o/=l,Z.style(r.elem,t,o+i);while(l!==(l=r.cur()/a)&&1!==l&&--u)}r.unit=i,r.start=o,r.end=s[1]?o+(s[1]+1)*n:n}return r}]};Z.Animation=Z.extend(A,{tweener:function(t,e){Z.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],ti[n]=ti[n]||[],ti[n].unshift(e)},prefilter:function(t,e){e?Kn.unshift(t):Kn.push(t)}}),Z.Tween=O,O.prototype={constructor:O,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(Z.cssNumber[n]?"":"px")},cur:function(){var t=O.propHooks[this.prop];return t&&t.get?t.get(this):O.propHooks._default.get(this)},run:function(t){var e,n=O.propHooks[this.prop];return this.pos=e=this.options.duration?Z.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Z.css(t.elem,t.prop,!1,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Z.fx.step[t.prop]?Z.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Z.cssProps[t.prop]]||Z.cssHooks[t.prop])?Z.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Z.each(["toggle","show","hide"],function(t,e){var n=Z.fn[e];Z.fn[e]=function(i,r,s){return null==i||"boolean"==typeof i||!t&&Z.isFunction(i)&&Z.isFunction(r)?n.apply(this,arguments):this.animate(H(e,!0),i,r,s)}}),Z.fn.extend({fadeTo:function(t,e,n,i){return this.filter(v).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=Z.isEmptyObject(t),s=Z.speed(e,n,i),a=function(){var e=A(this,Z.extend({},t),s);r&&e.stop(!0)};return r||s.queue===!1?this.each(a):this.queue(s.queue,a)},stop:function(t,n,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",s=Z.timers,a=Z._data(this);if(n)a[n]&&a[n].stop&&r(a[n]);else for(n in a)a[n]&&a[n].stop&&Zn.test(n)&&r(a[n]);for(n=s.length;n--;)s[n].elem===this&&(null==t||s[n].queue===t)&&(s[n].anim.stop(i),e=!1,s.splice(n,1));(e||!i)&&Z.dequeue(this,t)})}}),Z.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Z.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),Z.speed=function(t,e,n){var i=t&&"object"==typeof t?Z.extend({},t):{complete:n||!n&&e||Z.isFunction(t)&&t,duration:t,easing:n&&e||e&&!Z.isFunction(e)&&e};return i.duration=Z.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Z.fx.speeds?Z.fx.speeds[i.duration]:Z.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Z.isFunction(i.old)&&i.old.call(this),i.queue&&Z.dequeue(this,i.queue)},i},Z.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Z.timers=[],Z.fx=O.prototype.init,Z.fx.tick=function(){for(var t,e=Z.timers,n=0;e.length>n;n++)t=e[n],!t()&&e[n]===t&&e.splice(n--,1);e.length||Z.fx.stop()},Z.fx.timer=function(t){t()&&Z.timers.push(t)&&!Qn&&(Qn=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.interval=13,Z.fx.stop=function(){clearInterval(Qn),Qn=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fx.step={},Z.expr&&Z.expr.filters&&(Z.expr.filters.animated=function(t){return Z.grep(Z.timers,function(e){return t===e.elem}).length});var ei=/^(?:body|html)$/i;Z.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){Z.offset.setOffset(this,t,e)});var n,i,r,s,a,o,l,u={top:0,left:0},c=this[0],d=c&&c.ownerDocument;if(d)return(i=d.body)===c?Z.offset.bodyOffset(c):(n=d.documentElement,Z.contains(n,c)?(c.getBoundingClientRect!==void 0&&(u=c.getBoundingClientRect()),r=P(d),s=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,o=r.pageYOffset||n.scrollTop,l=r.pageXOffset||n.scrollLeft,{top:u.top+o-s,left:u.left+l-a}):u)},Z.offset={bodyOffset:function(t){var e=t.offsetTop,n=t.offsetLeft;return Z.support.doesNotIncludeMarginInBodyOffset&&(e+=parseFloat(Z.css(t,"marginTop"))||0,n+=parseFloat(Z.css(t,"marginLeft"))||0),{top:e,left:n}},setOffset:function(t,e,n){var i=Z.css(t,"position");"static"===i&&(t.style.position="relative");var r,s,a=Z(t),o=a.offset(),l=Z.css(t,"top"),u=Z.css(t,"left"),c=("absolute"===i||"fixed"===i)&&Z.inArray("auto",[l,u])>-1,d={},h={};c?(h=a.position(),r=h.top,s=h.left):(r=parseFloat(l)||0,s=parseFloat(u)||0),Z.isFunction(e)&&(e=e.call(t,n,o)),null!=e.top&&(d.top=e.top-o.top+r),null!=e.left&&(d.left=e.left-o.left+s),"using"in e?e.using.call(t,d):a.css(d)}},Z.fn.extend({position:function(){if(this[0]){var t=this[0],e=this.offsetParent(),n=this.offset(),i=ei.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(Z.css(t,"marginTop"))||0,n.left-=parseFloat(Z.css(t,"marginLeft"))||0,i.top+=parseFloat(Z.css(e[0],"borderTopWidth"))||0,i.left+=parseFloat(Z.css(e[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||L.body;t&&!ei.test(t.nodeName)&&"static"===Z.css(t,"position");)t=t.offsetParent;return t||L.body})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i=/Y/.test(n);Z.fn[t]=function(r){return Z.access(this,function(t,r,s){var a=P(t);return s===e?a?n in a?a[n]:a.document.documentElement[r]:t[r]:(a?a.scrollTo(i?Z(a).scrollLeft():s,i?s:Z(a).scrollTop()):t[r]=s,void 0)},t,r,arguments.length,null)}}),Z.each({Height:"height",Width:"width"},function(t,n){Z.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,r){Z.fn[r]=function(r,s){var a=arguments.length&&(i||"boolean"!=typeof r),o=i||(r===!0||s===!0?"margin":"border");return Z.access(this,function(n,i,r){var s;return Z.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+t],s["scroll"+t],n.body["offset"+t],s["offset"+t],s["client"+t])):r===e?Z.css(n,i,r,o):Z.style(n,i,r,o)},n,a?r:e,a,null)}})}),t.jQuery=t.$=Z,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Z})})(window),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,s=Function.prototype,a=i.push,o=i.slice,l=i.concat,u=(i.unshift,r.toString),c=r.hasOwnProperty,d=i.forEach,h=i.map,p=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,x=Object.keys,C=s.bind,_=function(t){return t instanceof _?t:this instanceof _?(this._wrapped=t,void 0):new _(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):t._=_,_.VERSION="1.4.1";var k=_.each=_.forEach=function(t,e,i){if(d&&t.forEach===d)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var a in t)if(_.has(t,a)&&e.call(i,t[a],a,t)===n)return};_.map=_.collect=function(t,e,n){var i=[];return h&&t.map===h?t.map(e,n):(k(t,function(t,r,s){i[i.length]=e.call(n,t,r,s)}),i)},_.reduce=_.foldl=_.inject=function(t,e,n,i){var r=arguments.length>2;if(p&&t.reduce===p)return i&&(e=_.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(k(t,function(t,s,a){r?n=e.call(i,n,t,s,a):(n=t,r=!0)}),!r)throw new TypeError("Reduce of empty array with no initial value");return n},_.reduceRight=_.foldr=function(t,e,n,i){var r=arguments.length>2;if(f&&t.reduceRight===f)return i&&(e=_.bind(e,i)),arguments.length>2?t.reduceRight(e,n):t.reduceRight(e);var s=t.length;if(s!==+s){var a=_.keys(t);s=a.length}if(k(t,function(o,l,u){l=a?a[--s]:--s,r?n=e.call(i,n,t[l],l,u):(n=t[l],r=!0)}),!r)throw new TypeError("Reduce of empty array with no initial value");return n},_.find=_.detect=function(t,e,n){var i;return T(t,function(t,r,s){return e.call(n,t,r,s)?(i=t,!0):void 0}),i},_.filter=_.select=function(t,e,n){var i=[];return m&&t.filter===m?t.filter(e,n):(k(t,function(t,r,s){e.call(n,t,r,s)&&(i[i.length]=t)}),i)},_.reject=function(t,e,n){var i=[];return k(t,function(t,r,s){e.call(n,t,r,s)||(i[i.length]=t)}),i},_.every=_.all=function(t,e,i){e||(e=_.identity);var r=!0;return g&&t.every===g?t.every(e,i):(k(t,function(t,s,a){return(r=r&&e.call(i,t,s,a))?void 0:n}),!!r)};var T=_.some=_.any=function(t,e,i){e||(e=_.identity);var r=!1;return v&&t.some===v?t.some(e,i):(k(t,function(t,s,a){return r||(r=e.call(i,t,s,a))?n:void 0}),!!r)};_.contains=_.include=function(t,e){var n=!1;return y&&t.indexOf===y?-1!=t.indexOf(e):n=T(t,function(t){return t===e})},_.invoke=function(t,e){var n=o.call(arguments,2);return _.map(t,function(t){return(_.isFunction(e)?e:t[e]).apply(t,n)})},_.pluck=function(t,e){return _.map(t,function(t){return t[e]})},_.where=function(t,e){return _.isEmpty(e)?[]:_.filter(t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},_.max=function(t,e,n){if(!e&&_.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&_.isEmpty(t))return-1/0;var i={computed:-1/0};return k(t,function(t,r,s){var a=e?e.call(n,t,r,s):t;a>=i.computed&&(i={value:t,computed:a})}),i.value},_.min=function(t,e,n){if(!e&&_.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&_.isEmpty(t))return 1/0;var i={computed:1/0};return k(t,function(t,r,s){var a=e?e.call(n,t,r,s):t;i.computed>a&&(i={value:t,computed:a})}),i.value},_.shuffle=function(t){var e,n=0,i=[];return k(t,function(t){e=_.random(n++),i[n-1]=i[e],i[e]=t}),i};var D=function(t){return _.isFunction(t)?t:function(e){return e[t]}};_.sortBy=function(t,e,n){var i=D(e);return _.pluck(_.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index>t.index?-1:1}),"value")};var $=function(t,e,n,i){var r={},s=D(e);return k(t,function(e,a){var o=s.call(n,e,a,t);i(r,o,e)}),r};_.groupBy=function(t,e,n){return $(t,e,n,function(t,e,n){(_.has(t,e)?t[e]:t[e]=[]).push(n)})},_.countBy=function(t,e,n){return $(t,e,n,function(t,e){_.has(t,e)||(t[e]=0),t[e]++})},_.sortedIndex=function(t,e,n,i){n=null==n?_.identity:D(n);for(var r=n.call(i,e),s=0,a=t.length;a>s;){var o=s+a>>>1;
r>n.call(i,t[o])?s=o+1:a=o}return s},_.toArray=function(t){return t?t.length===+t.length?o.call(t):_.values(t):[]},_.size=function(t){return t.length===+t.length?t.length:_.keys(t).length},_.first=_.head=_.take=function(t,e,n){return null==e||n?t[0]:o.call(t,0,e)},_.initial=function(t,e,n){return o.call(t,0,t.length-(null==e||n?1:e))},_.last=function(t,e,n){return null==e||n?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},_.rest=_.tail=_.drop=function(t,e,n){return o.call(t,null==e||n?1:e)},_.compact=function(t){return _.filter(t,function(t){return!!t})};var j=function(t,e,n){return k(t,function(t){_.isArray(t)?e?a.apply(n,t):j(t,e,n):n.push(t)}),n};_.flatten=function(t,e){return j(t,e,[])},_.without=function(t){return _.difference(t,o.call(arguments,1))},_.uniq=_.unique=function(t,e,n,i){var r=n?_.map(t,n,i):t,s=[],a=[];return k(r,function(n,i){(e?i&&a[a.length-1]===n:_.contains(a,n))||(a.push(n),s.push(t[i]))}),s},_.union=function(){return _.uniq(l.apply(i,arguments))},_.intersection=function(t){var e=o.call(arguments,1);return _.filter(_.uniq(t),function(t){return _.every(e,function(e){return _.indexOf(e,t)>=0})})},_.difference=function(t){var e=l.apply(i,o.call(arguments,1));return _.filter(t,function(t){return!_.contains(e,t)})},_.zip=function(){for(var t=o.call(arguments),e=_.max(_.pluck(t,"length")),n=Array(e),i=0;e>i;i++)n[i]=_.pluck(t,""+i);return n},_.object=function(t,e){for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},_.indexOf=function(t,e,n){var i=0,r=t.length;if(n){if("number"!=typeof n)return i=_.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},_.lastIndexOf=function(t,e,n){var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},_.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,s=Array(i);i>r;)s[r++]=t,t+=n;return s};var S=function(){};_.bind=function(t,e){var n,i;if(t.bind===C&&C)return C.apply(t,o.call(arguments,1));if(!_.isFunction(t))throw new TypeError;return i=o.call(arguments,2),n=function(){if(this instanceof n){S.prototype=t.prototype;var r=new S,s=t.apply(r,i.concat(o.call(arguments)));return Object(s)===s?s:r}return t.apply(e,i.concat(o.call(arguments)))}},_.bindAll=function(t){var e=o.call(arguments,1);return 0==e.length&&(e=_.functions(t)),k(e,function(e){t[e]=_.bind(t[e],t)}),t},_.memoize=function(t,e){var n={};return e||(e=_.identity),function(){var i=e.apply(this,arguments);return _.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},_.delay=function(t,e){var n=o.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},_.defer=function(t){return _.delay.apply(_,[t,1].concat(o.call(arguments,1)))},_.throttle=function(t,e){var n,i,r,s,a,o,l=_.debounce(function(){a=s=!1},e);return function(){n=this,i=arguments;var u=function(){r=null,a&&(o=t.apply(n,i)),l()};return r||(r=setTimeout(u,e)),s?a=!0:(s=!0,o=t.apply(n,i)),l(),o}},_.debounce=function(t,e,n){var i,r;return function(){var s=this,a=arguments,o=function(){i=null,n||(r=t.apply(s,a))},l=n&&!i;return clearTimeout(i),i=setTimeout(o,e),l&&(r=t.apply(s,a)),r}},_.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},_.wrap=function(t,e){return function(){var n=[t];return a.apply(n,arguments),e.apply(this,n)}},_.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},_.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},_.keys=x||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)_.has(t,n)&&(e[e.length]=n);return e},_.values=function(t){var e=[];for(var n in t)_.has(t,n)&&e.push(t[n]);return e},_.pairs=function(t){var e=[];for(var n in t)_.has(t,n)&&e.push([n,t[n]]);return e},_.invert=function(t){var e={};for(var n in t)_.has(t,n)&&(e[t[n]]=n);return e},_.functions=_.methods=function(t){var e=[];for(var n in t)_.isFunction(t[n])&&e.push(n);return e.sort()},_.extend=function(t){return k(o.call(arguments,1),function(e){for(var n in e)t[n]=e[n]}),t},_.pick=function(t){var e={},n=l.apply(i,o.call(arguments,1));return k(n,function(n){n in t&&(e[n]=t[n])}),e},_.omit=function(t){var e={},n=l.apply(i,o.call(arguments,1));for(var r in t)_.contains(n,r)||(e[r]=t[r]);return e},_.defaults=function(t){return k(o.call(arguments,1),function(e){for(var n in e)null==t[n]&&(t[n]=e[n])}),t},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,e){return e(t),t};var E=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof _&&(t=t._wrapped),e instanceof _&&(e=e._wrapped);var r=u.call(t);if(r!=u.call(e))return!1;switch(r){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;n.push(t),i.push(e);var a=0,o=!0;if("[object Array]"==r){if(a=t.length,o=a==e.length)for(;a--&&(o=E(t[a],e[a],n,i)););}else{var l=t.constructor,c=e.constructor;if(l!==c&&!(_.isFunction(l)&&l instanceof l&&_.isFunction(c)&&c instanceof c))return!1;for(var d in t)if(_.has(t,d)&&(a++,!(o=_.has(e,d)&&E(t[d],e[d],n,i))))break;if(o){for(d in e)if(_.has(e,d)&&!a--)break;o=!a}}return n.pop(),i.pop(),o};_.isEqual=function(t,e){return E(t,e,[],[])},_.isEmpty=function(t){if(null==t)return!0;if(_.isArray(t)||_.isString(t))return 0===t.length;for(var e in t)if(_.has(t,e))return!1;return!0},_.isElement=function(t){return!!t&&1===t.nodeType},_.isArray=w||function(t){return"[object Array]"==u.call(t)},_.isObject=function(t){return t===Object(t)},k(["Arguments","Function","String","Number","Date","RegExp"],function(t){_["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(t){return!!t&&!!_.has(t,"callee")}),true&&(_.isFunction=function(t){return"function"==typeof t}),_.isFinite=function(t){return _.isNumber(t)&&isFinite(t)},_.isNaN=function(t){return _.isNumber(t)&&t!=+t},_.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,e){return c.call(t,e)},_.noConflict=function(){return t._=e,this},_.identity=function(t){return t},_.times=function(t,e,n){for(var i=0;t>i;i++)e.call(n,i)},_.random=function(t,e){return null==e&&(e=t,t=0),t+(0|Math.random()*(e-t+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=_.invert(F.escape);var N={escape:RegExp("["+_.keys(F.escape).join("")+"]","g"),unescape:RegExp("("+_.keys(F.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(t){_[t]=function(e){return null==e?"":(""+e).replace(N[t],function(e){return F[t][e]})}}),_.result=function(t,e){if(null==t)return null;var n=t[e];return _.isFunction(n)?n.call(t):n},_.mixin=function(t){k(_.functions(t),function(e){var n=_[e]=t[e];_.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),H.call(this,n.apply(_,t))}})};var A=0;_.uniqueId=function(t){var e=A++;return t?t+e:e},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(t,e,n){n=_.defaults({},n,_.templateSettings);var i=RegExp([(n.escape||M).source,(n.interpolate||M).source,(n.evaluate||M).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(i,function(e,n,i,a,o){s+=t.slice(r,o).replace(O,function(t){return"\\"+I[t]}),s+=n?"'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?"'+\n((__t=("+i+"))==null?'':__t)+\n'":a?"';\n"+a+"\n__p+='":"",r=o+e.length}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var a=Function(n.variable||"obj","_",s)}catch(o){throw o.source=s,o}if(e)return a(e,_);var l=function(t){return a.call(this,t,_)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},_.chain=function(t){return _(t).chain()};var H=function(t){return this._chain?_(t).chain():t};_.mixin(_),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];_.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),("shift"==t||"splice"==t)&&0===n.length&&delete n[0],H.call(this,n)}}),k(["concat","join","slice"],function(t){var e=i[t];_.prototype[t]=function(){return H.call(this,e.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}.call(this),function(t,e){"undefined"!=typeof exports?e(t,exports,require("underscore")):"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(n,i,r){t.Backbone=e(t,r,n,i)}):t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender)}(this,function(t,e,n,i){var r=t.Backbone,s=Array.prototype.slice,a=Array.prototype.splice;e.VERSION="0.9.2",e.setDomLibrary=function(t){i=t},e.noConflict=function(){return t.Backbone=r,e},e.emulateHTTP=!1,e.emulateJSON=!1;var o=/\s+/,l=e.Events={on:function(t,e,n){var i,r,s,a,l;if(!e)return this;for(t=t.split(o),i=this._callbacks||(this._callbacks={});r=t.shift();)l=i[r],s=l?l.tail:{},s.next=a={},s.context=n,s.callback=e,i[r]={tail:a,next:l?l.next:s};return this},off:function(t,e,i){var r,s,a,l,u,c;if(s=this._callbacks){if(!(t||e||i))return delete this._callbacks,this;for(t=t?t.split(o):n.keys(s);r=t.shift();)if(a=s[r],delete s[r],a&&(e||i))for(l=a.tail;(a=a.next)!==l;)u=a.callback,c=a.context,(e&&u!==e||i&&c!==i)&&this.on(r,u,c);return this}},trigger:function(t){var e,n,i,r,a,l,u;if(!(i=this._callbacks))return this;for(l=i.all,t=t.split(o),u=s.call(arguments,1);e=t.shift();){if(n=i[e])for(r=n.tail;(n=n.next)!==r;)n.callback.apply(n.context||this,u);if(n=l)for(r=n.tail,a=[e].concat(u);(n=n.next)!==r;)n.callback.apply(n.context||this,a)}return this}};l.bind=l.on,l.unbind=l.off;var u=e.Model=function(t,e){var i;t||(t={}),e&&e.parse&&(t=this.parse(t)),(i=D(this,"defaults"))&&(t=n.extend({},i,t)),e&&e.collection&&(this.collection=e.collection),this.attributes={},this._escapedAttributes={},this.cid=n.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(t,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=n.clone(this.attributes),this.initialize.apply(this,arguments)};n.extend(u.prototype,l,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},get:function(t){return this.attributes[t]},escape:function(t){var e;if(e=this._escapedAttributes[t])return e;var i=this.get(t);return this._escapedAttributes[t]=n.escape(null==i?"":""+i)},has:function(t){return null!=this.get(t)},set:function(t,e,i){var r,s,a;if(n.isObject(t)||null==t?(r=t,i=e):(r={},r[t]=e),i||(i={}),!r)return this;if(r instanceof u&&(r=r.attributes),i.unset)for(s in r)r[s]=void 0;if(!this._validate(r,i))return!1;this.idAttribute in r&&(this.id=r[this.idAttribute]);var o=i.changes={},l=this.attributes,c=this._escapedAttributes,d=this._previousAttributes||{};for(s in r)a=r[s],(!n.isEqual(l[s],a)||i.unset&&n.has(l,s))&&(delete c[s],(i.silent?this._silent:o)[s]=!0),i.unset?delete l[s]:l[s]=a,n.isEqual(d[s],a)&&n.has(l,s)==n.has(d,s)?(delete this.changed[s],delete this._pending[s]):(this.changed[s]=a,i.silent||(this._pending[s]=!0));return i.silent||this.change(i),this},unset:function(t,e){return(e||(e={})).unset=!0,this.set(t,null,e)},clear:function(t){return(t||(t={})).unset=!0,this.set(n.clone(this.attributes),t)},fetch:function(t){t=t?n.clone(t):{};var i=this,r=t.success;return t.success=function(e,n,s){return i.set(i.parse(e,s),t)?(r&&r(i,e),void 0):!1},t.error=e.wrapError(t.error,i,t),(this.sync||e.sync).call(this,"read",this,t)},save:function(t,i,r){var s,a;if(n.isObject(t)||null==t?(s=t,r=i):(s={},s[t]=i),r=r?n.clone(r):{},r.wait){if(!this._validate(s,r))return!1;a=n.clone(this.attributes)}var o=n.extend({},r,{silent:!0});if(s&&!this.set(s,r.wait?o:r))return!1;var l=this,u=r.success;r.success=function(t,e,i){var a=l.parse(t,i);return r.wait&&(delete r.wait,a=n.extend(s||{},a)),l.set(a,r)?(u?u(l,t):l.trigger("sync",l,t,r),void 0):!1},r.error=e.wrapError(r.error,l,r);var c=this.isNew()?"create":"update",d=(this.sync||e.sync).call(this,c,this,r);return r.wait&&this.set(a,o),d},destroy:function(t){t=t?n.clone(t):{};var i=this,r=t.success,s=function(){i.trigger("destroy",i,i.collection,t)};if(this.isNew())return s(),!1;t.success=function(e){t.wait&&s(),r?r(i,e):i.trigger("sync",i,e,t)},t.error=e.wrapError(t.error,i,t);var a=(this.sync||e.sync).call(this,"delete",this,t);return t.wait||s(),a},url:function(){var t=D(this,"urlRoot")||D(this.collection,"url")||$();return this.isNew()?t:t+("/"==t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(t){t||(t={});var e=this._changing;this._changing=!0;for(var i in this._silent)this._pending[i]=!0;var r=n.extend({},t.changes,this._silent);this._silent={};for(var i in r)this.trigger("change:"+i,this,this.get(i),t);if(e)return this;for(;!n.isEmpty(this._pending);){this._pending={},this.trigger("change",this,t);for(var i in this.changed)this._pending[i]||this._silent[i]||delete this.changed[i];this._previousAttributes=n.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(t){return arguments.length?n.has(this.changed,t):!n.isEmpty(this.changed)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,i=!1,r=this._previousAttributes;for(var s in t)n.isEqual(r[s],e=t[s])||((i||(i={}))[s]=e);return i},previous:function(t){return arguments.length&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(t,e){if(e.silent||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validate(t,e);return i?(e&&e.error?e.error(this,i,e):this.trigger("error",this,i,e),!1):!0}});var c=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,{silent:!0,parse:e.parse})};n.extend(c.prototype,l,{model:u,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},add:function(t,e){var i,r,s,o,l,u,c={},d={},h=[];for(e||(e={}),t=n.isArray(t)?t.slice():[t],i=0,s=t.length;s>i;i++){if(!(o=t[i]=this._prepareModel(t[i],e)))throw Error("Can't add an invalid model to a collection");l=o.cid,u=o.id,c[l]||this._byCid[l]||null!=u&&(d[u]||this._byId[u])?h.push(i):c[l]=d[u]=o}for(i=h.length;i--;)t.splice(h[i],1);for(i=0,s=t.length;s>i;i++)(o=t[i]).on("all",this._onModelEvent,this),this._byCid[o.cid]=o,null!=o.id&&(this._byId[o.id]=o);if(this.length+=s,r=null!=e.at?e.at:this.models.length,a.apply(this.models,[r,0].concat(t)),this.comparator&&this.sort({silent:!0}),e.silent)return this;for(i=0,s=this.models.length;s>i;i++)c[(o=this.models[i]).cid]&&(e.index=i,o.trigger("add",o,this,e));return this},remove:function(t,e){var i,r,s,a;for(e||(e={}),t=n.isArray(t)?t.slice():[t],i=0,r=t.length;r>i;i++)a=this.getByCid(t[i])||this.get(t[i]),a&&(delete this._byId[a.id],delete this._byCid[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a));return this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,e),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,n.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t]},getByCid:function(t){return t&&this._byCid[t.cid||t]},at:function(t){return this.models[t]},where:function(t){return n.isEmpty(t)?[]:this.filter(function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},sort:function(t){if(t||(t={}),!this.comparator)throw Error("Cannot sort a set without a comparator");var e=n.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("reset",this,t),this},pluck:function(t){return n.map(this.models,function(e){return e.get(t)})},reset:function(t,e){t||(t=[]),e||(e={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i]);return this._reset(),this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var i=this,r=t.success;return t.success=function(e,n,s){i[t.add?"add":"reset"](i.parse(e,s),t),r&&r(i,e)},t.error=e.wrapError(t.error,i,t),(this.sync||e.sync).call(this,"read",this,t)},create:function(t,e){var i=this;if(e=e?n.clone(e):{},t=this._prepareModel(t,e),!t)return!1;e.wait||i.add(t,e);var r=e.success;return e.success=function(n,s){e.wait&&i.add(n,e),r?r(n,s):n.trigger("sync",t,s,e)},t.save(null,e),t},parse:function(t){return t},chain:function(){return n(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(t,e){if(e||(e={}),t instanceof u)t.collection||(t.collection=this);else{var n=t;e.collection=this,t=new this.model(n,e),t._validate(t.attributes,e)||(t=!1)}return t},_removeReference:function(t){this==t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!=t&&"remove"!=t||n==this)&&("destroy"==t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],this._byId[e.id]=e),this.trigger.apply(this,arguments))}});var d=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];n.each(d,function(t){c.prototype[t]=function(){return n[t].apply(n,[this.models].concat(n.toArray(arguments)))}});var h=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},p=/:\w+/g,f=/\*\w+/g,m=/[-[\]{}()+?.,\\^$|#\s]/g;n.extend(h.prototype,l,{initialize:function(){},route:function(t,i,r){return e.history||(e.history=new g),n.isRegExp(t)||(t=this._routeToRegExp(t)),r||(r=this[i]),e.history.route(t,n.bind(function(n){var s=this._extractParameters(t,n);r&&r.apply(this,s),this.trigger.apply(this,["route:"+i].concat(s)),e.history.trigger("route",this,i,s)},this)),this},navigate:function(t,n){e.history.navigate(t,n)},_bindRoutes:function(){if(this.routes){var t=[];for(var e in this.routes)t.unshift([e,this.routes[e]]);for(var n=0,i=t.length;i>n;n++)this.route(t[n][0],t[n][1],this[t[n][1]])}},_routeToRegExp:function(t){return t=t.replace(m,"\\$&").replace(p,"([^/]+)").replace(f,"(.*?)"),RegExp("^"+t+"$")},_extractParameters:function(t,e){return t.exec(e).slice(1)}});var g=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl")},v=/^[#\/]/,y=/msie [\w.]+/;g.started=!1,n.extend(g.prototype,l,{interval:50,getHash:function(t){var e=t?t.location:window.location,n=e.href.match(/#(.*)$/);return n?n[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||e){t=window.location.pathname;var n=window.location.search;n&&(t+=n)}else t=this.getHash();return t.indexOf(this.options.root)||(t=t.substr(this.options.root.length)),t.replace(v,"")},start:function(t){if(g.started)throw Error("Backbone.history has already been started");g.started=!0,this.options=n.extend({},{root:"/"},this.options,t),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var e=this.getFragment(),r=document.documentMode,s=y.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);s&&(this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?i(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?i(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var a=window.location,o=a.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&a.hash&&(this.fragment=this.getHash().replace(v,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){i(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),g.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t==this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t==this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return i},navigate:function(t,e){if(!g.started)return!1;e&&e!==!0||(e={trigger:e});var n=(t||"").replace(v,"");this.fragment!=n&&(this._hasPushState?(0!=n.indexOf(this.options.root)&&(n=this.options.root+n),this.fragment=n,window.history[e.replace?"replaceState":"pushState"]({},document.title,n)):this._wantsHashChange?(this.fragment=n,this._updateHash(window.location,n,e.replace),this.iframe&&n!=this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,e.replace))):window.location.assign(this.options.root+t),e.trigger&&this.loadUrl(t))},_updateHash:function(t,e,n){n?t.replace((""+t).replace(/(javascript:|#).*$/,"")+"#"+e):t.hash=e}});var b=e.View=function(t){this.cid=n.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName"];n.extend(b.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(t,e,n){var r=document.createElement(t);return e&&i(r).attr(e),null!=n&&i(r).html(n),r},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof i?t:i(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(t||(t=D(this,"events"))){this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),!i)throw Error('Method "'+t[e]+'" does not exist');var r=e.match(w),s=r[1],a=r[2];i=n.bind(i,this),s+=".delegateEvents"+this.cid,""===a?this.$el.bind(s,i):this.$el.delegate(a,s,i)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(t){this.options&&(t=n.extend({},this.options,t));for(var e=0,i=x.length;i>e;e++){var r=x[e];t[r]&&(this[r]=t[r])}this.options=t},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var t=D(this,"attributes")||{};this.id&&(t.id=this.id),this.className&&(t["class"]=this.className),this.setElement(this.make(this.tagName,t),!1)}}});var C=function(t,e){var n=T(this,t,e);return n.extend=this.extend,n};u.extend=c.extend=h.extend=b.extend=C;var _={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};e.sync=function(t,r,s){var a=_[t];s||(s={});var o={type:a,dataType:"json"};return s.url||(o.url=D(r,"url")||$()),s.data||!r||"create"!=t&&"update"!=t||(o.contentType="application/json",o.data=JSON.stringify(r.toJSON())),e.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),e.emulateHTTP&&("PUT"===a||"DELETE"===a)&&(e.emulateJSON&&(o.data._method=a),o.type="POST",o.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",a)}),"GET"===o.type||e.emulateJSON||(o.processData=!1),i.ajax(n.extend(o,s))},e.wrapError=function(t,e,n){return function(i,r){r=i===e?r:i,t?t(e,r,n):e.trigger("error",e,r,n)}};var k=function(){},T=function(t,e,i){var r;return r=e&&e.hasOwnProperty("constructor")?e.constructor:function(){t.apply(this,arguments)},n.extend(r,t),k.prototype=t.prototype,r.prototype=new k,e&&n.extend(r.prototype,e),i&&n.extend(r,i),r.prototype.constructor=r,r.__super__=t.prototype,r},D=function(t,e){return t&&t[e]?n.isFunction(t[e])?t[e]():t[e]:null},$=function(){throw Error('A "url" property or function must be specified')};return e}),function(){var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],e=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,n=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i="undefined"!=typeof location&&location.href,r=i&&location.protocol&&location.protocol.replace(/\:/,""),s=i&&location.hostname,a=i&&(location.port||void 0),o=[];define("text",[],function(){var l,u,c;return"undefined"!=typeof window&&window.navigator&&window.document?u=function(t,e){var n=l.createXhr();n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.responseText)},n.send(null)}:"undefined"!=typeof process&&process.versions&&process.versions.node?(c=require.nodeRequire("fs"),u=function(t,e){e(c.readFileSync(t,"utf8"))}):"undefined"!=typeof Packages&&(u=function(t,e){var n,i,r=new java.io.File(t),s=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),"utf-8")),a="";try{for(n=new java.lang.StringBuffer,(i=r.readLine())&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),n.append(i);null!==(i=r.readLine());)n.append(s),n.append(i);a=""+n+""}finally{r.close()}e(a)}),l={version:"0.27.0",strip:function(t){if(t){var t=t.replace(e,""),i=t.match(n);i&&(t=i[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var e,n,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(n=0;3>n;n++){i=t[n];try{e=new ActiveXObject(i)}catch(r){}if(e){t=[i];break}}if(!e)throw Error("createXhr(): XMLHttpRequest not available");return e},get:u,parseName:function(t){var e=!1,n=t.indexOf("."),i=t.substring(0,n),t=t.substring(n+1,t.length),n=t.indexOf("!");return-1!==n&&(e=t.substring(n+1,t.length),e="strip"===e,t=t.substring(0,n)),{moduleName:i,ext:t,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,n,i){var r,s=l.xdRegExp.exec(t);return s?(t=s[2],s=s[3],s=s.split(":"),r=s[1],s=s[0],!(t&&t!==e||s&&s!==n||(r||s)&&r!==i)):!0},finishLoad:function(t,e,n,i,r){n=e?l.strip(n):n,r.isBuild&&r.inlineText&&(o[t]=n),i(n)},load:function(t,e,n,o){var u=l.parseName(t),c=u.moduleName+"."+u.ext,d=e.toUrl(c),h=o&&o.text&&o.text.useXhr||l.useXhr;!i||h(d,r,s,a)?l.get(d,function(e){l.finishLoad(t,u.strip,e,n,o)}):e([c],function(t){l.finishLoad(u.moduleName+"."+u.ext,u.strip,t,n,o)})},write:function(t,e,n){if(e in o){var i=l.jsEscape(o[e]);n.asModule(t+"!"+e,"define(function () { return '"+i+"';});\n")}},writeFile:function(t,e,n,i,r){var e=l.parseName(e),s=e.moduleName+"."+e.ext,a=n.toUrl(e.moduleName+"."+e.ext)+".js";l.load(s,n,function(){var e=function(t){return i(a,t)};e.asModule=function(t,e){return i.asModule(t,a,e)},l.write(t,s,e,r)},r)}}})}(),define("text!templates/sidebar/sidebarTemplate.html",[],function(){return"\r\n"}),define("views/sidebar/SidebarView",["jquery","underscore","backbone","text!templates/sidebar/sidebarTemplate.html"],function(t,e,n,i){var r=n.View.extend({el:t(".sidebar"),render:function(){var n={site_url:"http://www.backbonejs.org",image_url:"/assets/imgs/backbone_logo.png",title:"Backbone.js",description:"Backbone.js gives structure to web applications by providing models with key-value binding and custom events, collections with a rich API of enumerable functions, views with declarative event handling, and connects it all to your existing API over a RESTful JSON interface."},r={site_url:"http://www.requirejs.org",image_url:"/assets/imgs/require_logo.png",title:"Require.js",description:"RequireJS is a JavaScript file and module loader. It is optimized for in-browser use, but it can be used in other JavaScript environments, like Rhino and Node."},s={ads:[n,r]},a=e.template(i,s);t(".sidebar").append(a)}});return r}),define("models/gallery/ImageModel",["underscore","backbone"],function(t,e){var n=e.Model.extend({defaults:{userId:0,status:0},initialize:function(t,e){this.action=e.action},url:function(){return"updateStatus"==this.action?"/"+this.get("userId")+"/gallery/img/s/"+this.id:"faverite"==this.action?"/gallery/img/faverite/"+this.id:"/"+this.get("userId")+"/gallery/img/"+this.id}});return n}),define("collections/gallery/ImageCollection",["underscore","backbone","models/gallery/ImageModel"],function(t,e,n){var i=e.Collection.extend({model:n,initialize:function(t,e){this.action=e.action},url:function(){return"getPopImags"==this.action?"/home/popimgs":"getCatImags"==this.action?"/gallery/img/"+this.imgId:void 0},parse:function(t){return t}});return i}),define("models/gallery/CategoryModel",["underscore","backbone"],function(t,e){var n=e.Model.extend({defaults:{},initialize:function(t,e){this.action=e.action},url:function(){return"save"==this.action?"/gallery/cat":"updateStatus"==this.action?"/"+this.get("userId")+"/gallery/cat/s/"+this.id:"/"+this.get("userId")+"/gallery/cat/"+this.id}});return n}),define("collections/gallery/CategoryCollection",["underscore","backbone","models/gallery/CategoryModel"],function(t,e){var n=e.Collection.extend({initialize:function(){},url:function(){return null!=this.userId?"/"+this.userId+"/gallery/cats/"+this.catId+"/"+(void 0==this.pageId?"1":this.pageId):"/gallery/cats/"+this.catId+"/"+(void 0==this.pageId?"1":this.pageId)},parse:function(t){return t}});return n}),define("text!templates/gallery/imageUploadTemplate.html",[],function(){return'<link rel="stylesheet" href="/assets/js/libs/fileupload/css/jquery.fileupload-ui.css">\r\n<div class="container">\r\n    <div class="page-header">\r\n        <h1>上传照片到：<%=category.title%></h1>\r\n    </div>\r\n    <br>\r\n    <!-- The file upload form used as target for the file upload widget -->\r\n    <form id="fileupload" action="" method="POST" enctype="multipart/form-data">\r\n        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\r\n        <div class="row fileupload-buttonbar">\r\n            <div class="span7">\r\n                <!-- The fileinput-button span is used to style the file input field as button -->\r\n                <span class="btn btn-success fileinput-button">\r\n                    <i class="icon-plus icon-white"></i>\r\n                    <span>添加文件...</span>\r\n                    <input type="file" name="files[]" multiple>\r\n                </span>\r\n                <button type="submit" class="btn btn-primary start">\r\n                    <i class="icon-upload icon-white"></i>\r\n                    <span>开始上载</span>\r\n                </button>\r\n                <button type="reset" class="btn btn-warning cancel">\r\n                    <i class="icon-ban-circle icon-white"></i>\r\n                    <span>取消上载</span>\r\n                </button>\r\n            </div>\r\n            <!-- The global progress information -->\r\n            <div class="span5 fileupload-progress fade">\r\n                <!-- The global progress bar -->\r\n                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">\r\n                    <div class="bar" style="width:0%;"></div>\r\n                </div>\r\n                <!-- The extended global progress information -->\r\n                <div class="progress-extended">&nbsp;</div>\r\n            </div>\r\n        </div>\r\n        <!-- The loading indicator is shown during file processing -->\r\n        <div class="fileupload-loading"></div>\r\n        <br>\r\n        <!-- The table listing the files available for upload/download -->\r\n        <table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>\r\n    </form>\r\n</div>\r\n<!-- The template to display files available for upload -->\r\n<script id="template-upload" type="text/x-tmpl">\r\n{% for (var i=0, file; file=o.files[i]; i++) { %}\r\n    <tr class="template-upload fade">\r\n        <td class="preview"><span class="fade"></span></td>\r\n        <td class="name"><span>{%=file.name%}</span></td>\r\n        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>\r\n        {% if (file.error) { %}\r\n            <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>\r\n        {% } else if (o.files.valid && !i) { %}\r\n            <td>\r\n                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>\r\n            </td>\r\n            <td class="start">{% if (!o.options.autoUpload) { %}\r\n                <button class="btn btn-primary">\r\n                    <i class="icon-upload icon-white"></i>\r\n                    <span>Start</span>\r\n                </button>\r\n            {% } %}</td>\r\n        {% } else { %}\r\n            <td colspan="2"></td>\r\n        {% } %}\r\n        <td class="cancel">{% if (!i) { %}\r\n            <button class="btn btn-warning">\r\n                <i class="icon-ban-circle icon-white"></i>\r\n                <span>Cancel</span>\r\n            </button>\r\n        {% } %}</td>\r\n    </tr>\r\n{% } %}\r\n</script>\r\n<!-- The template to display files available for download -->\r\n<script id="template-download" type="text/x-tmpl">\r\n{% for (var i=0, file; file=o.files[i]; i++) { %}\r\n    <tr class="template-download fade">\r\n        {% if (file.error) { %}\r\n            <td></td>\r\n            <td class="name"><span>{%=file.name%}</span></td>\r\n            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>\r\n            <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>\r\n        {% } else { %}\r\n            <td class="preview">{% if (file.thumbnail_url) { %}\r\n                <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>\r\n            {% } %}</td>\r\n            <td class="name">\r\n                <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="{%=file.thumbnail_url&&\'gallery\'%}" download="{%=file.name%}">{%=file.name%}</a>\r\n            </td>\r\n            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>\r\n            <td colspan="2"></td>\r\n        {% } %}\r\n        <td class="delete">\r\n            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"{% if (file.delete_with_credentials) { %} data-xhr-fields=\'{"withCredentials":true}\'{% } %}>\r\n                <i class="icon-trash icon-white"></i>\r\n                <span>Delete</span>\r\n            </button>\r\n            <input type="checkbox" name="delete" value="1">\r\n        </td>\r\n    </tr>\r\n{% } %}\r\n</script>\r\n'
}),function(t){"function"==typeof define&&define.amd?define("jquery.ui.widget",["jquery"],t):t(jQuery)}(function(t,e){var n=0,i=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(s){}r(e)},t.widget=function(n,i,r){var s,a,o,l,u=n.split(".")[0];n=n.split(".")[1],s=u+"-"+n,r||(r=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[u]=t[u]||{},a=t[u][n],o=t[u][n]=function(t,n){return this._createWidget?(arguments.length&&this._createWidget(t,n),e):new o(t,n)},t.extend(o,a,{version:r.version,_proto:t.extend({},r),_childConstructors:[]}),l=new i,l.options=t.widget.extend({},l.options),t.each(r,function(e,n){t.isFunction(n)&&(r[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},r=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,s=this._superApply;return this._super=t,this._superApply=r,e=n.apply(this,arguments),this._super=i,this._superApply=s,e}}())}),o.prototype=t.widget.extend(l,{widgetEventPrefix:l.widgetEventPrefix||n},r,{constructor:o,namespace:u,widgetName:n,widgetBaseClass:s,widgetFullName:s}),a?(t.each(a._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete a._childConstructors):i._childConstructors.push(o),t.widget.bridge(n,o)},t.widget.extend=function(n){for(var r,s,a=i.call(arguments,1),o=0,l=a.length;l>o;o++)for(r in a[o])s=a[o][r],a[o].hasOwnProperty(r)&&s!==e&&(n[r]=t.isPlainObject(s)?t.isPlainObject(n[r])?t.widget.extend({},n[r],s):t.widget.extend({},s):s);return n},t.widget.bridge=function(n,r){var s=r.prototype.widgetFullName;t.fn[n]=function(a){var o="string"==typeof a,l=i.call(arguments,1),u=this;return a=!o&&l.length?t.widget.extend.apply(null,[a].concat(l)):a,o?this.each(function(){var i,r=t.data(this,s);return r?t.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,l),i!==r&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):e):t.error("no such method '"+a+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,s);e?e.option(a||{})._init():new r(a,this)}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetName,this),t.data(i,this.widgetFullName,this),this._on(this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var r,s,a,o=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(o={},r=n.split("."),n=r.shift(),r.length){for(s=o[n]=t.widget.extend({},this.options[n]),a=0;r.length-1>a;a++)s[r[a]]=s[r[a]]||{},s=s[r[a]];if(n=r.pop(),i===e)return s[n]===e?null:s[n];s[n]=i}else{if(i===e)return this.options[n]===e?null:this.options[n];o[n]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,i){var r,s=this;i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,a){function o(){return s.options.disabled===!0||t(this).hasClass("ui-state-disabled")?e:("string"==typeof a?s[a]:a).apply(s,arguments)}"string"!=typeof a&&(o.guid=a.guid=a.guid||o.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+s.eventNamespace,c=l[2];c?r.delegate(c,u,o):n.bind(u,o)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,s,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(r in s)r in n||(n[r]=s[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,s){"string"==typeof r&&(r={effect:r});var a,o=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=s,r.delay&&i.delay(r.delay),a&&t.effects&&(t.effects.effect[o]||t.uiBackCompat!==!1&&t.effects[o])?i[e](r):o!==e&&i[o]?i[o](r.duration,r.easing,s):i.queue(function(n){t(this)[e](),s&&s.call(i[0]),n()})}}),t.uiBackCompat!==!1&&(t.Widget.prototype._getCreateOptions=function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]})}),function(t){"function"==typeof define&&define.amd?define("jquery.fileupload",["jquery","jquery.ui.widget"],t):t(window.jQuery)}(function(t){t.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:t(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:1,sequentialUploads:!1,limitConcurrentUploads:1,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(t){return t.serializeArray()},add:function(t,e){e.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date,this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,n){var i=t-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=8*(e-this.loaded)*(1e3/i),this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var n;return"function"==typeof e.formData?e.formData(e.form):t.isArray(e.formData)?e.formData:e.formData?(n=[],t.each(e.formData,function(t,e){n.push({name:t,value:e})}),n):[]},_getTotal:function(e){var n=0;return t.each(e,function(t,e){n+=e.size||1}),n},_onProgress:function(t,e){if(t.lengthComputable){var n,i,r=+new Date;if(e._time&&e.progressInterval&&e.progressInterval>r-e._time&&t.loaded!==t.total)return;e._time=r,n=e.total||this._getTotal(e.files),i=parseInt(t.loaded/t.total*(e.chunkSize||n),10)+(e.uploadedBytes||0),this._loaded+=i-(e.loaded||e.uploadedBytes||0),e.lengthComputable=!0,e.loaded=i,e.total=n,e.bitrate=e._bitrateTimer.getBitrate(r,i,e.bitrateInterval),this._trigger("progress",t,e),this._trigger("progressall",t,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(r,this._loaded,e.bitrateInterval)})}},_initProgressListener:function(e){var n=this,i=e.xhr?e.xhr():t.ajaxSettings.xhr();i.upload&&(t(i.upload).bind("progress",function(t){var i=t.originalEvent;t.lengthComputable=i.lengthComputable,t.loaded=i.loaded,t.total=i.total,n._onProgress(t,e)}),e.xhr=function(){return i})},_initXHRData:function(e){var n,i=e.files[0],r=e.multipart||!t.support.xhrFileUpload,s=e.paramName[0];e.headers=e.headers||{},e.contentRange&&(e.headers["Content-Range"]=e.contentRange),r?t.support.xhrFormDataFileUpload&&(e.postMessage?(n=this._getFormData(e),e.blob?n.push({name:s,value:e.blob}):t.each(e.files,function(t,i){n.push({name:e.paramName[t]||s,value:i})})):(e.formData instanceof FormData?n=e.formData:(n=new FormData,t.each(this._getFormData(e),function(t,e){n.append(e.name,e.value)})),e.blob?(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"',n.append(s,e.blob,i.name)):t.each(e.files,function(t,i){(window.Blob&&i instanceof Blob||window.File&&i instanceof File)&&n.append(e.paramName[t]||s,i,i.name)})),e.data=n):(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"',e.contentType=i.type,e.data=e.blob||i),e.blob=null},_initIframeSettings:function(e){e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&t("<a></a>").prop("href",e.url).prop("host")!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t,"iframe")},_getParamName:function(e){var n=t(e.fileInput),i=e.paramName;return i?t.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var e=t(this),n=e.prop("name")||"files[]",r=(e.prop("files")||[1]).length;r;)i.push(n),r-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var n=t.extend({},this.options,e);return this._initFormSettings(n),this._initDataSettings(n),n},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,n,i){var r=t.Deferred(),s=r.promise();return n=n||this.options.context||s,e===!0?r.resolveWith(n,i):e===!1&&r.rejectWith(n,i),s.abort=r.promise,this._enhancePromise(s)},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),n=e&&e.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(e,n){var i,r,s=this,a=e.files[0],o=a.size,l=e.uploadedBytes=e.uploadedBytes||0,u=e.maxChunkSize||o,c=a.slice||a.webkitSlice||a.mozSlice,d=t.Deferred(),h=d.promise();return this._isXHRUpload(e)&&c&&(l||o>u)&&!e.data?n?!0:l>=o?(a.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,e.context,[null,"error",a.error])):(r=function(){var n=t.extend({},e);n.blob=c.call(a,l,l+u,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+o,s._initXHRData(n),s._initProgressListener(n),i=(t.ajax(n)||s._getXHRPromise(!1,n.context)).done(function(i,a,u){l=s._getUploadedBytes(u)||l+n.chunkSize,n.loaded||s._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),e.uploadedBytes=n.uploadedBytes=l,o>l?r():d.resolveWith(n.context,[i,a,u])}).fail(function(t,e,i){d.rejectWith(n.context,[t,e,i])})},this._enhancePromise(h),h.abort=function(){return i.abort()},r(),h):!1},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer),this._active+=1,this._loaded+=e.uploadedBytes||0,this._total+=this._getTotal(e.files)},_onDone:function(e,n,i,r){this._isXHRUpload(r)||this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:1,total:1}),r),r.result=e,r.textStatus=n,r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(t,e,n,i){i.jqXHR=t,i.textStatus=e,i.errorThrown=n,this._trigger("fail",null,i),i.recalculateProgress&&(this._loaded-=i.loaded||i.uploadedBytes||0,this._total-=i.total||this._getTotal(i.files))},_onAlways:function(t,e,n,i){this._active-=1,i.textStatus=e,n&&n.always?(i.jqXHR=n,i.result=t):(i.jqXHR=t,i.errorThrown=n),this._trigger("always",null,i),0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(e,n){var i,r,s,a,o=this,l=o._getAJAXSettings(n),u=function(){return o._sending+=1,l._bitrateTimer=new o._BitrateTimer,i=i||((r||o._trigger("send",e,l)===!1)&&o._getXHRPromise(!1,l.context,r)||o._chunkedUpload(l)||t.ajax(l)).done(function(t,e,n){o._onDone(t,e,n,l)}).fail(function(t,e,n){o._onFail(t,e,n,l)}).always(function(t,e,n){if(o._sending-=1,o._onAlways(t,e,n,l),l.limitConcurrentUploads&&l.limitConcurrentUploads>o._sending)for(var i,r=o._slots.shift();r;){if(i=r.state?"pending"===r.state():!r.isRejected()){r.resolve();break}r=o._slots.shift()}})};return this._beforeSend(e,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this._sending>=this.options.limitConcurrentUploads?(this.options.limitConcurrentUploads>1?(s=t.Deferred(),this._slots.push(s),a=s.pipe(u)):a=this._sequence=this._sequence.pipe(u,u),a.abort=function(){return r=[,"abort","abort"],i?i.abort():(s&&s.rejectWith(l.context,r),u())},this._enhancePromise(a)):u()},_onAdd:function(e,n){var i,r,s,a,o=this,l=!0,u=t.extend({},this.options,n),c=u.limitMultiFileUploads,d=this._getParamName(u);if((u.singleFileUploads||c)&&this._isXHRUpload(u))if(!u.singleFileUploads&&c)for(s=[],i=[],a=0;n.files.length>a;a+=c)s.push(n.files.slice(a,a+c)),r=d.slice(a,a+c),r.length||(r=d),i.push(r);else i=d;else s=[n.files],i=[d];return n.originalFiles=n.files,t.each(s||n.files,function(r,a){var u=t.extend({},n);return u.files=s?a:[a],u.paramName=i[r],u.submit=function(){return u.jqXHR=this.jqXHR=o._trigger("submit",e,this)!==!1&&o._onSend(e,this),this.jqXHR},l=o._trigger("add",e,u)}),l},_replaceFileInput:function(e){var n=e.clone(!0);t("<form></form>").append(n)[0].reset(),e.after(n).detach(),t.cleanData(e.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,i){return i===e[0]?n[0]:i}),e[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(e,n){var i,r=this,s=t.Deferred(),a=function(t){t&&!t.entry&&(t.entry=e),s.resolve([t])};return n=n||"",e.isFile?e._file?(e._file.relativePath=n,s.resolve(e._file)):e.file(function(t){t.relativePath=n,s.resolve(t)},a):e.isDirectory?(i=e.createReader(),i.readEntries(function(t){r._handleFileTreeEntries(t,n+e.name+"/").done(function(t){s.resolve(t)}).fail(a)},a)):s.resolve([]),s.promise()},_handleFileTreeEntries:function(e,n){var i=this;return t.when.apply(t,t.map(e,function(t){return i._handleFileTreeEntry(t,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var n=e.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(t.map(n,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var n,i,r=e.prop("webkitEntries")||e.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(n=t.makeArray(e.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&t.each(n,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(i=e.prop("value"),!i)return t.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return t.Deferred().resolve(n).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var n=this,i={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(i.fileInput).always(function(t){i.files=t,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",e,i)!==!1&&n._onAdd(e,i)})},_onPaste:function(e){var n=e.originalEvent.clipboardData,i=n&&n.items||[],r={files:[]};return t.each(i,function(t,e){var n=e.getAsFile&&e.getAsFile();n&&r.files.push(n)}),this._trigger("paste",e,r)===!1||this._onAdd(e,r)===!1?!1:void 0},_onDrop:function(t){var e=this,n=t.dataTransfer=t.originalEvent.dataTransfer,i={};n&&n.files&&n.files.length&&t.preventDefault(),this._getDroppedFiles(n).always(function(n){i.files=n,e._trigger("drop",t,i)!==!1&&e._onAdd(t,i)})},_onDragOver:function(e){var n=e.dataTransfer=e.originalEvent.dataTransfer;return this._trigger("dragover",e)===!1?!1:(n&&-1!==t.inArray("Files",n.types)&&(n.dropEffect="copy",e.preventDefault()),void 0)},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,n){var i=-1!==t.inArray(e,this._refreshOptionsList);i&&this._destroyEventHandlers(),this._super(e,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_create:function(){var e=this.options;t.extend(e,t(this.element[0].cloneNode(!1)).data()),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(e){var n=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,n._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var n,i,r=this,s=t.Deferred(),a=s.promise();return a.abort=function(){return i=!0,n?n.abort():(s.reject(null,"abort","abort"),a)},this._getFileInputFiles(e.fileInput).always(function(t){i||(e.files=t,n=r._onSend(null,e).then(function(t,e,n){s.resolve(t,e,n)},function(t,e,n){s.reject(t,e,n)}))}),this._enhancePromise(a)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),function(t){var e=function(t,n){var i=/[^\w\-\.:]/.test(t)?Function(e.arg+",tmpl","var _e=tmpl.encode"+e.helper+",_s='"+t.replace(e.regexp,e.func)+"';return _s;"):e.cache[t]=e.cache[t]||e(e.load(t));return n?i(n,e):function(t){return i(t,e)}};e.cache={},e.load=function(t){return document.getElementById(t).innerHTML},e.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,e.func=function(t,e,n,i,r,s){return e?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[t]||"\\"+t:n?"="===n?"'+_e("+i+")+'":"'+("+i+"||'')+'":r?"';":s?"_s+='":void 0},e.encReg=/[<>&"'\x00]/g,e.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},e.encode=function(t){return((t||"")+"").replace(e.encReg,function(t){return e.encMap[t]||""})},e.arg="o",e.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define("tmpl",[],function(){return e}):t.tmpl=e}(this),function(t){var e=function(t,n,i){var r,s,a=document.createElement("img");return a.onerror=n,a.onload=function(){s&&(!i||!i.noRevoke)&&e.revokeObjectURL(s),n(e.scale(a,i))},window.Blob&&t instanceof Blob||window.File&&t instanceof File?(r=s=e.createObjectURL(t),a._type=t.type):r=t,r?(a.src=r,a):e.readFile(t,function(t){var e=t.target;e&&e.result?a.src=e.result:n(t)})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;e.detectSubsampling=function(t){var e,n,i=t.width,r=t.height;return i*r>1048576?(e=document.createElement("canvas"),e.width=e.height=1,n=e.getContext("2d"),n.drawImage(t,-i+1,0),0===n.getImageData(0,0,1,1).data[3]):!1},e.detectVerticalSquash=function(t,e){var n,i,r,s,a,o=document.createElement("canvas"),l=o.getContext("2d");for(o.width=1,o.height=e,l.drawImage(t,0,0),n=l.getImageData(0,0,1,e).data,i=0,r=e,s=e;s>i;)a=n[4*(s-1)+3],0===a?r=s:i=s,s=r+i>>1;return s/e},e.renderImageToCanvas=function(t,n,i,r){var s,a,o,l,u,c,d=t.width,h=t.height,p=n.getContext("2d"),f=1024,m=document.createElement("canvas");for(p.save(),e.detectSubsampling(t)&&(d/=2,h/=2),s=e.detectVerticalSquash(t,h),m.width=m.height=f,a=m.getContext("2d"),o=0;h>o;){for(l=o+f>h?h-o:f,u=0;d>u;)c=u+f>d?d-u:f,a.clearRect(0,0,f,f),a.drawImage(t,-u,-o),p.drawImage(m,0,0,c,l,Math.floor(u*i/d),Math.floor(o*r/h/s),Math.ceil(c*i/d),Math.ceil(l*r/h/s)),u+=f;o+=f}p.restore(),m=a=null},e.scale=function(t,n){n=n||{};var i=document.createElement("canvas"),r=t.width,s=t.height,a=Math.max((n.minWidth||r)/r,(n.minHeight||s)/s);return a>1&&(r=parseInt(r*a,10),s=parseInt(s*a,10)),a=Math.min((n.maxWidth||r)/r,(n.maxHeight||s)/s),1>a&&(r=parseInt(r*a,10),s=parseInt(s*a,10)),t.getContext||n.canvas&&i.getContext?(i.width=r,i.height=s,"image/jpeg"===t._type?e.renderImageToCanvas(t,i,r,s):i.getContext("2d").drawImage(t,0,0,r,s),i):(t.width=r,t.height=s,t)},e.createObjectURL=function(t){return n?n.createObjectURL(t):!1},e.revokeObjectURL=function(t){return n?n.revokeObjectURL(t):!1},e.readFile=function(t,e){if(window.FileReader&&FileReader.prototype.readAsDataURL){var n=new FileReader;return n.onload=n.onerror=e,n.readAsDataURL(t),n}return!1},"function"==typeof define&&define.amd?define("load-image",[],function(){return e}):t.loadImage=e}(this),function(t){var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),i=n&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),r=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,s=(n||r)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,s,a,o,l,u;for(e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):decodeURIComponent(t.split(",")[1]),s=new ArrayBuffer(e.length),a=new Uint8Array(s),o=0;e.length>o;o+=1)a[o]=e.charCodeAt(o);return l=t.split(",")[0].split(":")[1].split(";")[0],n?new Blob([i?a:s],{type:l}):(u=new r,u.append(s),u.getBlob(l))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,n,i){i&&e.toDataURL&&s?t(s(this.toDataURL(n,i))):t(this.mozGetAsFile("blob",n))}:e.toDataURL&&s&&(e.toBlob=function(t,e,n){t(s(this.toDataURL(e,n)))})),"function"==typeof define&&define.amd?define("canvas-to-blob",[],function(){return s}):t.dataURLtoBlob=s}(this),function(t){"function"==typeof define&&define.amd?define("jquery.fileupload-fp",["jquery","load-image","canvas-to-blob","jquery.fileupload"],t):t(window.jQuery,window.loadImage)}(function(t,e){t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{process:[],add:function(e,n){t(this).fileupload("process",n).done(function(){n.submit()})}},processActions:{load:function(n,i){var r=this,s=n.files[n.index],a=t.Deferred();return window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&("number"!==t.type(i.maxFileSize)||i.maxFileSize>s.size)&&(!i.fileTypes||i.fileTypes.test(s.type))?e(s,function(t){return t.src?(n.img=t,a.resolveWith(r,[n]),void 0):a.rejectWith(r,[n])}):a.rejectWith(r,[n]),a.promise()},resize:function(n,i){var r,s=n.img;return i=t.extend({canvas:!0},i),s&&(r=e.scale(s,i),(r.width!==s.width||r.height!==s.height)&&(n.canvas=r)),n},save:function(e){if(!e.canvas)return e;var n=this,i=e.files[e.index],r=i.name,s=t.Deferred(),a=function(t){t.name||(i.type===t.type?t.name=i.name:i.name&&(t.name=i.name.replace(/\..+$/,"."+t.type.substr(6)))),e.files[e.index]=t,s.resolveWith(n,[e])};return e.canvas.mozGetAsFile?a(e.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(i.type)&&r||(r&&r.replace(/\..+$/,"")||"blob")+".png",i.type)):e.canvas.toBlob(a,i.type),s.promise()}},_processFile:function(e,n,i){var r=this,s=t.Deferred().resolveWith(r,[{files:e,index:n}]),a=s.promise();return r._processing+=1,t.each(i.process,function(t,e){a=a.pipe(function(t){return r.processActions[e.action].call(this,t,e)})}),a.always(function(){r._processing-=1,0===r._processing&&r.element.removeClass("fileupload-processing")}),1===r._processing&&r.element.addClass("fileupload-processing"),a},process:function(e){var n=this,i=t.extend({},this.options,e);return i.process&&i.process.length&&this._isXHRUpload(i)&&t.each(e.files,function(r){n._processingQueue=n._processingQueue.pipe(function(){var s=t.Deferred();return n._processFile(e.files,r,i).always(function(){s.resolveWith(n)}),s.promise()})}),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=t.Deferred().resolveWith(this).promise()}})}),function(t){"function"==typeof define&&define.amd?define("fileupload-ui",["jquery","tmpl","load-image","jquery.fileupload-fp"],t):t(window.jQuery,window.tmpl,window.loadImage)}(function(t,e,n){t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{autoUpload:!1,maxNumberOfFiles:void 0,maxFileSize:void 0,minFileSize:void 0,acceptFileTypes:/.+$/i,previewSourceFileTypes:/^image\/(gif|jpeg|png)$/,previewSourceMaxFileSize:5e6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",add:function(e,n){var i=t(this).data("fileupload"),r=i.options,s=n.files;t(this).fileupload("process",n).done(function(){i._adjustMaxNumberOfFiles(-s.length),n.maxNumberOfFilesAdjusted=!0,n.files.valid=n.isValidated=i._validate(s),n.context=i._renderUpload(s).data("data",n),r.filesContainer[r.prependFiles?"prepend":"append"](n.context),i._renderPreviews(s,n.context),i._forceReflow(n.context),i._transition(n.context).done(function(){i._trigger("added",e,n)!==!1&&(r.autoUpload||n.autoUpload)&&n.autoUpload!==!1&&n.isValidated&&n.submit()})})},send:function(e,n){var i=t(this).data("fileupload");return n.isValidated||(n.maxNumberOfFilesAdjusted||(i._adjustMaxNumberOfFiles(-n.files.length),n.maxNumberOfFilesAdjusted=!0),i._validate(n.files))?(n.context&&n.dataType&&"iframe"===n.dataType.substr(0,6)&&n.context.find(".progress").addClass(!t.support.transition&&"progress-animated").attr("aria-valuenow",100).find(".bar").css("width","100%"),i._trigger("sent",e,n)):!1},done:function(e,n){var i,r,s=t(this).data("fileupload"),a=s._getFilesFromResponse(n);n.context?n.context.each(function(r){var o=a[r]||{error:"Empty file upload result"},l=s._addFinishedDeferreds();o.error&&s._adjustMaxNumberOfFiles(1),s._transition(t(this)).done(function(){var r=t(this);i=s._renderDownload([o]).replaceAll(r),s._forceReflow(i),s._transition(i).done(function(){n.context=t(this),s._trigger("completed",e,n),s._trigger("finished",e,n),l.resolve()})})}):(a.length&&(t.each(a,function(t,e){n.maxNumberOfFilesAdjusted&&e.error?s._adjustMaxNumberOfFiles(1):n.maxNumberOfFilesAdjusted||e.error||s._adjustMaxNumberOfFiles(-1)}),n.maxNumberOfFilesAdjusted=!0),i=s._renderDownload(a).appendTo(s.options.filesContainer),s._forceReflow(i),r=s._addFinishedDeferreds(),s._transition(i).done(function(){n.context=t(this),s._trigger("completed",e,n),s._trigger("finished",e,n),r.resolve()}))},fail:function(e,n){var i,r,s=t(this).data("fileupload");n.maxNumberOfFilesAdjusted&&s._adjustMaxNumberOfFiles(n.files.length),n.context?n.context.each(function(a){if("abort"!==n.errorThrown){var o=n.files[a];o.error=o.error||n.errorThrown||!0,r=s._addFinishedDeferreds(),s._transition(t(this)).done(function(){var a=t(this);i=s._renderDownload([o]).replaceAll(a),s._forceReflow(i),s._transition(i).done(function(){n.context=t(this),s._trigger("failed",e,n),s._trigger("finished",e,n),r.resolve()})})}else r=s._addFinishedDeferreds(),s._transition(t(this)).done(function(){t(this).remove(),s._trigger("failed",e,n),s._trigger("finished",e,n),r.resolve()})}):"abort"!==n.errorThrown?(n.context=s._renderUpload(n.files).appendTo(s.options.filesContainer).data("data",n),s._forceReflow(n.context),r=s._addFinishedDeferreds(),s._transition(n.context).done(function(){n.context=t(this),s._trigger("failed",e,n),s._trigger("finished",e,n),r.resolve()})):(s._trigger("failed",e,n),s._trigger("finished",e,n),s._addFinishedDeferreds().resolve())},progress:function(t,e){if(e.context){var n=parseInt(100*(e.loaded/e.total),10);e.context.find(".progress").attr("aria-valuenow",n).find(".bar").css("width",n+"%")}},progressall:function(e,n){var i=t(this),r=parseInt(100*(n.loaded/n.total),10),s=i.find(".fileupload-progress"),a=s.find(".progress-extended");a.length&&a.html(i.data("fileupload")._renderExtendedProgress(n)),s.find(".progress").attr("aria-valuenow",r).find(".bar").css("width",r+"%")},start:function(e){var n=t(this).data("fileupload");n._resetFinishedDeferreds(),n._transition(t(this).find(".fileupload-progress")).done(function(){n._trigger("started",e)})},stop:function(e){var n=t(this).data("fileupload"),i=n._addFinishedDeferreds();t.when.apply(t,n._getFinishedDeferreds()).done(function(){n._trigger("stopped",e)}),n._transition(t(this).find(".fileupload-progress")).done(function(){t(this).find(".progress").attr("aria-valuenow","0").find(".bar").css("width","0%"),t(this).find(".progress-extended").html("&nbsp;"),i.resolve()})},destroy:function(e,n){var i=t(this).data("fileupload");n.url&&(t.ajax(n),i._adjustMaxNumberOfFiles(1)),i._transition(n.context).done(function(){t(this).remove(),i._trigger("destroyed",e,n)})}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(e){return e||(e=t.Deferred()),this._finishedUploads.push(e),e},_getFinishedDeferreds:function(){return this._finishedUploads},_getFilesFromResponse:function(e){return e.result&&t.isArray(e.result.files)?e.result.files:[]},_enableDragToDesktop:function(){var e=t(this),n=e.prop("href"),i=e.prop("download"),r="application/octet-stream";e.bind("dragstart",function(t){try{t.originalEvent.dataTransfer.setData("DownloadURL",[r,i,n].join(":"))}catch(e){}})},_adjustMaxNumberOfFiles:function(t){"number"==typeof this.options.maxNumberOfFiles&&(this.options.maxNumberOfFiles+=t,1>this.options.maxNumberOfFiles?this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(t){return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" GB":t>=1e6?(t/1e6).toFixed(2)+" MB":(t/1e3).toFixed(2)+" KB"},_formatBitrate:function(t){return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" Gbit/s":t>=1e6?(t/1e6).toFixed(2)+" Mbit/s":t>=1e3?(t/1e3).toFixed(2)+" kbit/s":t.toFixed(2)+" bit/s"
},_formatTime:function(t){var e=new Date(1e3*t),n=parseInt(t/86400,10);return n=n?n+"d ":"",n+("0"+e.getUTCHours()).slice(-2)+":"+("0"+e.getUTCMinutes()).slice(-2)+":"+("0"+e.getUTCSeconds()).slice(-2)},_formatPercentage:function(t){return(100*t).toFixed(2)+" %"},_renderExtendedProgress:function(t){return this._formatBitrate(t.bitrate)+" | "+this._formatTime(8*(t.total-t.loaded)/t.bitrate)+" | "+this._formatPercentage(t.loaded/t.total)+" | "+this._formatFileSize(t.loaded)+" / "+this._formatFileSize(t.total)},_hasError:function(t){return t.error?t.error:0>this.options.maxNumberOfFiles?"Maximum number of files exceeded":this.options.acceptFileTypes.test(t.type)||this.options.acceptFileTypes.test(t.name)?this.options.maxFileSize&&t.size>this.options.maxFileSize?"File is too big":"number"==typeof t.size&&this.options.minFileSize>t.size?"File is too small":null:"Filetype not allowed"},_validate:function(e){var n=this,i=!!e.length;return t.each(e,function(t,e){e.error=n._hasError(e),e.error&&(i=!1)}),i},_renderTemplate:function(e,n){if(!e)return t();var i=e({files:n,formatFileSize:this._formatFileSize,options:this.options});return i instanceof t?i:t(this.options.templatesContainer).html(i).children()},_renderPreview:function(e,i){var r=this,s=this.options,a=t.Deferred();return(n&&n(e,function(e){i.append(e),r._forceReflow(i),r._transition(i).done(function(){a.resolveWith(i)}),t.contains(r.document[0].body,i[0])||a.resolveWith(i)},{maxWidth:s.previewMaxWidth,maxHeight:s.previewMaxHeight,canvas:s.previewAsCanvas})||a.resolveWith(i))&&a},_renderPreviews:function(e,n){var i=this,r=this.options;return n.find(".preview span").each(function(n,s){var a=e[n];r.previewSourceFileTypes.test(a.type)&&("number"!==t.type(r.previewSourceMaxFileSize)||r.previewSourceMaxFileSize>a.size)&&(i._processingQueue=i._processingQueue.pipe(function(){var e=t.Deferred();return i._renderPreview(a,t(s)).done(function(){e.resolveWith(i)}),e.promise()}))}),this._processingQueue},_renderUpload:function(t){return this._renderTemplate(this.options.uploadTemplate,t)},_renderDownload:function(t){return this._renderTemplate(this.options.downloadTemplate,t).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(e){e.preventDefault();var n=t(e.currentTarget),i=n.closest(".template-upload"),r=i.data("data");r&&r.submit&&!r.jqXHR&&r.submit()&&n.prop("disabled",!0)},_cancelHandler:function(e){e.preventDefault();var n=t(e.currentTarget).closest(".template-upload"),i=n.data("data")||{};i.jqXHR?i.jqXHR.abort():(i.errorThrown="abort",this._trigger("fail",e,i))},_deleteHandler:function(e){e.preventDefault();var n=t(e.currentTarget);this._trigger("destroy",e,t.extend({context:n.closest(".template-download"),type:"DELETE",dataType:this.options.dataType},n.data()))},_forceReflow:function(e){return t.support.transition&&e.length&&e[0].offsetWidth},_transition:function(e){var n=t.Deferred();return t.support.transition&&e.hasClass("fade")?e.bind(t.support.transition.end,function(i){i.target===e[0]&&(e.unbind(t.support.transition.end),n.resolveWith(e))}).toggleClass("in"):(e.toggleClass("in"),n.resolveWith(e)),n},_initButtonBarEventHandlers:function(){var e=this.element.find(".fileupload-buttonbar"),n=this.options.filesContainer;this._on(e.find(".start"),{click:function(t){t.preventDefault(),n.find(".start button").click()}}),this._on(e.find(".cancel"),{click:function(t){t.preventDefault(),n.find(".cancel button").click()}}),this._on(e.find(".delete"),{click:function(t){t.preventDefault(),n.find(".delete input:checked").siblings("button").click(),e.find(".toggle").prop("checked",!1)}}),this._on(e.find(".toggle"),{change:function(e){n.find(".delete input").prop("checked",t(e.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar button"),"click"),this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super(),this._on(this.options.filesContainer,{"click .start button":this._startHandler,"click .cancel button":this._cancelHandler,"click .delete button":this._deleteHandler}),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers(),this._off(this.options.filesContainer,"click"),this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var t=this.options;t.templatesContainer=this.document[0].createElement(t.filesContainer.prop("nodeName")),e&&(t.uploadTemplateId&&(t.uploadTemplate=e(t.uploadTemplateId)),t.downloadTemplateId&&(t.downloadTemplate=e(t.downloadTemplateId)))},_initFilesContainer:function(){var e=this.options;void 0===e.filesContainer?e.filesContainer=this.element.find(".files"):e.filesContainer instanceof t||(e.filesContainer=t(e.filesContainer))},_stringToRegExp:function(t){var e=t.split("/"),n=e.pop();return e.shift(),RegExp(e.join("/"),n)},_initRegExpOptions:function(){var e=this.options;"string"===t.type(e.acceptFileTypes)&&(e.acceptFileTypes=this._stringToRegExp(e.acceptFileTypes)),"string"===t.type(e.previewSourceFileTypes)&&(e.previewSourceFileTypes=this._stringToRegExp(e.previewSourceFileTypes))},_initSpecialOptions:function(){this._super(),this._initFilesContainer(),this._initTemplates(),this._initRegExpOptions()},_setOption:function(t,e){this._super(t,e),"maxNumberOfFiles"===t&&this._adjustMaxNumberOfFiles(0)},_create:function(){this._super(),this._refreshOptionsList.push("filesContainer","uploadTemplateId","downloadTemplateId"),this._processingQueue||(this._processingQueue=t.Deferred().resolveWith(this).promise(),this.process=function(){return this._processingQueue}),this._resetFinishedDeferreds()},enable:function(){var t=!1;this.options.disabled&&(t=!0),this._super(),t&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton()),this._super()}})}),define("views/gallery/ImageUploadView",["jquery","underscore","backbone","text!templates/gallery/imageUploadTemplate.html","jquery.fileupload","fileupload-ui"],function(t,e,n,i){var r=n.View.extend({el:t("#gallerymain"),initialize:function(){},render:function(){this.category=this.options.category;var n={category:this.category},r=e.template(i,n);return t("#gallerymain").html(r),t("#fileupload").fileupload({url:"/gallery/img/"+this.category.id}),t("#fileupload").fileupload("option","redirect",window.location.href.replace(/\/[^\/]*$/,"/cors/result.html?%s")),this}});return r}),define("text!templates/gallery/newCategoryTemplate.html",[],function(){return'<link rel="stylesheet" href="/assets/js/libs/fileupload/css/jquery.fileupload-ui.css">\r\n<div class="row">\r\n  <div class="span9 offset2">\r\n	<form class="form-horizontal">\r\n	  <legend class="align_center">创建新的相册类别</legend>\r\n	  <div class="control-group">\r\n	    <label class="control-label" for="inputEmail">类别名词</label>\r\n	    <div class="controls">\r\n	      <input type="text" id="catTitle" placeholder="类别名词" style="width: 406px;">\r\n	    </div>\r\n	  </div>\r\n	  <div class="control-group">\r\n	    <label class="control-label" for="inputPassword">类别描述</label>\r\n	    <div class="controls">\r\n	      <textarea id="catDes" rows="4" style="width: 406px;"></textarea>\r\n	    </div>\r\n	  </div>\r\n	  <div class="control-group">\r\n	    <div class="controls">\r\n	      <a class="btn btn-success" id="addCategory">创建</a>\r\n	    </div>\r\n	  </div>\r\n	</form>\r\n  </div>\r\n</div>'}),define("views/gallery/NewCategoryView",["jquery","underscore","backbone","models/gallery/CategoryModel","views/gallery/ImageUploadView","text!templates/gallery/newCategoryTemplate.html"],function(t,e,n,i,r,s){var a=n.View.extend({events:{"click #addCategory":"addCategory"},initialize:function(){},render:function(){var t=this,n={},i=e.template(s,n);return t.$el.html(i),this},addCategory:function(){this.category=this.options.category;var t=this.$("#catTitle").val(),e=this.$("#catDes").val(),n=new i({title:t,description:e,parentid:this.category.id},{action:"save"});n.save(null,{success:function(t){var e=new r({category:t.toJSON()});e.render()}})}});return a}),define("text!templates/gallery/galleryMainTemplate.html",[],function(){return'<link rel="stylesheet" href="/assets/css/bootstrap-image-gallery.css">\r\n<link href="/assets/js/libs/bootstrap-editable/css/bootstrap-editable.css" rel="stylesheet">\r\n<ul class="breadcrumb">\r\n  <li><a href="#/mygallery/cat/0">我的相册</a> <%= needDivider ? "<span class=\'divider\'>/</span>" : ""%></li>\r\n<%var i = 0;\r\n_.each( catParents, function(parent) { %>\r\n  <li><a href="#/mygallery/cat/<%=parent.id%>"><%=parent.title%></a> <span class="divider">/</span></li>\r\n<%});%>\r\n  <li><a href="#/mygallery/cat/<%=currentCat.id%>"><%=currentCat.title%></a></li>\r\n  <ul class="pull-right">\r\n<%if (currentCat.id != null ) {%>\r\n  <a class="btn btn-success btn-small" id="addImgs">添加照片</a>\r\n<%}%>\r\n  <a class="btn btn-success btn-small" id="addCat">创建新相册</a>\r\n  </ul>\r\n</ul>\r\n<div id="gallerymain">\r\n<%var i = 0;\r\n_.each( categories, function(category) { %>\r\n<%if ( i % 4 == 0 ) {%>\r\n<div class="row-fluid">\r\n	<ul class="thumbnails container">\r\n<%}\r\ni ++;\r\n%>\r\n	  <li class="span3"><a href="#/mygallery/cat/<%=category.id%>">\r\n	    <div class="thumbnail  <%=category.status == 0 ? "" : "status_notpublic"%>"">\r\n	      <img src="<%=category.thumbnail%>" alt="" class="img-polaroid">\r\n	      <h4><%=category.title%>\r\n	      \r\n			<li id="fat-menu" class="dropdown pull-right">\r\n			  <a href="#" id="drop3" role="button" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-th"></i><b class="caret"></b></a>\r\n			  <ul class="dropdown-menu" role="menu" aria-labelledby="drop2">\r\n			    <li><a href="#" data-id="<%=category.id%>" class="deleteCat"><i class="icon-trash"></i>删除</a></li>\r\n			    <li><a href="#" data-id="<%=category.id%>" data-status="<%=category.status%>" class="updateCatStatus"><%=category.status == 0 ? "隐藏" : "公开"%></a></li>\r\n			  </ul>\r\n			</li>\r\n			\r\n	      </h4>\r\n	      <p><%=category.description%></p>\r\n	    </div></a>\r\n	  </li>\r\n<%if ( i % 4 == 0 ) {%>\r\n	</ul>\r\n</div>\r\n<%}%>\r\n<%}); %>\r\n<%if ( i % 4 != 0 ) {%>\r\n	</ul>\r\n</div>\r\n<%}%>\r\n\r\n<div id="gallery" data-toggle="modal-gallery" data-target="#modal-gallery">\r\n\r\n<%i = 0;\r\n_.each( images, function(image) { %>\r\n<%if ( i % 4 == 0 ) {%>\r\n<div class="row-fluid">\r\n	<ul class="thumbnails container">\r\n<%}\r\ni ++;\r\n%>\r\n	  <li class="span3 ">\r\n	    <div class="thumbnail <%=image.status == 0 ? "" : "status_notpublic"%>">\r\n	      <a href="<%=image.location%>" title="<%=image.title%>" data-gallery="gallery">\r\n	         <img src="<%=image.thumbnail%>" alt="" class="img-polaroid">\r\n	      </a>\r\n	      <h5>\r\n	         <a class="imgtitle" data-url="/gallery/img/<%=image.id%>"><%=image.title == null ? "空" : image.title%></a>\r\n\r\n			<li id="fat-menu" class="dropdown pull-right">\r\n			  <a href="#" id="drop3" role="button" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-th"></i><b class="caret"></b></a>\r\n			  <ul class="dropdown-menu" role="menu" aria-labelledby="drop2">\r\n			    <li><a href="#" data-id="<%=image.id%>" class="deleteImg"><i class="icon-trash"></i>删除</a></li>\r\n			    <li><a href="#" data-id="<%=image.id%>" data-status="<%=image.status%>" class="updateImgStatus"><%=image.status == 0 ? "隐藏" : "公开"%></a></li>\r\n			  </ul>\r\n			</li>\r\n\r\n	       </h5>\r\n	      <p><a class="imgdes" data-name="" data-url="/gallery/img/<%=image.id%>"><%=image.description == null ? "空" : image.description%></a></p>\r\n	    </div>\r\n	  </li>\r\n<%if ( i % 4 == 0 ) {%>\r\n	</ul>\r\n</div>\r\n<%}%>\r\n<%}); %>\r\n<%if ( i % 4 != 0 ) {%>\r\n	</ul>\r\n</div>\r\n<%}%>\r\n</div>\r\n\r\n<% if ( totolPages > 1 ) { %>\r\n\r\n	<div class="pagination pagination-centered">\r\n	  <ul>\r\n	    <li><a href="#">上一页</a></li>\r\n	<%for ( var i = 1; i <= totolPages; i ++ ) {%>\r\n	    <li class="<%=currentPage == i ? "active" : "disabled"%>">\r\n	       <a href="#"><%=i%></a>\r\n	    </li>\r\n	<%}%>\r\n	    <li><a href="#">下一页</a></li>\r\n	  </ul>\r\n	</div>\r\n<%}%>\r\n\r\n</div>\r\n\r\n<div id="modal-gallery" class="modal modal-gallery hide fade" tabindex="-1">\r\n    <div class="modal-header">\r\n        <a class="close" data-dismiss="modal">&times;</a>\r\n        <h3 class="modal-title"></h3>\r\n    </div>\r\n    <div class="modal-body"><div class="modal-image"></div></div>\r\n    <div class="modal-footer">\r\n 		<button id="toggle-fullscreen" class="btn btn-primary" data-toggle="button">全屏</button>\r\n        <a class="btn modal-download" target="_blank">\r\n            <i class="icon-download"></i>\r\n            <span>下载</span>\r\n        </a>\r\n        <a class="btn btn-success modal-play modal-slideshow" data-slideshow="5000">\r\n            <i class="icon-play icon-white"></i>\r\n            <span>幻灯片播放</span>\r\n        </a>\r\n        <a class="btn btn-info modal-prev">\r\n            <i class="icon-arrow-left icon-white"></i>\r\n            <span>上一张</span>\r\n        </a>\r\n        <a class="btn btn-primary modal-next">\r\n            <span>下一张</span>\r\n            <i class="icon-arrow-right icon-white"></i>\r\n        </a>\r\n    </div>\r\n</div>'}),define("text!templates/gallery/galleryHomeTemplate.html",[],function(){return'<%if ( navBar ) {%>\r\n<ul class="breadcrumb">\r\n  <li><a href="#/gallery/cat/0">相册</a><%= needDivider ? "<span class=\'divider\'>/</span>" : ""%></li>\r\n<%var i = 0;\r\n_.each( catParents, function(parent) { %>\r\n  <li><a href="#/gallery/cat/<%=parent.id%>"><%=parent.title%></a><span class="divider">/</span></li>\r\n<%});%>\r\n  <li><a href="#/gallery/cat/<%=currentCat.id%>"><%=currentCat.title%></a></li>\r\n</ul>\r\n<%}%>\r\n<div id="gallerymain">\r\n<%var i = 0;\r\n_.each( categories, function(category) { %>\r\n<%if ( i % 4 == 0 ) {%>\r\n<div class="row-fluid">\r\n	<ul class="thumbnails container">\r\n<%}\r\ni ++;\r\n%>\r\n	  <li class="span3">\r\n	    <div class="thumbnail align_center pic_frame">\r\n	      <div class="pic_wrapper">\r\n		      <a href="#/gallery/cat/<%=category.id%>"><img src="<%=category.thumbnail%>" alt=""></a>\r\n		      <div class="pic_title_box">\r\n		         <div class="pic_title">\r\n		         <%=category.title%><br>\r\n		         <%=category.description%>\r\n		         </div>\r\n		      </div>\r\n		  </div>\r\n	    </div>\r\n	  </li>\r\n<%if ( i % 4 == 0 ) {%>\r\n	</ul>\r\n</div>\r\n<%}%>\r\n<%}); %>\r\n<%if ( i % 4 != 0 ) {%>\r\n	</ul>\r\n</div>\r\n<%}%>\r\n\r\n<div id="gallery" data-toggle="modal-gallery" data-target="#modal-gallery">\r\n\r\n<%i = 0;\r\n_.each( images, function(image) { %>\r\n<%if ( i % 4 == 0 ) {%>\r\n<div class="row-fluid">\r\n	<ul class="thumbnails container">\r\n<%}\r\ni ++;\r\n%>\r\n	  <li class="span3">\r\n	    <div class="thumbnail align_center pic_frame">\r\n	      <div class="pic_wrapper">\r\n		      <a href="#gallery/img/<%=image.id%>" title="<%=image.title%>" data-id="<%=image.id%>">\r\n		         <img src="<%=image.thumbnail%>" alt="">\r\n		      </a>\r\n		      <div class="pic_title_box">\r\n		         <div class="pic_title">\r\n		         <%=image.title == null ? "" : image.title%><br>\r\n		         <%=image.description == null ? "" : image.description%>\r\n		         </div>\r\n		      </div>\r\n		   </div>\r\n		   <div class="pic_controls">\r\n\r\n		   </div>\r\n	    </div>\r\n    \r\n	  </li>\r\n<%if ( i % 4 == 0 ) {%>\r\n	</ul>\r\n</div>\r\n<%}%>\r\n<%}); %>\r\n<%if ( i % 4 != 0 ) {%>\r\n	</ul>\r\n</div>\r\n<%}%>\r\n</div>\r\n\r\n<% if ( totolPages > 1 ) { %>\r\n\r\n	<div class="pagination pagination-centered">\r\n	  <ul>\r\n	    <li><a href="#" id="prePage">上一页</a></li>\r\n	<%for ( var i = 1; i <= totolPages; i ++ ) {%>\r\n	    <li class="<%=currentPage == i ? "active" : "disabled"%>">\r\n	       <a href="#"><%=i%></a>\r\n	    </li>\r\n	<%}%>\r\n	    <li><a href="#" id="nextPage">下一页</a></li>\r\n	  </ul>\r\n	</div>\r\n<%}%>\r\n\r\n</div>\r\n'}),define("bootstrap-editable",["jquery","backbone"],function(){return function(t){var e=function(e,n){this.options=t.extend({},t.fn.editableform.defaults,n),this.$div=t(e),this.options.scope||(this.options.scope=this)};e.prototype={constructor:e,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value)},initTemplate:function(){this.$form=t(t.fn.editableform.template)},initButtons:function(){this.$form.find(".editable-buttons").append(t.fn.editableform.buttons)},render:function(){this.$loading=t(t.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.$div.triggerHandler("rendering"),this.initInput(),this.input.prerender(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),t.when(this.input.render()).then(t.proxy(function(){this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(t.proxy(this.cancel,this)),this.input.error?(this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(t){t.preventDefault()})):(this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled"),this.input.value2input(this.value),this.$form.submit(t.proxy(this.submit,this))),this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var t,e;this.$form?(t=this.$form.outerWidth(),e=this.$form.outerHeight(),t&&this.$loading.width(t),e&&this.$loading.height(e),this.$form.hide()):(t=this.$loading.parent().width(),t&&this.$loading.width(t)),this.$loading.show()},showForm:function(t){this.$loading.hide(),this.$form.show(),t!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(e){var n,i=this.$form.find(".control-group"),r=this.$form.find(".editable-error-block");if(e===!1)i.removeClass(t.fn.editableform.errorGroupClass),r.removeClass(t.fn.editableform.errorBlockClass).empty().hide();else{if(e){n=e.split("\n");for(var s=0;n.length>s;s++)n[s]=t("<div>").text(n[s]).html();e=n.join("<br>")}i.addClass(t.fn.editableform.errorGroupClass),r.addClass(t.fn.editableform.errorBlockClass).html(e).show()}},submit:function(e){e.stopPropagation(),e.preventDefault();var n,i=this.input.input2value();return(n=this.validate(i))?(this.error(n),this.showForm(),void 0):this.options.savenochange||this.input.value2str(i)!=this.input.value2str(this.value)?(t.when(this.save(i)).done(t.proxy(function(t){var e="function"==typeof this.options.success?this.options.success.call(this.options.scope,t,i):null;return e===!1?(this.error(!1),this.showForm(!1),void 0):"string"==typeof e?(this.error(e),this.showForm(),void 0):(e&&"object"==typeof e&&e.hasOwnProperty("newValue")&&(i=e.newValue),this.error(!1),this.value=i,this.$div.triggerHandler("save",{newValue:i,response:t}),void 0)},this)).fail(t.proxy(function(t){this.error("string"==typeof t?t:t.responseText||t.statusText||"Unknown error!"),this.showForm()},this)),void 0):(this.$div.triggerHandler("nochange"),void 0)},save:function(e){var n=this.input.value2submit(e);this.options.pk=t.fn.editableutils.tryParseJson(this.options.pk,!0);var i,r="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,s=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&r));return s?(this.showLoading(),i={name:this.options.name||"",value:n,pk:r},"function"==typeof this.options.params?i=this.options.params.call(this.options.scope,i):(this.options.params=t.fn.editableutils.tryParseJson(this.options.params,!0),t.extend(i,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,i):t.ajax(t.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(t){return void 0===t&&(t=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,t):void 0},option:function(t,e){t in this.options&&(this.options[t]=e),"value"===t&&this.setValue(e)},setValue:function(t,e){this.value=e?this.input.str2value(t):t,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},t.fn.editableform=function(n){var i=arguments;return this.each(function(){var r=t(this),s=r.data("editableform"),a="object"==typeof n&&n;s||r.data("editableform",s=new e(this,a)),"string"==typeof n&&s[n].apply(s,Array.prototype.slice.call(i,1))})},t.fn.editableform.Constructor=e,t.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,send:"auto",validate:null,success:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},t.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',t.fn.editableform.loading='<div class="editableform-loading"></div>',t.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',t.fn.editableform.errorGroupClass=null,t.fn.editableform.errorBlockClass="editable-error"}(window.jQuery),function(t){t.fn.editableutils={inherit:function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superclass=e.prototype},setCursorPosition:function(t,e){if(t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},tryParseJson:function(t,e){if("string"==typeof t&&t.length&&t.match(/^[\{\[].*[\}\]]$/))if(e)try{t=Function("return "+t)()}catch(n){}finally{return t}else t=Function("return "+t)();return t},sliceObj:function(e,n,i){var r,s,a={};if(!t.isArray(n)||!n.length)return a;for(var o=0;n.length>o;o++)r=n[o],e.hasOwnProperty(r)&&(a[r]=e[r]),i!==!0&&(s=r.toLowerCase(),e.hasOwnProperty(s)&&(a[r]=e[s]));return a},getConfigData:function(e){var n={};return t.each(e.data(),function(t,e){("object"!=typeof e||e&&"object"==typeof e&&(e.constructor===Object||e.constructor===Array))&&(n[t]=e)}),n},objectKeys:function(t){if(Object.keys)return Object.keys(t);if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n},escape:function(e){return t("<div>").text(e).html()},itemsByValue:function(e,n,i){if(!n||null===e)return[];i=i||"value";var r=t.isArray(e),s=[],a=this;return t.each(n,function(n,o){o.children?s=s.concat(a.itemsByValue(e,o.children)):r?t.grep(e,function(t){return t==(o&&"object"==typeof o?o[i]:o)}).length&&s.push(o):e==(o&&"object"==typeof o?o[i]:o)&&s.push(o)}),s},createInput:function(e){var n,i,r,s=e.type;return"date"===s&&("inline"===e.mode?t.fn.editabletypes.datefield?s="datefield":t.fn.editabletypes.dateuifield&&(s="dateuifield"):t.fn.editabletypes.date?s="date":t.fn.editabletypes.dateui&&(s="dateui"),"date"!==s||t.fn.editabletypes.date||(s="combodate")),"wysihtml5"!==s||t.fn.editabletypes[s]||(s="textarea"),"function"==typeof t.fn.editabletypes[s]?(n=t.fn.editabletypes[s],i=this.sliceObj(e,this.objectKeys(n.defaults)),r=new n(i)):(t.error("Unknown type: "+s),!1)}}}(window.jQuery),function(t){var e=function(t,e){this.init(t,e)},n=function(t,e){this.init(t,e)};e.prototype={containerName:null,innerCss:null,init:function(n,i){this.$element=t(n),this.options=t.extend({},t.fn.editableContainer.defaults,i),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.$element.on("destroyed",t.proxy(function(){this.destroy()},this)),t(document).data("editable-handlers-attached")||(t(document).on("keyup.editable",function(e){27===e.which&&t(".editable-open").editableContainer("hide")}),t(document).on("click.editable",function(n){var i,r=t(n.target),s=[".editable-container",".ui-datepicker-header",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];for(i=0;s.length>i;i++)if(r.is(s[i])||r.parents(s[i]).length)return;e.prototype.closeOthers(n.target)}),t(document).data("editable-handlers-attached",!0))},splitOptions:function(){this.containerOptions={},this.formOptions={};var e=t.fn[this.containerName].defaults;for(var n in this.options)n in e?this.containerOptions[n]=this.options[n]:this.formOptions[n]=this.options[n]},tip:function(){return this.container()?this.container().$tip:null},container:function(){return this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:t.proxy(this.save,this),nochange:t.proxy(function(){this.hide("nochange")},this),cancel:t.proxy(function(){this.hide("cancel")},this),show:t.proxy(this.setPosition,this),rendering:t.proxy(this.setPosition,this),resize:t.proxy(this.setPosition,this),rendered:t.proxy(function(){this.$element.triggerHandler("shown")},this)}).editableform("render")},show:function(e){this.$element.addClass("editable-open"),e!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass("editable-container"),this.$form,this.$form=t("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(t){this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")&&(this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",t))},innerShow:function(){},innerHide:function(){},toggle:function(t){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(t)},setPosition:function(){},save:function(t,e){this.$element.triggerHandler("save",e),this.hide("save")},option:function(t,e){this.options[t]=e,t in this.containerOptions?(this.containerOptions[t]=e,this.setContainerOption(t,e)):(this.formOptions[t]=e,this.$form&&this.$form.editableform("option",t,e))},setContainerOption:function(t,e){this.call("option",t,e)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(e){t(".editable-open").each(function(n,i){if(i!==e&&!t(i).find(e).length){var r=t(i),s=r.data("editableContainer");s&&("cancel"===s.options.onblur?r.data("editableContainer").hide("onblur"):"submit"===s.options.onblur&&r.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},t.fn.editableContainer=function(i){var r=arguments;return this.each(function(){var s=t(this),a="editableContainer",o=s.data(a),l="object"==typeof i&&i,u="inline"===l.mode?n:e;o||s.data(a,o=new u(this,l)),"string"==typeof i&&o[i].apply(o,Array.prototype.slice.call(r,1))})},t.fn.editableContainer.Popup=e,t.fn.editableContainer.Inline=n,t.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:"fast",mode:"popup"},jQuery.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}}(window.jQuery),function(t){t.extend(t.fn.editableContainer.Inline.prototype,t.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",initContainer:function(){this.$tip=t("<span></span>").addClass("editable-inline"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,t.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.editable.defaults,n,t.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init()};e.prototype={constructor:e,init:function(){var e,n=!1;this.options.name=this.options.name||this.$element.attr("id"),this.input=t.fn.editableutils.createInput(this.options),this.input&&(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(t.trim(this.$element.html())),n=!0):(this.options.value=t.fn.editableutils.tryParseJson(this.options.value,!0),this.value="string"==typeof this.options.value?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",t.proxy(function(t){if(t.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var e="click"!==this.options.toggle;this.toggle(e)}},this))):this.$element.attr("tabindex",-1),e=!n&&null!==this.value&&void 0!==this.value,e&="always"===this.options.autotext||"auto"===this.options.autotext&&!this.$element.text().length,t.when(e?this.render():!0).then(t.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this)))},initLive:function(){var e=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",e,t.proxy(function(e){var n=t(e.target);n.data("editable")||n.editable(this.options).trigger(e)},this))},render:function(t){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,t):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,t):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(e,n){return e&&"object"==typeof e?(t.each(e,t.proxy(function(e,n){this.option(t.trim(e),n)},this)),void 0):(this.options[e]=n,"disabled"===e?n?this.disable():this.enable():("value"===e&&this.setValue(n),this.container&&this.container.option(e,n),this.input.option&&this.input.option(e,n),void 0))},handleEmpty:function(e){this.options.display!==!1&&(this.isEmpty=void 0!==e?e:""===t.trim(this.$element.text()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.text(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(e){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var n=t.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(n),this.$element.on("save.internal",t.proxy(this.save,this)),this.container=this.$element.data("editableContainer")
}this.container.show(e)}},hide:function(){this.container&&this.container.hide()},toggle:function(t){this.container&&this.container.tip().is(":visible")?this.hide():this.show(t)},save:function(t,e){if(this.options.unsavedclass){var n=!1;n=n||"function"==typeof this.options.url,n=n||this.options.display===!1,n=n||void 0!==e.response,n=n||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(e.newValue),n?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}this.setValue(e.newValue,!1,e.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(e,n,i){this.value=n?this.input.str2value(e):e,this.container&&this.container.option("value",this.value),t.when(this.render(i)).then(t.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.container&&this.container.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable"),this.$element.removeClass("editable-open"),this.$element.removeData("editable")}},t.fn.editable=function(n){var i={},r=arguments,s="editable";switch(n){case"validate":return this.each(function(){var e,n=t(this),r=n.data(s);r&&(e=r.validate())&&(i[r.options.name]=e)}),i;case"getValue":return this.each(function(){var e=t(this),n=e.data(s);n&&void 0!==n.value&&null!==n.value&&(i[n.options.name]=n.input.value2submit(n.value))}),i;case"submit":var a,o=arguments[1]||{},l=this,u=this.editable("validate");return t.isEmptyObject(u)?(a=this.editable("getValue"),o.data&&t.extend(a,o.data),t.ajax(t.extend({url:o.url,data:a,type:"POST"},o.ajaxOptions)).success(function(t){"function"==typeof o.success&&o.success.call(l,t,o)}).error(function(){"function"==typeof o.error&&o.error.apply(l,arguments)})):"function"==typeof o.error&&o.error.call(l,u),this}return this.each(function(){var i=t(this),a=i.data(s),o="object"==typeof n&&n;a||i.data(s,a=new e(this,o)),"string"==typeof n&&a[n].apply(a,Array.prototype.slice.call(r,1))})},t.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null}}(window.jQuery),function(t){t.fn.editabletypes={};var e=function(){};e.prototype={init:function(e,n,i){this.type=e,this.options=t.extend({},i,n)},prerender:function(){this.$tpl=t(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(e,n){t(n).text(e)},html2value:function(e){return t("<div>").html(e).text()},value2str:function(t){return t},str2value:function(t){return t},value2submit:function(t){return t},value2input:function(t){this.$input.val(t)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(e){return t("<div>").text(e).html()},autosubmit:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(t){this.options[t]&&this.$input.attr(t,this.options[t])},option:function(t,e){this.options[t]=e}},e.defaults={tpl:"",inputclass:"input-medium"},t.extend(t.fn.editabletypes,{abstractinput:e})}(window.jQuery),function(t){var e=function(){};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){var e=t.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),e.resolve()},function(){this.error=this.options.sourceError,e.resolve()}),e.promise()},html2value:function(){return null},value2html:function(e,n,i,r){var s=t.Deferred(),a=function(){"function"==typeof i?i.call(n,e,this.sourceData,r):this.value2htmlFinal(e,n),s.resolve()};return null===e?a.call(this):this.onSourceReady(a,function(){s.resolve()}),s.promise()},onSourceReady:function(e,n){if(t.isArray(this.sourceData))return e.call(this),void 0;try{this.options.source=t.fn.editableutils.tryParseJson(this.options.source,!1)}catch(i){return n.call(this),void 0}if("string"==typeof this.options.source){if(this.options.sourceCache){var r,s=this.options.source;if(t(document).data(s)||t(document).data(s,{}),r=t(document).data(s),r.loading===!1&&r.sourceData)return this.sourceData=r.sourceData,this.doPrepend(),e.call(this),void 0;if(r.loading===!0)return r.callbacks.push(t.proxy(function(){this.sourceData=r.sourceData,this.doPrepend(),e.call(this)},this)),r.err_callbacks.push(t.proxy(n,this)),void 0;r.loading=!0,r.callbacks=[],r.err_callbacks=[]}t.ajax({url:this.options.source,type:"get",cache:!1,dataType:"json",success:t.proxy(function(i){r&&(r.loading=!1),this.sourceData=this.makeArray(i),t.isArray(this.sourceData)?(r&&(r.sourceData=this.sourceData,t.each(r.callbacks,function(){this.call()})),this.doPrepend(),e.call(this)):(n.call(this),r&&t.each(r.err_callbacks,function(){this.call()}))},this),error:t.proxy(function(){n.call(this),r&&(r.loading=!1,t.each(r.err_callbacks,function(){this.call()}))},this)})}else this.sourceData=t.isFunction(this.options.source)?this.makeArray(this.options.source()):this.makeArray(this.options.source),t.isArray(this.sourceData)?(this.doPrepend(),e.call(this)):n.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(t.isArray(this.prependData)||(this.options.prepend=t.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData="function"==typeof this.options.prepend?this.makeArray(this.options.prepend()):this.makeArray(this.options.prepend)),t.isArray(this.prependData)&&t.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(e){var n,i,r,s,a=[];if(!e||"string"==typeof e)return null;if(t.isArray(e)){s=function(t,e){return i={value:t,text:e},n++>=2?!1:void 0};for(var o=0;e.length>o;o++)r=e[o],"object"==typeof r?(n=0,t.each(r,s),1===n?a.push(i):n>1&&(r.children&&(r.children=this.makeArray(r.children)),a.push(r))):a.push({value:r,text:r})}else t.each(e,function(t,e){a.push({value:t,text:e})});return a},option:function(t,e){this.options[t]=e,"source"===t&&(this.sourceData=null),"prepend"===t&&(this.prependData=null)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0}),t.fn.editabletypes.list=e}(window.jQuery),function(t){var e=function(t){this.init("text",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),t.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=t('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",20).keyup(t.proxy(this.toggleClear,this)).parent().css("position","relative"),this.$clear.click(t.proxy(this.clear,this)))},postrender:function(){if(this.$clear){var t=this.$input.outerHeight()||20,e=(t-this.$clear.height())/2;3>e&&(e=3),this.$clear.css({top:e,right:e})}},toggleClear:function(){this.$clear&&(this.$input.val().length?this.$clear.show():this.$clear.hide())},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),t.fn.editabletypes.text=e}(window.jQuery),function(t){var e=function(t){this.init("textarea",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(e){e.ctrlKey&&13===e.which&&t(this).closest("form").submit()})},value2html:function(e,n){var i,r="";if(e){i=e.split("\n");for(var s=0;i.length>s;s++)i[s]=t("<div>").text(i[s]).html();r=i.join("<br>")}t(n).html(r)},html2value:function(e){if(!e)return"";for(var n=RegExp(String.fromCharCode(10),"g"),i=e.split(/<br\s*\/?>/i),r=0;i.length>r;r++){var s=t("<div>").html(i[r]).text();s=s.replace(n,""),i[r]=s}return i.join("\n")},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),t.fn.editabletypes.textarea=e}(window.jQuery),function(t){var e=function(t){this.init("select",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input.empty();var e=function(n,i){if(t.isArray(i))for(var r=0;i.length>r;r++)i[r].children?n.append(e(t("<optgroup>",{label:i[r].text}),i[r].children)):n.append(t("<option>",{value:i[r].value}).text(i[r].text));return n};e(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(e){13===e.which&&t(this).closest("form").submit()})},value2htmlFinal:function(e,n){var i="",r=t.fn.editableutils.itemsByValue(e,this.sourceData);r.length&&(i=r[0].text),t(n).text(i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),t.fn.editabletypes.select=e}(window.jQuery),function(t){var e=function(t){this.init("checklist",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){var e;if(this.$tpl.empty(),t.isArray(this.sourceData)){for(var n=0;this.sourceData.length>n;n++)e=t("<label>").append(t("<input>",{type:"checkbox",value:this.sourceData[n].value})).append(t("<span>").text(" "+this.sourceData[n].text)),t("<div>").append(e).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(e){return t.isArray(e)?e.sort().join(t.trim(this.options.separator)):""},str2value:function(e){var n,i=null;return"string"==typeof e&&e.length?(n=RegExp("\\s*"+t.trim(this.options.separator)+"\\s*"),i=e.split(n)):t.isArray(e)&&(i=e),i},value2input:function(e){this.$input.prop("checked",!1),t.isArray(e)&&e.length&&this.$input.each(function(n,i){var r=t(i);t.each(e,function(t,e){r.val()==e&&r.prop("checked",!0)})})},input2value:function(){var e=[];return this.$input.filter(":checked").each(function(n,i){e.push(t(i).val())}),e},value2htmlFinal:function(e,n){var i=[],r=t.fn.editableutils.itemsByValue(e,this.sourceData);r.length?(t.each(r,function(e,n){i.push(t.fn.editableutils.escape(n.text))}),t(n).html(i.join("<br>"))):t(n).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(e){13===e.which&&t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),t.fn.editabletypes.checklist=e}(window.jQuery),function(t){var e=function(t){this.init("password",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{value2html:function(e,n){e?t(n).text("[hidden]"):t(n).empty()},html2value:function(){return null}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),t.fn.editabletypes.password=e}(window.jQuery),function(t){var e=function(t){this.init("email",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),t.fn.editabletypes.email=e}(window.jQuery),function(t){var e=function(t){this.init("url",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),t.fn.editabletypes.url=e}(window.jQuery),function(t){var e=function(t){this.init("tel",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),t.fn.editabletypes.tel=e}(window.jQuery),function(t){var e=function(t){this.init("number",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{render:function(){e.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),t.fn.editabletypes.number=e}(window.jQuery),function(t){var e=function(t){this.init("range",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.number),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){t(this).siblings("output").text(t(this).val())})},activate:function(){this.$input.focus()}}),e.defaults=t.extend({},t.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),t.fn.editabletypes.range=e}(window.jQuery),function(t){var e=function(n){this.init("select2",n,e.defaults),n.select2=n.select2||{};var i=this,r={placeholder:n.placeholder};this.isMultiple=n.select2.tags||n.select2.multiple,n.select2.tags||(n.source&&(r.data=n.source),r.initSelection=function(e,n){var s=i.str2value(e.val()),a=t.fn.editableutils.itemsByValue(s,r.data,"id");t.isArray(a)&&a.length&&!i.isMultiple&&(a=a[0]),n(a)}),this.options.select2=t.extend({},e.defaults.select2,r,n.select2)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.$input.select2(this.options.select2),this.isMultiple&&this.$input.on("change",function(){t(this).closest("form").parent().triggerHandler("resize")})},value2html:function(e,n){var i,r="";this.$input?i=this.$input.select2("data"):this.options.select2.tags?i=e:this.options.select2.data&&(i=t.fn.editableutils.itemsByValue(e,this.options.select2.data,"id")),t.isArray(i)?(r=[],t.each(i,function(t,e){r.push(e&&"object"==typeof e?e.text:e)})):i&&(r=i.text),r=t.isArray(r)?r.join(this.options.viewseparator):r,t(n).text(r)},html2value:function(t){return this.options.select2.tags?this.str2value(t,this.options.viewseparator):null},value2input:function(t){this.$input.val(t).trigger("change")},input2value:function(){return this.$input.select2("val")},str2value:function(e,n){if("string"!=typeof e||!this.isMultiple)return e;n=n||this.options.select2.separator||t.fn.select2.defaults.separator;var i,r,s;if(null===e||1>e.length)return null;for(i=e.split(n),r=0,s=i.length;s>r;r+=1)i[r]=t.trim(i[r]);return i}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),t.fn.editabletypes.select2=e}(window.jQuery),function(t){var e=function(e,n){return this.$element=t(e),this.$element.is("input")?(this.options=t.extend({},t.fn.combodate.defaults,n,this.$element.data()),this.init(),void 0):(t.error("Combodate should be applied to INPUT element"),void 0)};e.prototype={constructor:e,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=t('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",t.proxy(function(){this.$element.val(this.getValue())},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template;return t.each(this.map,function(t,n){n=n[0];var i=RegExp(n+"+"),r=n.length>1?n.substring(1,2):n;e=e.replace(i,"{"+r+"}")}),e=e.replace(/ /g,"&nbsp;"),t.each(this.map,function(t,n){n=n[0];var i=n.length>1?n.substring(1,2):n;e=e.replace("{"+i+"}",'<select class="'+t+'"></select>')}),e},initCombos:function(){var e=this;t.each(this.map,function(t){var n,i,r=e.$widget.find("."+t);r.length&&(e["$"+t]=r,n="fill"+t.charAt(0).toUpperCase()+t.slice(1),i=e[n](),e["$"+t].html(e.renderItems(i)))})},initItems:function(t){var e=[];if("name"===this.options.firstItem){var n="function"==typeof moment.relativeTime[t]?moment.relativeTime[t](1,!0,t,!1):moment.relativeTime[t];n=n.split(" ").reverse()[0],e.push(["",n])}else"empty"===this.options.firstItem&&e.push(["",""]);return e},renderItems:function(t){for(var e=[],n=0;t.length>n;n++)e.push('<option value="'+t[n][0]+'">'+t[n][1]+"</option>");return e.join("\n")},fillDay:function(){var t,e,n=this.initItems("d"),i=-1!==this.options.template.indexOf("DD");for(e=1;31>=e;e++)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillMonth:function(){var t,e,n=this.initItems("M"),i=-1!==this.options.template.indexOf("MMMM"),r=-1!==this.options.template.indexOf("MMM"),s=-1!==this.options.template.indexOf("MM");for(e=0;11>=e;e++)t=i?moment.months[e]:r?moment.monthsShort[e]:s?this.leadZero(e+1):e+1,n.push([e,t]);return n},fillYear:function(){var t,e,n=this.initItems("y"),i=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=i?e:(e+"").substring(2),n.push([e,t]);return n},fillHour:function(){var t,e,n=this.initItems("h"),i=-1!==this.options.template.indexOf("h"),r=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),s=i?12:23;for(e=0;s>=e;e++)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillMinute:function(){var t,e,n=this.initItems("m"),i=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillSecond:function(){var t,e,n=this.initItems("s"),i=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return e},getValue:function(e){var n,i={},r=this,s=!1;return t.each(this.map,function(t){if("ampm"!==t){var e="day"===t?1:0;return i[t]=r["$"+t]?parseInt(r["$"+t].val(),10):e,isNaN(i[t])?(s=!0,!1):void 0}}),s?"":(this.$ampm&&(i.hour="am"===this.$ampm.val()?i.hour:i.hour+12,24===i.hour&&(i.hour=0)),n=moment([i.year,i.month,i.day,i.hour,i.minute,i.second]),this.highlight(n),e=void 0===e?this.options.format:e,null===e?n.isValid()?n:null:n.isValid()?n.format(e):"")},setValue:function(e){if(e){var n="string"==typeof e?moment(e,this.options.format):moment(e),i=this,r={};n.isValid()&&(t.each(this.map,function(t,e){"ampm"!==t&&(r[t]=n[e[1]]())}),this.$ampm&&(r.hour>12?(r.hour-=12,r.ampm="pm"):r.ampm="am"),t.each(r,function(t,e){i["$"+t]&&i["$"+t].val(e)}),this.$element.val(n.format(this.options.format)))}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},t.fn.combodate=function(n){var i,r=Array.apply(null,arguments);return r.shift(),"getValue"===n&&this.length&&(i=this.eq(0).data("combodate"))?i.getValue.apply(i,r):this.each(function(){var i=t(this),s=i.data("combodate"),a="object"==typeof n&&n;s||i.data("combodate",s=new e(this,a)),"string"==typeof n&&"function"==typeof s[n]&&s[n].apply(s,r)})},t.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null}}(window.jQuery),function(t){var e=function(n){this.init("combodate",n,e.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),this.options.combodate=t.extend({},e.defaults.combodate,n.combodate,{format:this.options.format,template:this.options.template})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.$input.combodate(this.options.combodate)},value2html:function(e,n){var i=e?e.format(this.options.viewformat):"";t(n).text(i)},html2value:function(t){return t?moment(t,this.options.viewformat):null},value2str:function(t){return t?t.format(this.options.format):""},str2value:function(t){return t?moment(t,this.options.format):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.combodate("setValue",t)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),t.fn.editabletypes.combodate=e}(window.jQuery),function(t){t.extend(t.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=t(t.fn.editableform.template),this.$form.find(".editable-error-block").addClass("help-block")}}),t.fn.editableform.buttons='<button type="submit" class="btn btn-primary editable-submit"><i class="icon-ok icon-white"></i></button><button type="button" class="btn editable-cancel"><i class="icon-remove"></i></button>',t.fn.editableform.errorGroupClass="error",t.fn.editableform.errorBlockClass=null}(window.jQuery),function(t){t.extend(t.fn.editableContainer.Popup.prototype,{containerName:"popover",innerCss:t(t.fn.popover.defaults.template).find("p").length?".popover-content p":".popover-content",initContainer:function(){t.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:t.fn.popover.defaults.template});var e;this.$element.data("template")&&(e=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),e&&this.$element.data("template",e)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(t,e){this.container().options[t]=e},setPosition:function(){(function(){var t,e,n,i,r,s,a=this.tip();switch(r="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,t=/in/.test(r),a.removeClass("top right bottom left").css({top:0,left:0,display:"block"}),e=this.getPosition(t),n=a[0].offsetWidth,i=a[0].offsetHeight,t?r.split(" ")[1]:r){case"bottom":s={top:e.top+e.height,left:e.left+e.width/2-n/2};break;case"top":s={top:e.top-i,left:e.left+e.width/2-n/2};break;case"left":s={top:e.top+e.height/2-i/2,left:e.left-n};break;case"right":s={top:e.top+e.height/2-i/2,left:e.left+e.width}}a.offset(s).addClass(r).addClass("in")}).call(this.container())}})}(window.jQuery),function(t){var e=function(t){this.init("date",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,n){this.options.viewformat||(this.options.viewformat=this.options.format),this.options.datepicker=t.extend({},n.datepicker,e.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=t.fn.datepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.datepicker(this.options.datepicker),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,n){var i=t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):"";e.superclass.value2html(i,n)},html2value:function(t){return t?this.dpg.parseDate(t,this.parsedViewFormat,this.options.datepicker.language):null},value2str:function(t){return t?this.dpg.formatDate(t,this.parsedFormat,this.options.datepicker.language):""},str2value:function(t){return t?this.dpg.parseDate(t,this.parsedFormat,this.options.datepicker.language):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.datepicker("update",t)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active")},autosubmit:function(){this.$input.on("changeDate",function(){var e=t(this).closest("form");setTimeout(function(){e.submit()},200)})}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.date=e}(window.jQuery),function(t){var e=function(t){this.init("datefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.date),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datepicker("update")},this))},value2input:function(t){this.$input.val(t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.datepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,autoclose:!0}}),t.fn.editabletypes.datefield=e}(window.jQuery),!function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}var n=function(e,n){var s=this;switch(this.element=t(e),this.language=n.language||this.element.data("date-language")||"en",this.language=this.language in i?this.language:"en",this.isRTL=i[this.language].rtl||!1,this.format=r.parseFormat(n.format||this.element.data("date-format")||"mm/dd/yyyy"),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this._attachEvents(),this.forceParse=!0,"forceParse"in n?this.forceParse=n.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=t(r.template).appendTo(this.isInline?this.element:"body").on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.isInline?this.picker.addClass("datepicker-inline"):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.isRTL&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),t(document).on("mousedown",function(e){0===t(e.target).closest(".datepicker").length&&s.hide()}),this.autoclose=!1,"autoclose"in n?this.autoclose=n.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in n?this.keyboardNavigation=n.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.viewMode=this.startViewMode=0,n.startView||this.element.data("date-start-view")){case 2:case"decade":this.viewMode=this.startViewMode=2;break;case 1:case"year":this.viewMode=this.startViewMode=1}this.todayBtn=n.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=n.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(n.weekStart||this.element.data("date-weekstart")||i[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(n.startDate||this.element.data("date-startdate")),this.setEndDate(n.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(n.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};n.prototype={constructor:n,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]];for(var e,n,i=0;this._events.length>i;i++)e=this._events[i][0],n=this._events[i][1],e.on(n)},_detachEvents:function(){for(var t,e,n=0;this._events.length>n;n++)t=this._events[n][0],e=this._events[n][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.element.trigger({type:"show",date:this.date})},hide:function(){this.isInline||(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.element.trigger({type:"hide",date:this.date}))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.element.data().datepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t))},getFormattedDate:function(t){return void 0===t&&(t=this.format),r.formatDate(this.date,t,this.language)},setStartDate:function(t){this.startDate=t||-1/0,this.startDate!==-1/0&&(this.startDate=r.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,1/0!==this.endDate&&(this.endDate=r.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=parseInt(this.element.parents().filter(function(){return"auto"!=t(this).css("z-index")
}).first().css("z-index"))+10,n=this.component?this.component.offset():this.element.offset(),i=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:n.top+i,left:n.left,zIndex:e})}},update:function(){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),this.date=r.parseDate(t,this.format,this.language),e&&this.setValue();var n=this.viewDate;this.viewDate=this.startDate>this.date?new Date(this.startDate):this.date>this.endDate?new Date(this.endDate):new Date(this.date),n&&n.getTime()!=this.viewDate.getTime()&&this.element.trigger({type:"changeDate",date:this.viewDate}),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";this.weekStart+7>t;)e+='<th class="dow">'+i[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+i[this.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},fill:function(){var n=new Date(this.viewDate),s=n.getUTCFullYear(),a=n.getUTCMonth(),o=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,l=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,u=1/0!==this.endDate?this.endDate.getUTCFullYear():1/0,c=1/0!==this.endDate?this.endDate.getUTCMonth():1/0,d=this.date&&this.date.valueOf(),h=new Date;this.picker.find(".datepicker-days thead th:eq(1)").text(i[this.language].months[a]+" "+s),this.picker.find("tfoot th.today").text(i[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=e(s,a-1,28,0,0,0,0),f=r.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(f),p.setUTCDate(f-(p.getUTCDay()-this.weekStart+7)%7);var m=new Date(p);m.setUTCDate(m.getUTCDate()+42),m=m.valueOf();for(var g,v=[];m>p.valueOf();)p.getUTCDay()==this.weekStart&&v.push("<tr>"),g="",s>p.getUTCFullYear()||p.getUTCFullYear()==s&&a>p.getUTCMonth()?g+=" old":(p.getUTCFullYear()>s||p.getUTCFullYear()==s&&p.getUTCMonth()>a)&&(g+=" new"),this.todayHighlight&&p.getUTCFullYear()==h.getFullYear()&&p.getUTCMonth()==h.getMonth()&&p.getUTCDate()==h.getDate()&&(g+=" today"),d&&p.valueOf()==d&&(g+=" active"),(this.startDate>p.valueOf()||p.valueOf()>this.endDate||-1!==t.inArray(p.getUTCDay(),this.daysOfWeekDisabled))&&(g+=" disabled"),v.push('<td class="day'+g+'">'+p.getUTCDate()+"</td>"),p.getUTCDay()==this.weekEnd&&v.push("</tr>"),p.setUTCDate(p.getUTCDate()+1);this.picker.find(".datepicker-days tbody").empty().append(v.join(""));var y=this.date&&this.date.getUTCFullYear(),b=this.picker.find(".datepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");y&&y==s&&b.eq(this.date.getUTCMonth()).addClass("active"),(o>s||s>u)&&b.addClass("disabled"),s==o&&b.slice(0,l).addClass("disabled"),s==u&&b.slice(c+1).addClass("disabled"),v="",s=10*parseInt(s/10,10);var w=this.picker.find(".datepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var x=-1;11>x;x++)v+='<span class="year'+(-1==x||10==x?" old":"")+(y==s?" active":"")+(o>s||s>u?" disabled":"")+'">'+s+"</span>",s+=1;w.html(v)},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth();switch(this.viewMode){case 0:this.startDate!==-1/0&&this.startDate.getUTCFullYear()>=e&&this.startDate.getUTCMonth()>=n?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.startDate!==-1/0&&this.startDate.getUTCFullYear()>=e?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(n){n.stopPropagation(),n.preventDefault();var i=t(n.target).closest("span, td, th");if(1==i.length)switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var s=r.modes[this.viewMode].navStep*("prev"==i[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s)}this.fill();break;case"today":var a=new Date;a=e(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),this.showMode(-2);var o="linked"==this.todayBtn?null:"view";this._setDate(a,o)}break;case"span":if(!i.is(".disabled")){if(this.viewDate.setUTCDate(1),i.is(".month")){var l=i.parent().find("span").index(i);this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate})}else{var u=parseInt(i.text(),10)||0;this.viewDate.setUTCFullYear(u),this.element.trigger({type:"changeYear",date:this.viewDate})}this.showMode(-1),this.fill()}break;case"td":if(i.is(".day")&&!i.is(".disabled")){var c=parseInt(i.text(),10)||1,u=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth();i.is(".old")?0===l?(l=11,u-=1):l-=1:i.is(".new")&&(11==l?(l=0,u+=1):l+=1),this._setDate(e(u,l,c,0,0,0,0))}}},_setDate:function(t,e){e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date});var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&(n.change(),!this.autoclose||e&&"date"!=e||this.hide())},moveMonth:function(t,e){if(!e)return t;var n,i,r=new Date(t.valueOf()),s=r.getUTCDate(),a=r.getUTCMonth(),o=Math.abs(e);if(e=e>0?1:-1,1==o)i=-1==e?function(){return r.getUTCMonth()==a}:function(){return r.getUTCMonth()!=n},n=a+e,r.setUTCMonth(n),(0>n||n>11)&&(n=(n+12)%12);else{for(var l=0;o>l;l++)r=this.moveMonth(r,e);n=r.getUTCMonth(),r.setUTCDate(s),i=function(){return n!=r.getUTCMonth()}}for(;i();)r.setUTCDate(--s),r.setUTCMonth(n);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&this.endDate>=t},keydown:function(t){if(this.picker.is(":not(:visible)"))return 27==t.keyCode&&this.show(),void 0;var e,n,i,r=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):(n=new Date(this.date),n.setUTCDate(this.date.getUTCDate()+e),i=new Date(this.viewDate),i.setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),r=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):(n=new Date(this.date),n.setUTCDate(this.date.getUTCDate()+7*e),i=new Date(this.viewDate),i.setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),r=!0);break;case 13:this.hide(),t.preventDefault();break;case 9:this.hide()}if(r){this.element.trigger({type:"changeDate",date:this.date});var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change()}},showMode:function(t){t&&(this.viewMode=Math.max(0,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+r.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}},t.fn.datepicker=function(e){var i=Array.apply(null,arguments);return i.shift(),this.each(function(){var r=t(this),s=r.data("datepicker"),a="object"==typeof e&&e;s||r.data("datepicker",s=new n(this,t.extend({},t.fn.datepicker.defaults,a))),"string"==typeof e&&"function"==typeof s[e]&&s[e].apply(s,i)})},t.fn.datepicker.defaults={},t.fn.datepicker.Constructor=n;var i=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today"}},r={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return 0===t%4&&0!==t%100||0===t%400},getDaysInMonth:function(t,e){return[31,r.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(r,s,a){if(r instanceof Date)return r;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(r)){var o,l,u=/([\-+]\d+)([dmwy])/,c=r.match(/([\-+]\d+)([dmwy])/g);r=new Date;for(var d=0;c.length>d;d++)switch(o=u.exec(c[d]),l=parseInt(o[1]),o[2]){case"d":r.setUTCDate(r.getUTCDate()+l);break;case"m":r=n.prototype.moveMonth.call(n.prototype,r,l);break;case"w":r.setUTCDate(r.getUTCDate()+7*l);break;case"y":r=n.prototype.moveYear.call(n.prototype,r,l)}return e(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),0,0,0)}var h,p,o,c=r&&r.match(this.nonpunctuation)||[],r=new Date,f={},m=["yyyy","yy","M","MM","m","mm","d","dd"],g={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};g.M=g.MM=g.mm=g.m,g.dd=g.d,r=e(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0);var v=s.parts.slice();if(c.length!=v.length&&(v=t(v).filter(function(e,n){return-1!==t.inArray(n,m)}).toArray()),c.length==v.length){for(var d=0,y=v.length;y>d;d++){if(h=parseInt(c[d],10),o=v[d],isNaN(h))switch(o){case"MM":p=t(i[a].months).filter(function(){var t=this.slice(0,c[d].length),e=c[d].slice(0,t.length);return t==e}),h=t.inArray(p[0],i[a].months)+1;break;case"M":p=t(i[a].monthsShort).filter(function(){var t=this.slice(0,c[d].length),e=c[d].slice(0,t.length);return t==e}),h=t.inArray(p[0],i[a].monthsShort)+1}f[o]=h}for(var b,d=0;m.length>d;d++)b=m[d],b in f&&!isNaN(f[b])&&g[b](r,f[b])}return r},formatDate:function(e,n,r){var s={d:e.getUTCDate(),D:i[r].daysShort[e.getUTCDay()],DD:i[r].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:i[r].monthsShort[e.getUTCMonth()],MM:i[r].months[e.getUTCMonth()],yy:(""+e.getUTCFullYear()).substring(2),yyyy:e.getUTCFullYear()};s.dd=(10>s.d?"0":"")+s.d,s.mm=(10>s.m?"0":"")+s.m;for(var e=[],a=t.extend([],n.separators),o=0,l=n.parts.length;l>o;o++)a.length&&e.push(a.shift()),e.push(s[n.parts[o]]);return e.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};r.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+r.headTemplate+"<tbody></tbody>"+r.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table>"+"</div>"+"</div>",t.fn.datepicker.DPGlobal=r}(window.jQuery),function(t){var e=function(n){this.init("typeahead",n,e.defaults),this.options.typeahead=t.extend({},e.defaults.typeahead,{matcher:this.matcher,sorter:this.sorter,highlighter:this.highlighter,updater:this.updater},n.typeahead)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input=this.$tpl.is("input")?this.$tpl:this.$tpl.find('input[type="text"]'),this.options.typeahead.source=this.sourceData,this.$input.typeahead(this.options.typeahead),this.$input.data("typeahead").render=t.proxy(this.typeaheadRender,this.$input.data("typeahead")),this.renderClear(),this.setClass(),this.setAttr("placeholder")},value2htmlFinal:function(e,n){if(this.getIsObjects()){var i=t.fn.editableutils.itemsByValue(e,this.sourceData);t(n).text(i.length?i[0].text:"")}else t(n).text(e)},html2value:function(t){return t?t:null},value2input:function(e){if(this.getIsObjects()){var n=t.fn.editableutils.itemsByValue(e,this.sourceData);this.$input.data("value",e).val(n.length?n[0].text:"")}else this.$input.val(e)},input2value:function(){if(this.getIsObjects()){var e=this.$input.data("value"),n=t.fn.editableutils.itemsByValue(e,this.sourceData);return n.length&&n[0].text.toLowerCase()===this.$input.val().toLowerCase()?e:null}return this.$input.val()},getIsObjects:function(){if(void 0===this.isObjects){this.isObjects=!1;for(var t=0;this.sourceData.length>t;t++)if(this.sourceData[t].value!==this.sourceData[t].text){this.isObjects=!0;break}}return this.isObjects},activate:t.fn.editabletypes.text.prototype.activate,renderClear:t.fn.editabletypes.text.prototype.renderClear,postrender:t.fn.editabletypes.text.prototype.postrender,toggleClear:t.fn.editabletypes.text.prototype.toggleClear,clear:function(){t.fn.editabletypes.text.prototype.clear.call(this),this.$input.data("value","")},matcher:function(e){return t.fn.typeahead.Constructor.prototype.matcher.call(this,e.text)},sorter:function(t){for(var e,n,i=[],r=[],s=[];e=t.shift();)n=e.text,n.toLowerCase().indexOf(this.query.toLowerCase())?~n.indexOf(this.query)?r.push(e):s.push(e):i.push(e);return i.concat(r,s)},highlighter:function(e){return t.fn.typeahead.Constructor.prototype.highlighter.call(this,e.text)},updater:function(t){return t=this.$menu.find(".active").data("item"),this.$element.data("value",t.value),t.text},typeaheadRender:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).data("item",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<input type="text">',typeahead:null,clear:!0}),t.fn.editabletypes.typeahead=e}(window.jQuery),{}}),define("views/gallery/GalleryMainView",["jquery","underscore","backbone","collections/gallery/CategoryCollection","models/gallery/ImageModel","models/gallery/CategoryModel","views/gallery/ImageUploadView","views/gallery/NewCategoryView","text!templates/gallery/galleryMainTemplate.html","text!templates/gallery/galleryHomeTemplate.html","bootstrap-editable"],function(t,e,n,i,r,s,a,o,l,u){var c=n.View.extend({tagName:"div",events:{"click #addImgs":"addImgs","click #addCat":"addCat"},initialize:function(){var t=this;t.onDataHandler=function(){t.render()},t.navBar=void 0==this.options.navBar?!0:void 0==this.options.navBar,t.categoryCollection=new i,t.categoryCollection.catId=this.options.catId,t.categoryCollection.pageId=this.options.pageId,t.categoryCollection.userId=this.options.userId,t.categoryCollection.fetch({success:t.onDataHandler})},render:function(){var n=this;this.currentCat=n.categoryCollection.models[3].toJSON(),this.pagingresult=n.categoryCollection.models[1].toJSON();var i,a={categories:n.categoryCollection.models[0].toJSON(),images:this.pagingresult.elements,catParents:n.categoryCollection.models[2].toJSON(),currentCat:this.currentCat,needDivider:void 0!=this.currentCat.id,currentPage:this.pagingresult.currentPage,totolPages:this.pagingresult.totolPages,navBar:n.navBar,_:e};return void 0==this.options.userId?(i=e.template(u,a),n.rooturl="/gallery/"):(i=e.template(l,a),n.rooturl="/mygallery/"),this.$el.html(i),t("#toggle-fullscreen").button().click(function(){var e=t(this),n=document.documentElement;e.hasClass("active")?(t("#modal-gallery").removeClass("modal-fullscreen modal-fullscreen-stretch"),(document.webkitCancelFullScreen||document.mozCancelFullScreen||t.noop).apply(document),setTimeout(function(){t("#modal-gallery").modal("show")},500),t("#modal-gallery").modal("hide")):(t("#modal-gallery").addClass("modal-fullscreen modal-fullscreen-stretch"),n.webkitRequestFullScreen?n.webkitRequestFullScreen(window.Element.ALLOW_KEYBOARD_INPUT):n.mozRequestFullScreen&&n.mozRequestFullScreen(),setTimeout(function(){t("#modal-gallery").modal("show")},500),t("#modal-gallery").modal("hide"))}),void 0!=this.options.userId?(this.$(".imgtitle").editable({type:"text",pk:1,title:"输入图片标题",name:"title",ajaxOptions:{dataType:"json",type:"PUT"}}),this.$(".imgdes").editable({type:"textarea",pk:1,title:"输入图片描述",name:"description",ajaxOptions:{dataType:"json",type:"PUT"}}),t(".deleteImg").on("click",function(t){t.preventDefault();var e=this.dataset.id,i=new r({id:e,userId:n.options.userId},{action:"delete"});i.destroy({success:function(){n.categoryCollection.fetch({success:n.onDataHandler})}})}),t(".updateImgStatus").on("click",function(e){e.preventDefault();var i=t(this),s=this.dataset.id,a=i.attr("data-status");a=0==a?"1":"0";var o=new r({id:s,userId:n.options.userId,status:a},{action:"updateStatus"});o.save(null,{success:function(){1==a?(i.parents("div.thumbnail").addClass("status_notpublic"),i.text("公开"),i.attr("data-status",a)):(i.parents("div.thumbnail").removeClass("status_notpublic"),i.text("隐藏"),i.attr("data-status",a))}})}),t(".updateCatStatus").on("click",function(e){e.preventDefault();var i=t(this),r=this.dataset.id,a=i.attr("data-status");a=0==a?"1":"0";var o=new s({id:r,userId:n.options.userId,status:a},{action:"updateStatus"});o.save(null,{success:function(){1==a?(i.parents("div.thumbnail").addClass("status_notpublic"),i.text("公开"),i.attr("data-status",a)):(i.parents("div.thumbnail").removeClass("status_notpublic"),i.text("隐藏"),i.attr("data-status",a))}})}),t(".deleteCat").on("click",function(t){t.preventDefault();var e=this.dataset.id,i=new s({id:e,userId:n.options.userId},{action:"delete"});i.destroy({success:function(){n.categoryCollection.fetch({success:n.onDataHandler})}})})):t("#modal-gallery").on("displayed",function(){var e=t(this).data("modal"),n=t(e.$links[e.options.index]).data("id"),i=new r({id:n},{action:"faverite"});i.fetch()}),this.$(".pagination ul > li > a").on("click",function(t){if(t.preventDefault(),"prePage"==this.id){var e=n.pagingresult.currentPage;e>1&&window.app_router.navigate(n.rooturl+"cat/"+n.currentCat.id+"/"+(e-1),{trigger:!0})}else if("nextPage"==this.id){var e=n.pagingresult.currentPage,i=n.pagingresult.totolPages;i>e&&window.app_router.navigate(n.rooturl+"cat/"+n.currentCat.id+"/"+(e+1),{trigger:!0})}else window.app_router.navigate(n.rooturl+"cat/"+n.currentCat.id+"/"+this.text,{trigger:!0})}),this.options.callback&&this.options.callback(),this},addImgs:function(){window.app_router.navigate(window.location.hash.substr(1)+"/addImgs",{trigger:!1});var t=new a({category:this.currentCat});t.render()},addCat:function(){window.app_router.navigate(window.location.hash.substr(1)+"/addCat",{trigger:!1}),t("#gallerymain").unbind();var e=new o({category:this.currentCat,el:this.$("#gallerymain")});e.render()}});return c}),define("text!templates/home/homeTemplate.html",[],function(){return'  <div id="homeSlide">\r\n    Loading....\r\n  </div>\r\n  <div id="homeMain">\r\n\r\n  </div>\r\n'}),define("text!templates/home/homeSlideTemplate.html",[],function(){return'<ul class="container">\r\n    <!-- Carousel\r\n    ================================================== -->\r\n    <div id="myCarousel" class="carousel slide thumbnail">\r\n      <div class="carousel-inner">\r\n\r\n<%var i = 0; \r\n_.each( images, function(image)  { %>\r\n        <div class="item <%= i == 0 ? "active" : "" %> ">\r\n          <img <%= i < 2 ? "src" : "data-lazy-load-src"%>="<%=image.location%>" alt="">\r\n          <div class="container">\r\n            <div class="carousel-caption">\r\n              <h1><%=image.title%></h1>\r\n              <p class="lead"><%=image.description%></p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n<%\r\ni ++;\r\n})%>\r\n      </div>\r\n      <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>\r\n      <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>\r\n    </div><!-- /.carousel -->\r\n</ul>'}),define("views/home/HomeView",["jquery","underscore","backbone","views/sidebar/SidebarView","collections/gallery/ImageCollection","views/gallery/GalleryMainView","text!templates/home/homeTemplate.html","text!templates/home/homeSlideTemplate.html"],function(t,e,n,i,r,s,a,o){var l=n.View.extend({tagName:"div",initialize:function(){var t=this;t.onDataHandler=function(){t.render()},t.galleryMainView=new s({catId:0,pageId:1,navBar:!1}),t.imageCollection=new r(null,{action:"getPopImags"}),t.imageCollection.fetch({success:t.onDataHandler})},render:function(){var n=e.template(a);this.$el.html(n);var i={images:this.imageCollection.toJSON(),_:e};n=e.template(o,i),this.$("#homeSlide").html(n),t("#myCarousel").carousel().on("slid",function(){var e=t(".active.item",this).next(".item").find("img");e.attr("src",e.data("lazy-load-src"))}),this.assign(this.galleryMainView,"#homeMain")}});return l}),define("models/owner/OwnerModel",["underscore","backbone"],function(t,e){var n=e.Model.extend({defaults:{query:"unknown"},initialize:function(t){this.query=t.query},url:function(){return"https://api.github.com/users/"+this.query},parse:function(t){return t.data}});return n}),define("text!templates/footer/footerTemplate.html",[],function(){return"<p>&copy; 2012</p>"}),define("views/footer/FooterView",["jquery","underscore","backbone","models/owner/OwnerModel","text!templates/footer/footerTemplate.html"],function(t,e,n,i,r){var s=n.View.extend({el:t("#footer"),initialize:function(){},render:function(){var t={owner:{name:"Jimmy",avatar_url:"assets/imgs/bighead.jpg"},_:e},n=e.template(r,t);this.$el.html(n)}});return s}),define("text!templates/users/registerFormTemplate.html",[],function(){return'<div class="form-signin">\r\n    <h2 class="form-signin-heading">注册</h2>\r\n    <input type="text" id="remail" class="input-block-level" placeholder="邮件地址">\r\n    <input type="text" id="rname" class="input-block-level" placeholder="用户名">\r\n    <input type="password" id="rpassword" class="input-block-level" placeholder="密码">\r\n    <label class="checkbox">\r\n    <input type="checkbox" value="remember-me"> Remember me\r\n    </label>\r\n    <button id="registerBtn" class="btn btn-large btn-primary" type="submit">注册</button>\r\n</div>'}),define("views/users/RegisterFormView",["jquery","underscore","backbone","text!templates/users/registerFormTemplate.html"],function(t,e,n,i){var r=n.View.extend({el:t("#page"),events:{"click #registerBtn":"register"},render:function(){var t={},n=e.template(i,t);this.$el.html(n)},register:function(){var e=this.$("#remail").val(),n=this.$("#rname").val(),i=this.$("#rpassword").val(),r={email:e,name:n,password:i};t.ajax({url:"/user",data:JSON.stringify(r),context:window,type:"POST",dataType:"json",contentType:"application/json",success:function(){app_router.navigate("/",{trigger:!0})},error:function(){alert("failed")}})}});return r}),define("text!templates/gallery/imageSliderTemplate.html",[],function(){return'<ul class="breadcrumb">\r\n  <li><a href="#/gallery/cat/0">相册</a><span class=\'divider\'>/</span></li>\r\n<%\r\n_.each( catParents, function(parent) {\r\n  if ( parent.id != null ) {%> \r\n  <li><a href="#/gallery/cat/<%=parent.id%>"><%=parent.title%></a><span class=\'divider\'>/</span></li>\r\n  <%}\r\n});%>\r\n  <li><a href="#/gallery/cat/<%=currentCat.id%>"><%=currentCat.title%></a></li>\r\n</ul>\r\n\r\n<ul class="container">\r\n    <!-- Carousel\r\n    ================================================== -->\r\n    <div id="myCarousel" class="carousel slide thumbnail">\r\n      <div class="carousel-inner">\r\n\r\n<%var i = 0; \r\n_.each( images, function(image)  { \r\n        if ( image.id != null ) {%>\r\n        <div class="item <%= image.id == currentImgId ? "active" : "" %> ">\r\n          <img data-imgid="<%=image.id%>" <%= image.id == currentImgId ? "src" : "data-lazy-load-src"%>="<%=image.location%>" alt="">\r\n          <div class="container">\r\n            <div class="carousel-caption">\r\n              <h1><%=image.title%></h1>\r\n              <p class="lead"><%=image.description%></p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n<%\r\n       }\r\n   i ++;\r\n})%>\r\n      </div>\r\n      <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>\r\n      <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>\r\n    </div><!-- /.carousel -->\r\n</ul>'}),define("utils",["jquery","underscore"],function(t){var e={goTop:function(){t("html, body").animate({scrollTop:0},"slow")},initUYan:function(t){window.UYAN?window.UYAN.getSu=function(){return t}:window.uyan_config={du:"blueyun.herokuapp.com",su:t},delete window.uyan_loaded,document.getElementById("UYScript").src="http://v1.uyan.cc/js/iframe.js?UYUserId=1739842&cdnversion="+Math.random(),window.UYAN&&(UYAN.init(),UYAN.reqItf({mode:"getcmt"}))}};return e}),define("views/gallery/ImageSliderView",["jquery","underscore","backbone","collections/gallery/ImageCollection","text!templates/gallery/imageSliderTemplate.html","utils"],function(t,e,n,i,r,s){var a=n.View.extend({tagName:"div",initialize:function(){var t=this;t.onDataHandler=function(){t.render()},t.imageCollection=new i(null,{action:"getCatImags"}),t.imageCollection.imgId=this.options.imgId,t.imageCollection.fetch({success:t.onDataHandler})},render:function(){var n={images:this.imageCollection.models[0].toJSON(),catParents:this.imageCollection.models[1].toJSON(),currentCat:this.imageCollection.models[2].toJSON(),currentImgId:this.options.imgId,_:e},i=e.template(r,n);this.$el.html(i),t("#myCarousel").carousel("pause").on("slid",function(){var e=t(".active.item",this).children("img").data("imgid");s.initUYan("gallery/img/"+e);var n=t(".active.item",this).next(".item").find("img");null==n.attr("src")&&n.attr("src",n.data("lazy-load-src"));var i=t(".active.item",this).prev(".item").find("img");null==i.attr("src")&&i.attr("src",i.data("lazy-load-src")),window.app_router.navigate("gallery/img/"+e,{trigger:!1})});var a=t(".active.item",this.$el).next(".item").find("img");a.attr("src",a.data("lazy-load-src"));var o=t(".active.item",this.$el).prev(".item").find("img");o.attr("src",o.data("lazy-load-src")),this.options.callback&&this.options.callback()}});return a}),define("text!templates/users/loginFormTemplate.html",[],function(){return'  <div>\r\n    <input class="input-small" type="text" id="email" placeholder="你的邮箱">\r\n    <input class="input-small" type="password" id="password" placeholder="密码">\r\n    <a class="btn btn-success btn-small" id="signin">登陆</a>\r\n    <a class="btn btn-success btn-small" href="#newuser" id="newUser">注册</a>\r\n  </div>\r\n  '}),define("text!templates/users/actionsTemplate.html",[],function(){return'<li><a href="#/mygallery/cat/0">我的相册</a></li>\r\n<li id="fat-menu" class="dropdown">\r\n  <a href="#" id="drop3" role="button" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-user"></i>  <%=user.name%><b class="caret"></b></a>\r\n  <ul class="dropdown-menu" role="menu" aria-labelledby="drop3">\r\n    <li><a href="#"><i class="icon-pencil"></i>修改个人信息</a></li>\r\n    <li class="divider"></li>\r\n    <li><a tabindex="-1" href="#/exit">退出</a></li>\r\n  </ul>\r\n</li>\r\n'}),define("views/users/UserActionsView",["jquery","underscore","backbone","views/gallery/ImageUploadView","text!templates/users/actionsTemplate.html"],function(t,e,n,i,r){var s=n.View.extend({el:t("#userAction"),events:{"click #newGallery":"newGallery"},render:function(){var t={user:this.model,_:e},n=e.template(r,t);this.$el.html(n)},newGallery:function(){alert("sdf");var t=new i;t.render()}});return s}),define("views/users/UserLoginView",["jquery","underscore","backbone","text!templates/users/loginFormTemplate.html","views/users/UserActionsView","views/users/RegisterFormView"],function(t,e,n,i,r){var s=n.View.extend({el:t("#userAction"),events:{"click #signin":"signin"},render:function(){var t={},n=e.template(i,t);this.$el.html(n)},signin:function(){var e=this.$("#email").val(),n={email:e,password:this.$("#password").val()};t.ajax({url:"/login",data:JSON.stringify(n),context:this.$el,type:"POST",dataType:"json",contentType:"application/json",success:function(t){var e=new r({model:t});e.render(),sessionStorage.setItem("userid",t.id),sessionStorage.setItem("username",t.name)},error:function(){alert("登陆失败！！")}})}});return s}),define("router",["jquery","underscore","backbone","views/home/HomeView","views/footer/FooterView","views/users/RegisterFormView","views/gallery/GalleryMainView","views/gallery/ImageSliderView","views/users/UserLoginView","views/users/UserActionsView","utils"],function(t,e,n,i,r,s,a,o,l,u,c){var d=n.Router.extend({routes:{"gallery/cat/:catId/:pageId":"showGallery","gallery/cat/:catId":"showGallery","gallery/img/:imgId":"showImage","mygallery/cat/:catId":"showMyGallery","mygallery/cat/:catId/:pageId":"showMyGallery",newuser:"newUser",exit:"exit","*actions":"defaultAction"}}),h=function(){window.app_router=new d;var e=function(){if(t("#userAction").unbind(),null==sessionStorage.getItem("userid")){var e=new l;e.render()}else{var n={name:sessionStorage.getItem("username"),id:sessionStorage.getItem("userid")},i=new u({model:n});i.render()}var s=new r;s.render()};app_router.on("route:showGallery",function(n,i){e();var r=function(){c.goTop()};t("#page").unbind(),i=void 0==i?1:i;var s=new a({catId:n,pageId:i,callback:r});s.setElement(t("#page"))}),app_router.on("route:showImage",function(n){e();var i=function(){c.goTop()};t("#page").unbind();var r=new o({imgId:n,callback:i});r.setElement(t("#page")),c.initUYan("gallery/img/"+n)}),app_router.on("route:showMyGallery",function(n,i){e(),t("#main-menu li").removeClass("active"),t('#main-menu li a[href="#/mygallery/cat/0"]').parent().addClass("active"),t("#page").unbind(),i=void 0==i?1:i;var r=new a({catId:n,pageId:i,userId:sessionStorage.getItem("userid")});r.setElement(t("#page"))}),app_router.on("route:newUser",function(){e();var t=new s;t.render()}),app_router.on("route:exit",function(){sessionStorage.removeItem("userid"),window.app_router.navigate("/",{trigger:!0})}),app_router.on("route:defaultAction",function(){e(),t("#page").unbind(),t("#main-menu-left li").removeClass("active"),t('#main-menu-left li a[href="#"]').parent().addClass("active");var n=new i;n.setElement(t("#page")),c.initUYan("main")}),n.View.prototype.assign=function(t,e){t.setElement(this.$(e)).render()},n.history.start()};return{initialize:h}}),!function(t){t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}();return t&&{end:t}}()})}(window.jQuery),!function(t){var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");
e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,t.proxy(this.removeBackdrop,this)):this.removeBackdrop()):e&&e()}},t.fn.modal=function(n){return this.each(function(){var i=t(this),r=i.data("modal"),s=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);r||i.data("modal",r=new e(this,s)),"string"==typeof n?r[n]():s.show&&r.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),r=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),n.data());e.preventDefault(),r.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(t){function e(){t(i).each(function(){n(t(this)).removeClass("open")})}function n(e){var n,i=e.attr("data-target");return i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=t(i),n.length||(n=e.parent()),n}var i="[data-toggle=dropdown]",r=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};r.prototype={constructor:r,toggle:function(){var i,r,s=t(this);if(!s.is(".disabled, :disabled"))return i=n(s),r=i.hasClass("open"),e(),r||(i.toggleClass("open"),s.focus()),!1},keydown:function(e){var i,r,s,a,o;if(/(38|40|27)/.test(e.keyCode)&&(i=t(this),e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled"))){if(s=n(i),a=s.hasClass("open"),!a||a&&27==e.keyCode)return i.click();r=t("[role=menu] li:not(.divider) a",s),r.length&&(o=r.index(r.filter(":focus")),38==e.keyCode&&o>0&&o--,40==e.keyCode&&r.length-1>o&&o++,~o||(o=0),r.eq(o).focus())}}},t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=r,t(document).on("click.dropdown.data-api touchstart.dropdown.data-api",e).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",i,r.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",i+", [role=menu]",r.prototype.keydown)}(window.jQuery),!function(t){function e(e,n){var i,r=t.proxy(this.process,this),s=t(e).is("body")?t(window):t(e);this.options=t.extend({},t.fn.scrollspy.defaults,n),this.$scrollElement=s.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(i=t(e).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e,n=this;this.offsets=t([]),this.targets=t([]),e=this.$body.find(this.selector).map(function(){var e=t(this),n=e.data("target")||e.attr("href"),i=/^#\w/.test(n)&&t(n);return i&&i.length&&[[i.position().top,n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,s=this.targets,a=this.activeTarget;if(e>=i)return a!=(t=s.last()[0])&&this.activate(t);for(t=r.length;t--;)a!=s[t]&&e>=r[t]&&(!r[t+1]||r[t+1]>=e)&&this.activate(s[t])},activate:function(e){var n,i;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}},t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),r=i.data("scrollspy"),s="object"==typeof n&&n;r||i.data("scrollspy",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),!function(t){var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,n,i,r=this.element,s=r.closest("ul:not(.dropdown-menu)"),a=r.attr("data-target");a||(a=r.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(e=s.find(".active:last a")[0],i=t.Event("show",{relatedTarget:e}),r.trigger(i),i.isDefaultPrevented()||(n=t(a),this.activate(r.parent("li"),s),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,n,i){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var s=n.find("> .active"),a=i&&t.support.transition&&s.hasClass("fade");a?s.one(t.support.transition.end,r):r(),s.removeClass("in")}},t.fn.tab=function(n){return this.each(function(){var i=t(this),r=i.data("tab");r||i.data("tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),!function(t){var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,n,i){var r,s;this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(r="hover"==this.options.trigger?"mouseenter":"focus",s="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.leave,this))),this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,e,this.$element.data()),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var t,e,n,i,r,s,a;if(this.hasContent()&&this.enabled){switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,e=/in/.test(s),t.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),n=this.getPosition(e),i=t[0].offsetWidth,r=t[0].offsetHeight,e?s.split(" ")[1]:s){case"bottom":a={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":a={top:n.top-r,left:n.left+n.width/2-i/2};break;case"left":a={top:n.top+n.height/2-r/2,left:n.left-i};break;case"right":a={top:n.top+n.height/2-r/2,left:n.left+n.width}}t.offset(a).addClass(s).addClass("in")}},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){n.off(t.support.transition.end).detach()},500);n.one(t.support.transition.end,function(){clearTimeout(e),n.detach()})}var n=this.tip();return n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():n.detach(),this},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(e){return t.extend({},e?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);n[n.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},t.fn.tooltip=function(n){return this.each(function(){var i=t(this),r=i.data("tooltip"),s="object"==typeof n&&n;r||i.data("tooltip",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1}}(window.jQuery),!function(t){var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content > *")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-content")||("function"==typeof n.content?n.content.call(e[0]):n.content)},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("popover"),s="object"==typeof n&&n;r||i.data("popover",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(t){var e=function(e,n){this.options=t.extend({},t.fn.affix.defaults,n),this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(function(){setTimeout(t.proxy(this.checkPosition,this),1)},this)),this.$element=t(e),this.checkPosition()};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,n=t(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),s=this.options.offset,a=s.bottom,o=s.top,l="affix affix-top affix-bottom";"object"!=typeof s&&(a=o=s),"function"==typeof o&&(o=s.top()),"function"==typeof a&&(a=s.bottom()),e=null!=this.unpin&&r.top>=i+this.unpin?!1:null!=a&&r.top+this.$element.height()>=n-a?"bottom":null!=o&&o>=i?"top":!1,this.affixed!==e&&(this.affixed=e,this.unpin="bottom"==e?r.top-i:null,this.$element.removeClass(l).addClass("affix"+(e?"-"+e:"")))}},t.fn.affix=function(n){return this.each(function(){var i=t(this),r=i.data("affix"),s="object"==typeof n&&n;r||i.data("affix",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.affix.Constructor=e,t.fn.affix.defaults={offset:0},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(window.jQuery),!function(t){var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){i.trigger("closed").remove()}var i,r=t(this),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),i=t(s),e&&e.preventDefault(),i.length||(i=r.hasClass("alert")?r:r.parent()),i.trigger(e=t.Event("close")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,n):n())},t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("alert");r||i.data("alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t(document).on("click.alert.data-api",e,n.prototype.close)}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),r=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")},t.fn.button=function(n){return this.each(function(){var i=t(this),r=i.data("button"),s="object"==typeof n&&n;r||i.data("button",r=new e(this,s)),"toggle"==n?r.toggle():n&&r.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,n),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,n,i,r;if(!this.transitioning){if(e=this.dimension(),n=t.camelCase(["scroll",e].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(r=i.data("collapse"),r&&r.transitioning)return;i.collapse("hide"),r||i.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][n])}},hide:function(){var e;this.transitioning||(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,n,i){var r=this,s=function(){"show"==n.type&&r.reset(),r.transitioning=0,r.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,s):s())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},t.fn.collapse=function(n){return this.each(function(){var i=t(this),r=i.data("collapse"),s="object"==typeof n&&n;r||i.data("collapse",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),r=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=t(r).data("collapse")?"toggle":i.data();i[t(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(r).collapse(s)})}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.options=n,this.options.slide&&this.slide(this.options.slide),"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){return e||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},to:function(e){var n=this.$element.find(".item.active"),i=n.parent().children(),r=i.index(n),s=this;if(!(e>i.length-1||0>e))return this.sliding?this.$element.one("slid",function(){s.to(e)}):r==e?this.pause().cycle():this.slide(e>r?"next":"prev",t(i[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(e,n){var i,r=this.$element.find(".item.active"),s=n||r[e](),a=this.interval,o="next"==e?"left":"right",l="next"==e?"first":"last",u=this;if(this.sliding=!0,a&&this.pause(),s=s.length?s:this.$element.find(".item")[l](),i=t.Event("slide",{relatedTarget:s[0]}),!s.hasClass("active")){if(t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;s.addClass(e),s[0].offsetWidth,r.addClass(o),s.addClass(o),this.$element.one(t.support.transition.end,function(){s.removeClass([e,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;r.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return a&&this.cycle(),this}}},t.fn.carousel=function(n){return this.each(function(){var i=t(this),r=i.data("carousel"),s=t.extend({},t.fn.carousel.defaults,"object"==typeof n&&n),a="string"==typeof n?n:s.slide;r||i.data("carousel",r=new e(this,s)),"number"==typeof n?r.to(n):a?r[a]():s.interval&&r.cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t(document).on("click.carousel.data-api","[data-slide]",function(e){var n,i=t(this),r=t(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=t.extend({},r.data(),i.data());r.carousel(s),e.preventDefault()})}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=t(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:e.top+e.height,left:e.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.options.minLength>this.query.length?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],r=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?i.push(e):r.push(e):n.push(e);return n.concat(i,r)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).attr("data-value",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=!~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},blur:function(){var t=this;setTimeout(function(){t.hide()},150)},click:function(t){t.stopPropagation(),t.preventDefault(),this.select()},mouseenter:function(e){this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")}},t.fn.typeahead=function(n){return this.each(function(){var i=t(this),r=i.data("typeahead"),s="object"==typeof n&&n;r||i.data("typeahead",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var n=t(this);n.data("typeahead")||(e.preventDefault(),n.typeahead(n.data()))})}(window.jQuery),define("bootstrap",function(){}),define("app",["jquery","underscore","backbone","router","bootstrap"],function(t,e,n,i){var r=function(){i.initialize()};return{initialize:r}}),require.config({paths:{jquery:"/assets/js/libs/jquery/jquery-min","jquery.ui.widget":"/assets/js/libs/jquery/jquery.ui.widget",underscore:"/assets/js/libs/underscore/underscore-min",backbone:"/assets/js/libs/backbone/backbone-min",bootstrap:"/assets/js/libs/bootstrap/bootstrap",templates:"/assets/templates","jquery.fileupload":"/assets/js/libs/fileupload/js/jquery.fileupload","jquery.fileupload-fp":"libs/fileupload/js/jquery.fileupload-fp","fileupload-ui":"/assets/js/libs/fileupload/js/jquery.fileupload-ui",tmpl:"/assets/js/libs/fileupload/js/tmpl.min","load-image":"/assets/js/libs/fileupload/js/load-image.min","canvas-to-blob":"/assets/js/libs/fileupload/js/canvas-to-blob.min","image-gallery":"/assets/js/libs/imagegallery/bootstrap-image-gallery","bootstrap-editable":"/assets/js/libs/bootstrap-editable/js/bootstrap-editable"}}),require(["jquery","underscore","backbone","app"],function(t,e,n,i){i.initialize()}),define("main",function(){});